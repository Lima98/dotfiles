"use strict";var cp=Object.create;var Et=Object.defineProperty;var lp=Object.getOwnPropertyDescriptor;var up=Object.getOwnPropertyNames;var fp=Object.getPrototypeOf,dp=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fn=(e,t)=>{for(var r in t)Et(e,r,{get:t[r],enumerable:!0})},Ui=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of up(t))!dp.call(e,o)&&o!==r&&Et(e,o,{get:()=>t[o],enumerable:!(n=lp(t,o))||n.enumerable});return e};var O=(e,t,r)=>(r=e!=null?cp(fp(e)):{},Ui(t||!e||!e.__esModule?Et(r,"default",{value:e,enumerable:!0}):r,e)),pp=e=>Ui(Et({},"__esModule",{value:!0}),e);function w(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var q=l(()=>{});var _i,Ie,mp,dn,pn,Te=l(()=>{_i=require("node:url"),Ie=(e,t)=>{let r=pn(mp(e));if(typeof r!="string")throw new TypeError(`${t} must be a string or a file URL: ${r}.`);return r},mp=e=>dn(e)?e.toString():e,dn=e=>typeof e!="string"&&e&&Object.getPrototypeOf(e)===String.prototype,pn=e=>e instanceof URL?(0,_i.fileURLToPath)(e):e});var At,mn=l(()=>{q();Te();At=(e,t=[],r={})=>{let n=Ie(e,"First argument"),[o,i]=w(t)?[[],t]:[t,r];if(!Array.isArray(o))throw new TypeError(`Second argument must be either an array of arguments or an options object: ${o}`);if(o.some(c=>typeof c=="object"&&c!==null))throw new TypeError(`Second argument must be an array of strings: ${o}`);let s=o.map(String),a=s.find(c=>c.includes("\0"));if(a!==void 0)throw new TypeError(`Arguments cannot contain null bytes ("\\0"): ${a}`);if(!w(i))throw new TypeError(`Last argument must be an options object: ${i}`);return[n,s,i]}});var Ni,ji,ki,x,K,hp,Gi,gp,Ot,Wi,yp,Xe,Sp,hn,wp,C=l(()=>{Ni=require("node:string_decoder"),{toString:ji}=Object.prototype,ki=e=>ji.call(e)==="[object ArrayBuffer]",x=e=>ji.call(e)==="[object Uint8Array]",K=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),hp=new TextEncoder,Gi=e=>hp.encode(e),gp=new TextDecoder,Ot=e=>gp.decode(e),Wi=(e,t)=>yp(e,t).join(""),yp=(e,t)=>{if(t==="utf8"&&e.every(i=>typeof i=="string"))return e;let r=new Ni.StringDecoder(t),n=e.map(i=>typeof i=="string"?Gi(i):i).map(i=>r.write(i)),o=r.end();return o===""?n:[...n,o]},Xe=e=>e.length===1&&x(e[0])?e[0]:hn(Sp(e)),Sp=e=>e.map(t=>typeof t=="string"?Gi(t):t),hn=e=>{let t=new Uint8Array(wp(e)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t},wp=e=>{let t=0;for(let r of e)t+=r.length;return t}});var Yi,qi,Ki,bp,xp,zi,Dp,Vi,Hi,Ep,Ji=l(()=>{Yi=require("node:child_process");q();C();qi=e=>Array.isArray(e)&&Array.isArray(e.raw),Ki=(e,t)=>{let r=[];for(let[i,s]of e.entries())r=bp({templates:e,expressions:t,tokens:r,index:i,template:s});if(r.length===0)throw new TypeError("Template script must not be empty");let[n,...o]=r;return[n,o,{}]},bp=({templates:e,expressions:t,tokens:r,index:n,template:o})=>{if(o===void 0)throw new TypeError(`Invalid backslash sequence: ${e.raw[n]}`);let{nextTokens:i,leadingWhitespaces:s,trailingWhitespaces:a}=xp(o,e.raw[n]),c=Vi(r,i,s);if(n===t.length)return c;let f=t[n],u=Array.isArray(f)?f.map(d=>Hi(d)):[Hi(f)];return Vi(c,u,a)},xp=(e,t)=>{if(t.length===0)return{nextTokens:[],leadingWhitespaces:!1,trailingWhitespaces:!1};let r=[],n=0,o=zi.has(t[0]);for(let s=0,a=0;s<e.length;s+=1,a+=1){let c=t[a];if(zi.has(c))n!==s&&r.push(e.slice(n,s)),n=s+1;else if(c==="\\"){let f=t[a+1];f===`
`?(s-=1,a+=1):f==="u"&&t[a+2]==="{"?a=t.indexOf("}",a+3):a+=Dp[f]??1}}let i=n===e.length;return i||r.push(e.slice(n)),{nextTokens:r,leadingWhitespaces:o,trailingWhitespaces:i}},zi=new Set([" ","	","\r",`
`]),Dp={x:3,u:5},Vi=(e,t,r)=>r||e.length===0||t.length===0?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],Hi=e=>{let t=typeof e;if(t==="string")return e;if(t==="number")return String(e);if(w(e)&&("stdout"in e||"isMaxBuffer"in e))return Ep(e);throw e instanceof Yi.ChildProcess||Object.prototype.toString.call(e)==="[object Promise]"?new TypeError("Unexpected subprocess in template expression. Please use ${await subprocess} instead of ${subprocess}."):new TypeError(`Unexpected "${t}" in template expression`)},Ep=({stdout:e})=>{if(typeof e=="string")return e;if(x(e))return Ot(e);throw e===void 0?new TypeError(`Missing result.stdout in template expression. This is probably due to the previous subprocess' "stdout" option.`):new TypeError(`Unexpected "${typeof e}" stdout in template expression`)}});var It,$,Tt,B,vt,J=l(()=>{It=O(require("node:process"),1),$=e=>Tt.includes(e),Tt=[It.default.stdin,It.default.stdout,It.default.stderr],B=["stdin","stdout","stderr"],vt=e=>B[e]??`stdio[${e}]`});var Zi,Qi,gn,Ap,Op,Ip,Tp,Xi,vp,yn,Rp,Cp,Pp,Mp,Sn,X,Z=l(()=>{Zi=require("node:util");q();J();Qi=e=>{let t={...e};for(let r of Sn)t[r]=gn(e,r);return t},gn=(e,t)=>{let r=Array.from({length:Ap(e)+1}),n=Op(e[t],r,t);return Cp(n,t)},Ap=({stdio:e})=>Array.isArray(e)?Math.max(e.length,B.length):B.length,Op=(e,t,r)=>w(e)?Ip(e,t,r):t.fill(e),Ip=(e,t,r)=>{for(let n of Object.keys(e).sort(Tp))for(let o of vp(n,r,t))t[o]=e[n];return t},Tp=(e,t)=>Xi(e)<Xi(t)?1:-1,Xi=e=>e==="stdout"||e==="stderr"?0:e==="all"?2:1,vp=(e,t,r)=>{if(e==="ipc")return[r.length-1];let n=yn(e);if(n===void 0||n===0)throw new TypeError(`"${t}.${e}" is invalid.
It must be "${t}.stdout", "${t}.stderr", "${t}.all", "${t}.ipc", or "${t}.fd3", "${t}.fd4" (and so on).`);if(n>=r.length)throw new TypeError(`"${t}.${e}" is invalid: that file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);return n==="all"?[1,2]:[n]},yn=e=>{if(e==="all")return e;if(B.includes(e))return B.indexOf(e);let t=Rp.exec(e);if(t!==null)return Number(t[1])},Rp=/^fd(\d+)$/,Cp=(e,t)=>e.map(r=>r===void 0?Mp[t]:r),Pp=(0,Zi.debuglog)("execa").enabled?"full":"none",Mp={lines:!1,buffer:!0,maxBuffer:1e3*1e3*100,verbose:Pp,stripFinalNewline:!0},Sn=["lines","buffer","maxBuffer","verbose","stripFinalNewline"],X=(e,t)=>t==="ipc"?e.at(-1):e[t]});var ve,Re,es,wn,Lp,Rt,Ct,ne=l(()=>{Z();ve=({verbose:e},t)=>wn(e,t)!=="none",Re=({verbose:e},t)=>!["none","short"].includes(wn(e,t)),es=({verbose:e},t)=>{let r=wn(e,t);return Rt(r)?r:void 0},wn=(e,t)=>t===void 0?Lp(e):X(e,t),Lp=e=>e.find(t=>Rt(t))??Ct.findLast(t=>e.includes(t)),Rt=e=>typeof e=="function",Ct=["none","short","full"]});var ts,rs,ns,Ze,os,Bp,Fp,$p,Up,_p,Np,jp,Pt=l(()=>{ts=require("node:process"),rs=require("node:util"),ns=(e,t)=>{let r=[e,...t],n=r.join(" "),o=r.map(i=>Np(os(i))).join(" ");return{command:n,escapedCommand:o}},Ze=e=>(0,rs.stripVTControlCharacters)(e).split(`
`).map(t=>os(t)).join(`
`),os=e=>e.replaceAll($p,t=>Bp(t)),Bp=e=>{let t=Up[e];if(t!==void 0)return t;let r=e.codePointAt(0),n=r.toString(16);return r<=_p?`\\u${n.padStart(4,"0")}`:`\\U${n}`},Fp=()=>{try{return new RegExp("\\p{Separator}|\\p{Other}","gu")}catch{return/[\s\u0000-\u001F\u007F-\u009F\u00AD]/g}},$p=Fp(),Up={" ":" ","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},_p=65535,Np=e=>jp.test(e)?e:ts.platform==="win32"?`"${e.replaceAll('"','""')}"`:`'${e.replaceAll("'","'\\''")}'`,jp=/^[\w./-]+$/});function xn(){let{env:e}=bn.default,{TERM:t,TERM_PROGRAM:r}=e;return bn.default.platform!=="win32"?t!=="linux":!!e.WT_SESSION||!!e.TERMINUS_SUBLIME||e.ConEmuTask==="{cmd::Cmder}"||r==="Terminus-Sublime"||r==="vscode"||t==="xterm-256color"||t==="alacritty"||t==="rxvt-unicode"||t==="rxvt-unicode-256color"||e.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var bn,is=l(()=>{bn=O(require("node:process"),1)});var ss,as,kp,Gp,Wp,zp,Vp,Mt,pb,cs=l(()=>{is();ss={circleQuestionMark:"(?)",questionMarkPrefix:"(?)",square:"\u2588",squareDarkShade:"\u2593",squareMediumShade:"\u2592",squareLightShade:"\u2591",squareTop:"\u2580",squareBottom:"\u2584",squareLeft:"\u258C",squareRight:"\u2590",squareCenter:"\u25A0",bullet:"\u25CF",dot:"\u2024",ellipsis:"\u2026",pointerSmall:"\u203A",triangleUp:"\u25B2",triangleUpSmall:"\u25B4",triangleDown:"\u25BC",triangleDownSmall:"\u25BE",triangleLeftSmall:"\u25C2",triangleRightSmall:"\u25B8",home:"\u2302",heart:"\u2665",musicNote:"\u266A",musicNoteBeamed:"\u266B",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",arrowLeftRight:"\u2194",arrowUpDown:"\u2195",almostEqual:"\u2248",notEqual:"\u2260",lessOrEqual:"\u2264",greaterOrEqual:"\u2265",identical:"\u2261",infinity:"\u221E",subscriptZero:"\u2080",subscriptOne:"\u2081",subscriptTwo:"\u2082",subscriptThree:"\u2083",subscriptFour:"\u2084",subscriptFive:"\u2085",subscriptSix:"\u2086",subscriptSeven:"\u2087",subscriptEight:"\u2088",subscriptNine:"\u2089",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneEighth:"\u215B",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E",line:"\u2500",lineBold:"\u2501",lineDouble:"\u2550",lineDashed0:"\u2504",lineDashed1:"\u2505",lineDashed2:"\u2508",lineDashed3:"\u2509",lineDashed4:"\u254C",lineDashed5:"\u254D",lineDashed6:"\u2574",lineDashed7:"\u2576",lineDashed8:"\u2578",lineDashed9:"\u257A",lineDashed10:"\u257C",lineDashed11:"\u257E",lineDashed12:"\u2212",lineDashed13:"\u2013",lineDashed14:"\u2010",lineDashed15:"\u2043",lineVertical:"\u2502",lineVerticalBold:"\u2503",lineVerticalDouble:"\u2551",lineVerticalDashed0:"\u2506",lineVerticalDashed1:"\u2507",lineVerticalDashed2:"\u250A",lineVerticalDashed3:"\u250B",lineVerticalDashed4:"\u254E",lineVerticalDashed5:"\u254F",lineVerticalDashed6:"\u2575",lineVerticalDashed7:"\u2577",lineVerticalDashed8:"\u2579",lineVerticalDashed9:"\u257B",lineVerticalDashed10:"\u257D",lineVerticalDashed11:"\u257F",lineDownLeft:"\u2510",lineDownLeftArc:"\u256E",lineDownBoldLeftBold:"\u2513",lineDownBoldLeft:"\u2512",lineDownLeftBold:"\u2511",lineDownDoubleLeftDouble:"\u2557",lineDownDoubleLeft:"\u2556",lineDownLeftDouble:"\u2555",lineDownRight:"\u250C",lineDownRightArc:"\u256D",lineDownBoldRightBold:"\u250F",lineDownBoldRight:"\u250E",lineDownRightBold:"\u250D",lineDownDoubleRightDouble:"\u2554",lineDownDoubleRight:"\u2553",lineDownRightDouble:"\u2552",lineUpLeft:"\u2518",lineUpLeftArc:"\u256F",lineUpBoldLeftBold:"\u251B",lineUpBoldLeft:"\u251A",lineUpLeftBold:"\u2519",lineUpDoubleLeftDouble:"\u255D",lineUpDoubleLeft:"\u255C",lineUpLeftDouble:"\u255B",lineUpRight:"\u2514",lineUpRightArc:"\u2570",lineUpBoldRightBold:"\u2517",lineUpBoldRight:"\u2516",lineUpRightBold:"\u2515",lineUpDoubleRightDouble:"\u255A",lineUpDoubleRight:"\u2559",lineUpRightDouble:"\u2558",lineUpDownLeft:"\u2524",lineUpBoldDownBoldLeftBold:"\u252B",lineUpBoldDownBoldLeft:"\u2528",lineUpDownLeftBold:"\u2525",lineUpBoldDownLeftBold:"\u2529",lineUpDownBoldLeftBold:"\u252A",lineUpDownBoldLeft:"\u2527",lineUpBoldDownLeft:"\u2526",lineUpDoubleDownDoubleLeftDouble:"\u2563",lineUpDoubleDownDoubleLeft:"\u2562",lineUpDownLeftDouble:"\u2561",lineUpDownRight:"\u251C",lineUpBoldDownBoldRightBold:"\u2523",lineUpBoldDownBoldRight:"\u2520",lineUpDownRightBold:"\u251D",lineUpBoldDownRightBold:"\u2521",lineUpDownBoldRightBold:"\u2522",lineUpDownBoldRight:"\u251F",lineUpBoldDownRight:"\u251E",lineUpDoubleDownDoubleRightDouble:"\u2560",lineUpDoubleDownDoubleRight:"\u255F",lineUpDownRightDouble:"\u255E",lineDownLeftRight:"\u252C",lineDownBoldLeftBoldRightBold:"\u2533",lineDownLeftBoldRightBold:"\u252F",lineDownBoldLeftRight:"\u2530",lineDownBoldLeftBoldRight:"\u2531",lineDownBoldLeftRightBold:"\u2532",lineDownLeftRightBold:"\u252E",lineDownLeftBoldRight:"\u252D",lineDownDoubleLeftDoubleRightDouble:"\u2566",lineDownDoubleLeftRight:"\u2565",lineDownLeftDoubleRightDouble:"\u2564",lineUpLeftRight:"\u2534",lineUpBoldLeftBoldRightBold:"\u253B",lineUpLeftBoldRightBold:"\u2537",lineUpBoldLeftRight:"\u2538",lineUpBoldLeftBoldRight:"\u2539",lineUpBoldLeftRightBold:"\u253A",lineUpLeftRightBold:"\u2536",lineUpLeftBoldRight:"\u2535",lineUpDoubleLeftDoubleRightDouble:"\u2569",lineUpDoubleLeftRight:"\u2568",lineUpLeftDoubleRightDouble:"\u2567",lineUpDownLeftRight:"\u253C",lineUpBoldDownBoldLeftBoldRightBold:"\u254B",lineUpDownBoldLeftBoldRightBold:"\u2548",lineUpBoldDownLeftBoldRightBold:"\u2547",lineUpBoldDownBoldLeftRightBold:"\u254A",lineUpBoldDownBoldLeftBoldRight:"\u2549",lineUpBoldDownLeftRight:"\u2540",lineUpDownBoldLeftRight:"\u2541",lineUpDownLeftBoldRight:"\u253D",lineUpDownLeftRightBold:"\u253E",lineUpBoldDownBoldLeftRight:"\u2542",lineUpDownLeftBoldRightBold:"\u253F",lineUpBoldDownLeftBoldRight:"\u2543",lineUpBoldDownLeftRightBold:"\u2544",lineUpDownBoldLeftBoldRight:"\u2545",lineUpDownBoldLeftRightBold:"\u2546",lineUpDoubleDownDoubleLeftDoubleRightDouble:"\u256C",lineUpDoubleDownDoubleLeftRight:"\u256B",lineUpDownLeftDoubleRightDouble:"\u256A",lineCross:"\u2573",lineBackslash:"\u2572",lineSlash:"\u2571"},as={tick:"\u2714",info:"\u2139",warning:"\u26A0",cross:"\u2718",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",pointer:"\u276F",triangleUpOutline:"\u25B3",triangleLeft:"\u25C0",triangleRight:"\u25B6",lozenge:"\u25C6",lozengeOutline:"\u25C7",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",star:"\u2605",play:"\u25B6",nodejs:"\u2B22",oneSeventh:"\u2150",oneNinth:"\u2151",oneTenth:"\u2152"},kp={tick:"\u221A",info:"i",warning:"\u203C",cross:"\xD7",squareSmall:"\u25A1",squareSmallFilled:"\u25A0",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",pointer:">",triangleUpOutline:"\u2206",triangleLeft:"\u25C4",triangleRight:"\u25BA",lozenge:"\u2666",lozengeOutline:"\u25CA",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",star:"\u2736",play:"\u25BA",nodejs:"\u2666",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},Gp={...ss,...as},Wp={...ss,...kp},zp=xn(),Vp=zp?Gp:Wp,Mt=Vp,pb=Object.entries(as)});var ls,Hp,g,hb,us,gb,yb,Sb,wb,bb,xb,Db,Eb,Ab,Ob,Ib,Tb,vb,Rb,Cb,Lt,Pb,Mb,Lb,Bb,Fb,$b,Ub,_b,Nb,fs,jb,ds,kb,Gb,Wb,zb,Vb,Hb,Yb,qb,Kb,Jb,Xb,Dn=l(()=>{ls=O(require("node:tty"),1),Hp=ls.default?.WriteStream?.prototype?.hasColors?.()??!1,g=(e,t)=>{if(!Hp)return o=>o;let r=`\x1B[${e}m`,n=`\x1B[${t}m`;return o=>{let i=o+"",s=i.indexOf(n);if(s===-1)return r+i+n;let a=r,c=0,u=(t===22?n:"")+r;for(;s!==-1;)a+=i.slice(c,s)+u,c=s+n.length,s=i.indexOf(n,c);return a+=i.slice(c)+n,a}},hb=g(0,0),us=g(1,22),gb=g(2,22),yb=g(3,23),Sb=g(4,24),wb=g(53,55),bb=g(7,27),xb=g(8,28),Db=g(9,29),Eb=g(30,39),Ab=g(31,39),Ob=g(32,39),Ib=g(33,39),Tb=g(34,39),vb=g(35,39),Rb=g(36,39),Cb=g(37,39),Lt=g(90,39),Pb=g(40,49),Mb=g(41,49),Lb=g(42,49),Bb=g(43,49),Fb=g(44,49),$b=g(45,49),Ub=g(46,49),_b=g(47,49),Nb=g(100,49),fs=g(91,39),jb=g(92,39),ds=g(93,39),kb=g(94,39),Gb=g(95,39),Wb=g(96,39),zb=g(97,39),Vb=g(101,49),Hb=g(102,49),Yb=g(103,49),qb=g(104,49),Kb=g(105,49),Jb=g(106,49),Xb=g(107,49)});var ps=l(()=>{Dn();Dn()});var gs,qp,Bt,ms,Kp,hs,Jp,ys=l(()=>{cs();ps();gs=({type:e,message:t,timestamp:r,piped:n,commandId:o,result:{failed:i=!1}={},options:{reject:s=!0}})=>{let a=qp(r),c=Kp[e]({failed:i,reject:s,piped:n}),f=Jp[e]({reject:s});return`${Lt(`[${a}]`)} ${Lt(`[${o}]`)} ${f(c)} ${f(t)}`},qp=e=>`${Bt(e.getHours(),2)}:${Bt(e.getMinutes(),2)}:${Bt(e.getSeconds(),2)}.${Bt(e.getMilliseconds(),3)}`,Bt=(e,t)=>String(e).padStart(t,"0"),ms=({failed:e,reject:t})=>e?t?Mt.cross:Mt.warning:Mt.tick,Kp={command:({piped:e})=>e?"|":"$",output:()=>" ",ipc:()=>"*",error:ms,duration:ms},hs=e=>e,Jp={command:()=>us,output:()=>hs,ipc:()=>hs,error:({reject:e})=>e?fs:ds,duration:()=>Lt}});var Ss,Xp,Zp,ws=l(()=>{ne();Ss=(e,t,r)=>{let n=es(t,r);return e.map(({verboseLine:o,verboseObject:i})=>Xp(o,i,n)).filter(o=>o!==void 0).map(o=>Zp(o)).join("")},Xp=(e,t,r)=>{if(r===void 0)return e;let n=r(e,t);if(typeof n=="string")return n},Zp=e=>e.endsWith(`
`)?e:`${e}
`});var bs,j,Qp,em,tm,Ft,rm,Ce=l(()=>{bs=require("node:util");Pt();ys();ws();j=({type:e,verboseMessage:t,fdNumber:r,verboseInfo:n,result:o})=>{let i=Qp({type:e,result:o,verboseInfo:n}),s=em(t,i),a=Ss(s,n,r);a!==""&&console.warn(a.slice(0,-1))},Qp=({type:e,result:t,verboseInfo:{escapedCommand:r,commandId:n,rawOptions:{piped:o=!1,...i}}})=>({type:e,escapedCommand:r,commandId:`${n}`,timestamp:new Date,piped:o,result:t,options:i}),em=(e,t)=>e.split(`
`).map(r=>tm({...t,message:r})),tm=e=>({verboseLine:gs(e),verboseObject:e}),Ft=e=>{let t=typeof e=="string"?e:(0,bs.inspect)(e);return Ze(t).replaceAll("	"," ".repeat(rm))},rm=2});var xs,Ds=l(()=>{ne();Ce();xs=(e,t)=>{ve(t)&&j({type:"command",verboseMessage:e,verboseInfo:t})}});var Es,nm,om,im,As=l(()=>{ne();Es=(e,t,r)=>{im(e);let n=nm(e);return{verbose:e,escapedCommand:t,commandId:n,rawOptions:r}},nm=e=>ve({verbose:e})?om++:void 0,om=0n,im=e=>{for(let t of e){if(t===!1)throw new TypeError(`The "verbose: false" option was renamed to "verbose: 'none'".`);if(t===!0)throw new TypeError(`The "verbose: true" option was renamed to "verbose: 'short'".`);if(!Ct.includes(t)&&!Rt(t)){let r=Ct.map(n=>`'${n}'`).join(", ");throw new TypeError(`The "verbose" option must not be ${t}. Allowed values are: ${r} or a function.`)}}}});var En,$t,An,Ut=l(()=>{En=require("node:process"),$t=()=>En.hrtime.bigint(),An=e=>Number(En.hrtime.bigint()-e)/1e6});var _t,On=l(()=>{Ds();As();Ut();Pt();Z();_t=(e,t,r)=>{let n=$t(),{command:o,escapedCommand:i}=ns(e,t),s=gn(r,"verbose"),a=Es(s,i,{...r});return xs(i,a),{command:o,escapedCommand:i,startTime:n,verboseInfo:a}}});var Rs=R((xx,vs)=>{vs.exports=Ts;Ts.sync=am;var Os=require("fs");function sm(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Is(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:sm(t,r)}function Ts(e,t,r){Os.stat(e,function(n,o){r(n,n?!1:Is(o,e,t))})}function am(e,t){return Is(Os.statSync(e),e,t)}});var Bs=R((Dx,Ls)=>{Ls.exports=Ps;Ps.sync=cm;var Cs=require("fs");function Ps(e,t,r){Cs.stat(e,function(n,o){r(n,n?!1:Ms(o,t))})}function cm(e,t){return Ms(Cs.statSync(e),t)}function Ms(e,t){return e.isFile()&&lm(e,t)}function lm(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),s=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),f=parseInt("001",8),u=a|c,d=r&f||r&c&&o===s||r&a&&n===i||r&u&&i===0;return d}});var $s=R((Ax,Fs)=>{var Ex=require("fs"),Nt;process.platform==="win32"||global.TESTING_WINDOWS?Nt=Rs():Nt=Bs();Fs.exports=In;In.sync=um;function In(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){In(e,t||{},function(i,s){i?o(i):n(s)})})}Nt(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function um(e,t){try{return Nt.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Ws=R((Ox,Gs)=>{var Pe=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Us=require("path"),fm=Pe?";":":",_s=$s(),Ns=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),js=(e,t)=>{let r=t.colon||fm,n=e.match(/\//)||Pe&&e.match(/\\/)?[""]:[...Pe?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Pe?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Pe?o.split(r):[""];return Pe&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},ks=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=js(e,t),s=[],a=f=>new Promise((u,d)=>{if(f===n.length)return t.all&&s.length?u(s):d(Ns(e));let p=n[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,h=Us.join(m,e),y=!m&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;u(c(y,f,0))}),c=(f,u,d)=>new Promise((p,m)=>{if(d===o.length)return p(a(u+1));let h=o[d];_s(f+h,{pathExt:i},(y,b)=>{if(!y&&b)if(t.all)s.push(f+h);else return p(f+h);return p(c(f,u,d+1))})});return r?a(0).then(f=>r(null,f),r):a(0)},dm=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=js(e,t),i=[];for(let s=0;s<r.length;s++){let a=r[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,f=Us.join(c,e),u=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let d=0;d<n.length;d++){let p=u+n[d];try{if(_s.sync(p,{pathExt:o}))if(t.all)i.push(p);else return p}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw Ns(e)};Gs.exports=ks;ks.sync=dm});var Vs=R((Ix,Tn)=>{"use strict";var zs=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Tn.exports=zs;Tn.exports.default=zs});var Ks=R((Tx,qs)=>{"use strict";var Hs=require("path"),pm=Ws(),mm=Vs();function Ys(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let s;try{s=pm.sync(e.command,{path:r[mm({env:r})],pathExt:t?Hs.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return s&&(s=Hs.resolve(o?e.options.cwd:"",s)),s}function hm(e){return Ys(e)||Ys(e,!0)}qs.exports=hm});var Js=R((vx,Rn)=>{"use strict";var vn=/([()\][%!^"`<>&|;, *?])/g;function gm(e){return e=e.replace(vn,"^$1"),e}function ym(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(vn,"^$1"),t&&(e=e.replace(vn,"^$1")),e}Rn.exports.command=gm;Rn.exports.argument=ym});var Zs=R((Rx,Xs)=>{"use strict";Xs.exports=/^#!(.*)/});var ea=R((Cx,Qs)=>{"use strict";var Sm=Zs();Qs.exports=(e="")=>{let t=e.match(Sm);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var ra=R((Px,ta)=>{"use strict";var Cn=require("fs"),wm=ea();function bm(e){let r=Buffer.alloc(150),n;try{n=Cn.openSync(e,"r"),Cn.readSync(n,r,0,150,0),Cn.closeSync(n)}catch{}return wm(r.toString())}ta.exports=bm});var sa=R((Mx,ia)=>{"use strict";var xm=require("path"),na=Ks(),oa=Js(),Dm=ra(),Em=process.platform==="win32",Am=/\.(?:com|exe)$/i,Om=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Im(e){e.file=na(e);let t=e.file&&Dm(e.file);return t?(e.args.unshift(e.file),e.command=t,na(e)):e.file}function Tm(e){if(!Em)return e;let t=Im(e),r=!Am.test(t);if(e.options.forceShell||r){let n=Om.test(t);e.command=xm.normalize(e.command),e.command=oa.command(e.command),e.args=e.args.map(i=>oa.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function vm(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:Tm(n)}ia.exports=vm});var la=R((Lx,ca)=>{"use strict";var Pn=process.platform==="win32";function Mn(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Rm(e,t){if(!Pn)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=aa(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function aa(e,t){return Pn&&e===1&&!t.file?Mn(t.original,"spawn"):null}function Cm(e,t){return Pn&&e===1&&!t.file?Mn(t.original,"spawnSync"):null}ca.exports={hookChildProcess:Rm,verifyENOENT:aa,verifyENOENTSync:Cm,notFoundError:Mn}});var da=R((Bx,Me)=>{"use strict";var ua=require("child_process"),Ln=sa(),Bn=la();function fa(e,t,r){let n=Ln(e,t,r),o=ua.spawn(n.command,n.args,n.options);return Bn.hookChildProcess(o,n),o}function Pm(e,t,r){let n=Ln(e,t,r),o=ua.spawnSync(n.command,n.args,n.options);return o.error=o.error||Bn.verifyENOENTSync(o.status,n),o}Me.exports=fa;Me.exports.spawn=fa;Me.exports.sync=Pm;Me.exports._parse=Ln;Me.exports._enoent=Bn});function jt(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}var pa=l(()=>{});var ma=l(()=>{});function kt(e){return e instanceof URL?(0,ga.fileURLToPath)(e):e}function ya(e){return{*[Symbol.iterator](){let t=Fn.default.resolve(kt(e)),r;for(;r!==t;)yield t,r=t,t=Fn.default.resolve(t,"..")}}}var ha,$n,Fn,ga,Ux,_x,Sa=l(()=>{ha=require("node:util"),$n=require("node:child_process"),Fn=O(require("node:path"),1),ga=require("node:url");ma();Ux=(0,ha.promisify)($n.execFile);_x=10*1024*1024});var Qe,oe,Mm,Lm,Bm,wa,ba=l(()=>{Qe=O(require("node:process"),1),oe=O(require("node:path"),1);pa();Sa();Mm=({cwd:e=Qe.default.cwd(),path:t=Qe.default.env[jt()],preferLocal:r=!0,execPath:n=Qe.default.execPath,addExecPath:o=!0}={})=>{let i=oe.default.resolve(kt(e)),s=[],a=t.split(oe.default.delimiter);return r&&Lm(s,a,i),o&&Bm(s,a,n,i),t===""||t===oe.default.delimiter?`${s.join(oe.default.delimiter)}${t}`:[...s,t].join(oe.default.delimiter)},Lm=(e,t,r)=>{for(let n of ya(r)){let o=oe.default.join(n,"node_modules/.bin");t.includes(o)||e.push(o)}},Bm=(e,t,r,n)=>{let o=oe.default.resolve(n,kt(r),"..");t.includes(o)||e.push(o)},wa=({env:e=Qe.default.env,...t}={})=>{e={...e};let r=jt({env:e});return t.path=e[r],e[r]=Mm(t),e}});var xa,U,Da,Ea,Aa,Gt,et,tt,pe=l(()=>{xa=(e,t,r)=>{let n=r?tt:et,o=e instanceof U?{}:{cause:e};return new n(t,o)},U=class extends Error{},Da=(e,t)=>{Object.defineProperty(e.prototype,"name",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Aa,{value:!0,writable:!1,enumerable:!1,configurable:!1})},Ea=e=>Gt(e)&&Aa in e,Aa=Symbol("isExecaError"),Gt=e=>Object.prototype.toString.call(e)==="[object Error]",et=class extends Error{};Da(et,et.name);tt=class extends Error{};Da(tt,tt.name)});var Oa,Fm,Ia,Ta,va=l(()=>{Oa=()=>{let e=Ta-Ia+1;return Array.from({length:e},Fm)},Fm=(e,t)=>({name:`SIGRT${t+1}`,number:Ia+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Ia=34,Ta=64});var Ra,Ca=l(()=>{Ra=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]});var Pa,Un,$m,Ma=l(()=>{Pa=require("node:os");Ca();va();Un=()=>{let e=Oa();return[...Ra,...e].map($m)},$m=({name:e,number:t,description:r,action:n,forced:o=!1,standard:i})=>{let{signals:{[e]:s}}=Pa.constants,a=s!==void 0;return{name:e,number:a?s:t,description:r,supported:a,action:n,forced:o,standard:i}}});var La,Um,_m,Ba,Nm,jm,km,Xx,Fa=l(()=>{La=require("node:os");Ma();Um=()=>{let e=Un();return Object.fromEntries(e.map(_m))},_m=({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s})=>[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:s}],Ba=Um(),Nm=()=>{let e=Un(),t=65,r=Array.from({length:t},(n,o)=>jm(o,e));return Object.assign({},...r)},jm=(e,t)=>{let r=km(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},km=(e,t)=>{let r=t.find(({name:n})=>La.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},Xx=Nm()});var Le,Ua,_a,Na,Gm,Wm,$a,zm,_n,Vm,Hm,Wt,rt=l(()=>{Le=require("node:os");Fa();Ua=e=>{let t="option `killSignal`";if(e===0)throw new TypeError(`Invalid ${t}: 0 cannot be used.`);return Na(e,t)},_a=e=>e===0?e:Na(e,"`subprocess.kill()`'s argument"),Na=(e,t)=>{if(Number.isInteger(e))return Gm(e,t);if(typeof e=="string")return zm(e,t);throw new TypeError(`Invalid ${t} ${String(e)}: it must be a string or an integer.
${_n()}`)},Gm=(e,t)=>{if($a.has(e))return $a.get(e);throw new TypeError(`Invalid ${t} ${e}: this signal integer does not exist.
${_n()}`)},Wm=()=>new Map(Object.entries(Le.constants.signals).reverse().map(([e,t])=>[t,e])),$a=Wm(),zm=(e,t)=>{if(e in Le.constants.signals)return e;throw e.toUpperCase()in Le.constants.signals?new TypeError(`Invalid ${t} '${e}': please rename it to '${e.toUpperCase()}'.`):new TypeError(`Invalid ${t} '${e}': this signal name does not exist.
${_n()}`)},_n=()=>`Available signal names: ${Vm()}.
Available signal numbers: ${Hm()}.`,Vm=()=>Object.keys(Le.constants.signals).sort().map(e=>`'${e}'`).join(", "),Hm=()=>[...new Set(Object.values(Le.constants.signals).sort((e,t)=>e-t))].join(", "),Wt=e=>Ba[e].description});var ja,ka,Ym,Ga,qm,Km,Jm,Nn,zt=l(()=>{ja=require("node:timers/promises");pe();rt();ka=e=>{if(e===!1)return e;if(e===!0)return Ym;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterDelay\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Ym=1e3*5,Ga=({kill:e,options:{forceKillAfterDelay:t,killSignal:r},onInternalError:n,context:o,controller:i},s,a)=>{let{signal:c,error:f}=qm(s,a,r);Km(f,n);let u=e(c);return Jm({kill:e,signal:c,forceKillAfterDelay:t,killSignal:r,killResult:u,context:o,controller:i}),u},qm=(e,t,r)=>{let[n=r,o]=Gt(e)?[void 0,e]:[e,t];if(typeof n!="string"&&!Number.isInteger(n))throw new TypeError(`The first argument must be an error instance or a signal name string/integer: ${String(n)}`);if(o!==void 0&&!Gt(o))throw new TypeError(`The second argument is optional. If specified, it must be an error instance: ${o}`);return{signal:_a(n),error:o}},Km=(e,t)=>{e!==void 0&&t.reject(e)},Jm=async({kill:e,signal:t,forceKillAfterDelay:r,killSignal:n,killResult:o,context:i,controller:s})=>{t===n&&o&&Nn({kill:e,forceKillAfterDelay:r,context:i,controllerSignal:s.signal})},Nn=async({kill:e,forceKillAfterDelay:t,context:r,controllerSignal:n})=>{if(t!==!1)try{await(0,ja.setTimeout)(t,void 0,{signal:n}),e("SIGKILL")&&(r.isForcefullyTerminated??=!0)}catch{}}});var Wa,Vt,jn=l(()=>{Wa=require("node:events"),Vt=async(e,t)=>{e.aborted||await(0,Wa.once)(e,"abort",{signal:t})}});var za,Va,Xm,kn=l(()=>{jn();za=({cancelSignal:e})=>{if(e!==void 0&&Object.prototype.toString.call(e)!=="[object AbortSignal]")throw new Error(`The \`cancelSignal\` option must be an AbortSignal: ${String(e)}`)},Va=({subprocess:e,cancelSignal:t,gracefulCancel:r,context:n,controller:o})=>t===void 0||r?[]:[Xm(e,t,n,o)],Xm=async(e,t,r,{signal:n})=>{throw await Vt(t,n),r.terminationReason??="cancel",e.kill(),t.reason}});var Be,Zm,Gn,Ha,Ya,Ht,qa,Ka,Ja,Xa,Za,Qa,Qm,eh,th,_,rh,ie,Fe,$e=l(()=>{Be=({methodName:e,isSubprocess:t,ipc:r,isConnected:n})=>{Zm(e,t,r),Gn(e,t,n)},Zm=(e,t,r)=>{if(!r)throw new Error(`${_(e,t)} can only be used if the \`ipc\` option is \`true\`.`)},Gn=(e,t,r)=>{if(!r)throw new Error(`${_(e,t)} cannot be used: the ${ie(t)} has already exited or disconnected.`)},Ha=e=>{throw new Error(`${_("getOneMessage",e)} could not complete: the ${ie(e)} exited or disconnected.`)},Ya=e=>{throw new Error(`${_("sendMessage",e)} failed: the ${ie(e)} is sending a message too, instead of listening to incoming messages.
This can be fixed by both sending a message and listening to incoming messages at the same time:

const [receivedMessage] = await Promise.all([
	${_("getOneMessage",e)},
	${_("sendMessage",e,"message, {strict: true}")},
]);`)},Ht=(e,t)=>new Error(`${_("sendMessage",t)} failed when sending an acknowledgment response to the ${ie(t)}.`,{cause:e}),qa=e=>{throw new Error(`${_("sendMessage",e)} failed: the ${ie(e)} is not listening to incoming messages.`)},Ka=e=>{throw new Error(`${_("sendMessage",e)} failed: the ${ie(e)} exited without listening to incoming messages.`)},Ja=()=>new Error(`\`cancelSignal\` aborted: the ${ie(!0)} disconnected.`),Xa=()=>{throw new Error("`getCancelSignal()` cannot be used without setting the `cancelSignal` subprocess option.")},Za=({error:e,methodName:t,isSubprocess:r})=>{if(e.code==="EPIPE")throw new Error(`${_(t,r)} cannot be used: the ${ie(r)} is disconnecting.`,{cause:e})},Qa=({error:e,methodName:t,isSubprocess:r,message:n})=>{if(Qm(e))throw new Error(`${_(t,r)}'s argument type is invalid: the message cannot be serialized: ${String(n)}.`,{cause:e})},Qm=({code:e,message:t})=>eh.has(e)||th.some(r=>t.includes(r)),eh=new Set(["ERR_MISSING_ARGS","ERR_INVALID_ARG_TYPE"]),th=["could not be cloned","circular structure","call stack size exceeded"],_=(e,t,r="")=>e==="cancelSignal"?"`cancelSignal`'s `controller.abort()`":`${rh(t)}${e}(${r})`,rh=e=>e?"":"subprocess.",ie=e=>e?"parent process":"subprocess",Fe=e=>{e.connected&&e.disconnect()}});var k,Ue=l(()=>{k=()=>{let e={},t=new Promise((r,n)=>{Object.assign(e,{resolve:r,reject:n})});return Object.assign(t,e)}});var qt,_e,G,ec,nh,oh,tc,ih,rc,nt,Yt,se=l(()=>{Z();qt=(e,t="stdin")=>{let{options:n,fileDescriptors:o}=G.get(e),i=ec(o,t,!0),s=e.stdio[i];if(s===null)throw new TypeError(tc(i,t,n,!0));return s},_e=(e,t="stdout")=>{let{options:n,fileDescriptors:o}=G.get(e),i=ec(o,t,!1),s=i==="all"?e.all:e.stdio[i];if(s==null)throw new TypeError(tc(i,t,n,!1));return s},G=new WeakMap,ec=(e,t,r)=>{let n=nh(t,r);return oh(n,t,r,e),n},nh=(e,t)=>{let r=yn(e);if(r!==void 0)return r;let{validOptions:n,defaultValue:o}=t?{validOptions:'"stdin"',defaultValue:"stdin"}:{validOptions:'"stdout", "stderr", "all"',defaultValue:"stdout"};throw new TypeError(`"${nt(t)}" must not be "${e}".
It must be ${n} or "fd3", "fd4" (and so on).
It is optional and defaults to "${o}".`)},oh=(e,t,r,n)=>{let o=n[rc(e)];if(o===void 0)throw new TypeError(`"${nt(r)}" must not be ${t}. That file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);if(o.direction==="input"&&!r)throw new TypeError(`"${nt(r)}" must not be ${t}. It must be a readable stream, not writable.`);if(o.direction!=="input"&&r)throw new TypeError(`"${nt(r)}" must not be ${t}. It must be a writable stream, not readable.`)},tc=(e,t,r,n)=>{if(e==="all"&&!r.all)return`The "all" option must be true to use "from: 'all'".`;let{optionName:o,optionValue:i}=ih(e,r);return`The "${o}: ${Yt(i)}" option is incompatible with using "${nt(n)}: ${Yt(t)}".
Please set this option with "pipe" instead.`},ih=(e,{stdin:t,stdout:r,stderr:n,stdio:o})=>{let i=rc(e);return i===0&&t!==void 0?{optionName:"stdin",optionValue:t}:i===1&&r!==void 0?{optionName:"stdout",optionValue:r}:i===2&&n!==void 0?{optionName:"stderr",optionValue:n}:{optionName:`stdio[${i}]`,optionValue:o[i]}},rc=e=>e==="all"?1:e,nt=e=>e?"to":"from",Yt=e=>typeof e=="string"?`'${e}'`:typeof e=="number"?`${e}`:"Stream"});var nc,me,Kt=l(()=>{nc=require("node:events"),me=(e,t,r)=>{let n=e.getMaxListeners();n===0||n===Number.POSITIVE_INFINITY||(e.setMaxListeners(n+t),(0,nc.addAbortListener)(r,()=>{e.setMaxListeners(e.getMaxListeners()-t)}))}});var Jt,Wn,Xt,zn,oc,ic,ot=l(()=>{Jt=(e,t)=>{t&&Wn(e)},Wn=e=>{e.refCounted()},Xt=(e,t)=>{t&&zn(e)},zn=e=>{e.unrefCounted()},oc=(e,t)=>{t&&(zn(e),zn(e))},ic=(e,t)=>{t&&(Wn(e),Wn(e))}});var sc,ac,cc,lc,Zt,uc=l(()=>{sc=require("node:events"),ac=require("node:timers/promises");er();ot();Qt();tr();cc=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n},o)=>{if(dc(o)||mc(o))return;Zt.has(e)||Zt.set(e,[]);let i=Zt.get(e);if(i.push(o),!(i.length>1))for(;i.length>0;){await pc(e,n,o),await ac.scheduler.yield();let s=await fc({wrappedMessage:i[0],anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n});i.shift(),n.emit("message",s),n.emit("message:done")}},lc=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n,boundOnMessage:o})=>{Vn();let i=Zt.get(e);for(;i?.length>0;)await(0,sc.once)(n,"message:done");e.removeListener("message",o),ic(t,r),n.connected=!1,n.emit("disconnect")},Zt=new WeakMap});var hc,ae,rr,sh,nr,it=l(()=>{hc=require("node:events");uc();ot();ae=(e,t,r)=>{if(rr.has(e))return rr.get(e);let n=new hc.EventEmitter;return n.connected=!0,rr.set(e,n),sh({ipcEmitter:n,anyProcess:e,channel:t,isSubprocess:r}),n},rr=new WeakMap,sh=({ipcEmitter:e,anyProcess:t,channel:r,isSubprocess:n})=>{let o=cc.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e});t.on("message",o),t.once("disconnect",lc.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e,boundOnMessage:o})),oc(r,n)},nr=e=>{let t=rr.get(e);return t===void 0?e.channel!==null:t.connected}});var gc,yc,ah,Sc,fc,dc,wc,or,ch,ir,bc,Qt=l(()=>{gc=require("node:events");Ue();Kt();cr();$e();it();er();yc=({anyProcess:e,channel:t,isSubprocess:r,message:n,strict:o})=>{if(!o)return n;let i=ae(e,t,r),s=sr(e,i);return{id:ah++,type:ir,message:n,hasListeners:s}},ah=0n,Sc=(e,t)=>{if(!(t?.type!==ir||t.hasListeners))for(let{id:r}of e)r!==void 0&&or[r].resolve({isDeadlock:!0,hasListeners:!1})},fc=async({wrappedMessage:e,anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:o})=>{if(e?.type!==ir||!t.connected)return e;let{id:i,message:s}=e,a={id:i,type:bc,message:sr(t,o)};try{await ar({anyProcess:t,channel:r,isSubprocess:n,ipc:!0},a)}catch(c){o.emit("strict:error",c)}return s},dc=e=>{if(e?.type!==bc)return!1;let{id:t,message:r}=e;return or[t]?.resolve({isDeadlock:!1,hasListeners:r}),!0},wc=async(e,t,r)=>{if(e?.type!==ir)return;let n=k();or[e.id]=n;let o=new AbortController;try{let{isDeadlock:i,hasListeners:s}=await Promise.race([n,ch(t,r,o)]);i&&Ya(r),s||qa(r)}finally{o.abort(),delete or[e.id]}},or={},ch=async(e,t,{signal:r})=>{me(e,1,r),await(0,gc.once)(e,"disconnect",{signal:r}),Ka(t)},ir="execa:ipc:request",bc="execa:ipc:response"});var xc,Dc,pc,st,sr,lh,er=l(()=>{Ue();Z();se();Qt();xc=(e,t,r)=>{st.has(e)||st.set(e,new Set);let n=st.get(e),o=k(),i=r?t.id:void 0,s={onMessageSent:o,id:i};return n.add(s),{outgoingMessages:n,outgoingMessage:s}},Dc=({outgoingMessages:e,outgoingMessage:t})=>{e.delete(t),t.onMessageSent.resolve()},pc=async(e,t,r)=>{for(;!sr(e,t)&&st.get(e)?.size>0;){let n=[...st.get(e)];Sc(n,r),await Promise.all(n.map(({onMessageSent:o})=>o))}},st=new WeakMap,sr=(e,t)=>t.listenerCount("message")>lh(e),lh=e=>G.has(e)&&!X(G.get(e).options.buffer,"ipc")?1:0});var Ec,ar,uh,Yn,fh,Hn,cr=l(()=>{Ec=require("node:util");$e();er();Qt();ar=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},o,{strict:i=!1}={})=>{let s="sendMessage";return Be({methodName:s,isSubprocess:r,ipc:n,isConnected:e.connected}),uh({anyProcess:e,channel:t,methodName:s,isSubprocess:r,message:o,strict:i})},uh=async({anyProcess:e,channel:t,methodName:r,isSubprocess:n,message:o,strict:i})=>{let s=yc({anyProcess:e,channel:t,isSubprocess:n,message:o,strict:i}),a=xc(e,s,i);try{await Yn({anyProcess:e,methodName:r,isSubprocess:n,wrappedMessage:s,message:o})}catch(c){throw Fe(e),c}finally{Dc(a)}},Yn=async({anyProcess:e,methodName:t,isSubprocess:r,wrappedMessage:n,message:o})=>{let i=fh(e);try{await Promise.all([wc(n,e,r),i(n)])}catch(s){throw Za({error:s,methodName:t,isSubprocess:r}),Qa({error:s,methodName:t,isSubprocess:r,message:o}),s}},fh=e=>{if(Hn.has(e))return Hn.get(e);let t=(0,Ec.promisify)(e.send.bind(e));return Hn.set(e,t),t},Hn=new WeakMap});var Oc,Ic,Tc,dh,Ac,mc,vc,Vn,qn,tr=l(()=>{Oc=require("node:timers/promises");cr();it();$e();Ic=(e,t)=>{let r="cancelSignal";return Gn(r,!1,e.connected),Yn({anyProcess:e,methodName:r,isSubprocess:!1,wrappedMessage:{type:vc,message:t},message:t})},Tc=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>(await dh({anyProcess:e,channel:t,isSubprocess:r,ipc:n}),qn.signal),dh=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>{if(!Ac){if(Ac=!0,!n){Xa();return}if(t===null){Vn();return}ae(e,t,r),await Oc.scheduler.yield()}},Ac=!1,mc=e=>e?.type!==vc?!1:(qn.abort(e.message),!0),vc="execa:ipc:cancel",Vn=()=>{qn.abort(Ja())},qn=new AbortController});var Rc,Cc,ph,mh,Kn=l(()=>{jn();tr();zt();Rc=({gracefulCancel:e,cancelSignal:t,ipc:r,serialization:n})=>{if(e){if(t===void 0)throw new Error("The `cancelSignal` option must be defined when setting the `gracefulCancel` option.");if(!r)throw new Error("The `ipc` option cannot be false when setting the `gracefulCancel` option.");if(n==="json")throw new Error("The `serialization` option cannot be 'json' when setting the `gracefulCancel` option.")}},Cc=({subprocess:e,cancelSignal:t,gracefulCancel:r,forceKillAfterDelay:n,context:o,controller:i})=>r?[ph({subprocess:e,cancelSignal:t,forceKillAfterDelay:n,context:o,controller:i})]:[],ph=async({subprocess:e,cancelSignal:t,forceKillAfterDelay:r,context:n,controller:{signal:o}})=>{await Vt(t,o);let i=mh(t);throw await Ic(e,i),Nn({kill:e.kill,forceKillAfterDelay:r,context:n,controllerSignal:o}),n.terminationReason??="gracefulCancel",t.reason},mh=({reason:e})=>{if(!(e instanceof DOMException))return e;let t=new Error(e.message);return Object.defineProperty(t,"stack",{value:e.stack,enumerable:!1,configurable:!0,writable:!0}),t}});var Pc,Mc,Lc,hh,Jn=l(()=>{Pc=require("node:timers/promises");pe();Mc=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Lc=(e,t,r,n)=>t===0||t===void 0?[]:[hh(e,t,r,n)],hh=async(e,t,r,{signal:n})=>{throw await(0,Pc.setTimeout)(t,void 0,{signal:n}),r.terminationReason??="timeout",e.kill(),new U}});var lr,Xn,Bc,Fc,Zn=l(()=>{lr=require("node:process"),Xn=O(require("node:path"),1);Te();Bc=({options:e})=>{if(e.node===!1)throw new TypeError('The "node" option cannot be false with `execaNode()`.');return{options:{...e,node:!0}}},Fc=(e,t,{node:r=!1,nodePath:n=lr.execPath,nodeOptions:o=lr.execArgv.filter(c=>!c.startsWith("--inspect")),cwd:i,execPath:s,...a})=>{if(s!==void 0)throw new TypeError('The "execPath" option has been removed. Please use the "nodePath" option instead.');let c=Ie(n,'The "nodePath" option'),f=Xn.default.resolve(i,c),u={...a,nodePath:f,node:r,cwd:i};if(!r)return[e,t,u];if(Xn.default.basename(e,".exe")==="node")throw new TypeError('When the "node" option is true, the first argument does not need to be "node".');return[f,[...o,e,...t],{ipc:!0,...u,shell:!1}]}});var $c,Uc,gh,yh,Sh,_c,Qn=l(()=>{$c=require("node:v8"),Uc=({ipcInput:e,ipc:t,serialization:r})=>{if(e!==void 0){if(!t)throw new Error("The `ipcInput` option cannot be set unless the `ipc` option is `true`.");Sh[r](e)}},gh=e=>{try{(0,$c.serialize)(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with a structured clone.",{cause:t})}},yh=e=>{try{JSON.stringify(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with JSON.",{cause:t})}},Sh={advanced:gh,json:yh},_c=async(e,t)=>{t!==void 0&&await e.sendMessage(t)}});var jc,wh,P,eo,bh,Nc,ur,he=l(()=>{jc=({encoding:e})=>{if(eo.has(e))return;let t=bh(e);if(t!==void 0)throw new TypeError(`Invalid option \`encoding: ${ur(e)}\`.
Please rename it to ${ur(t)}.`);let r=[...eo].map(n=>ur(n)).join(", ");throw new TypeError(`Invalid option \`encoding: ${ur(e)}\`.
Please rename it to one of: ${r}.`)},wh=new Set(["utf8","utf16le"]),P=new Set(["buffer","hex","base64","base64url","latin1","ascii"]),eo=new Set([...wh,...P]),bh=e=>{if(e===null)return"buffer";if(typeof e!="string")return;let t=e.toLowerCase();if(t in Nc)return Nc[t];if(eo.has(t))return t},Nc={"utf-8":"utf8","utf-16le":"utf16le","ucs-2":"utf16le",ucs2:"utf16le",binary:"latin1"},ur=e=>typeof e=="string"?`"${e}"`:String(e)});var kc,Gc,Wc,zc,Vc,Hc,to=l(()=>{kc=require("node:fs"),Gc=O(require("node:path"),1),Wc=O(require("node:process"),1);Te();zc=(e=Vc())=>{let t=Ie(e,'The "cwd" option');return Gc.default.resolve(t)},Vc=()=>{try{return Wc.default.cwd()}catch(e){throw e.message=`The current directory does not exist.
${e.message}`,e}},Hc=(e,t)=>{if(t===Vc())return e;let r;try{r=(0,kc.statSync)(t)}catch(n){return`The "cwd" option is invalid: ${t}.
${n.message}
${e}`}return r.isDirectory()?e:`The "cwd" option is not a directory: ${t}.
${e}`}});var Yc,ro,qc,fr,xh,Dh,no=l(()=>{Yc=O(require("node:path"),1),ro=O(require("node:process"),1),qc=O(da(),1);ba();zt();rt();kn();Kn();Jn();Zn();Qn();he();to();Te();Z();fr=(e,t,r)=>{r.cwd=zc(r.cwd);let[n,o,i]=Fc(e,t,r),{command:s,args:a,options:c}=qc.default._parse(n,o,i),f=Qi(c),u=xh(f);return Mc(u),jc(u),Uc(u),za(u),Rc(u),u.shell=pn(u.shell),u.env=Dh(u),u.killSignal=Ua(u.killSignal),u.forceKillAfterDelay=ka(u.forceKillAfterDelay),u.lines=u.lines.map((d,p)=>d&&!P.has(u.encoding)&&u.buffer[p]),ro.default.platform==="win32"&&Yc.default.basename(s,".exe")==="cmd"&&a.unshift("/q"),{file:s,commandArguments:a,options:u}},xh=({extendEnv:e=!0,preferLocal:t=!1,cwd:r,localDir:n=r,encoding:o="utf8",reject:i=!0,cleanup:s=!0,all:a=!1,windowsHide:c=!0,killSignal:f="SIGTERM",forceKillAfterDelay:u=!0,gracefulCancel:d=!1,ipcInput:p,ipc:m=p!==void 0||d,serialization:h="advanced",...y})=>({...y,extendEnv:e,preferLocal:t,cwd:r,localDirectory:n,encoding:o,reject:i,cleanup:s,all:a,windowsHide:c,killSignal:f,forceKillAfterDelay:u,gracefulCancel:d,ipcInput:p,ipc:m,serialization:h}),Dh=({env:e,extendEnv:t,preferLocal:r,node:n,localDirectory:o,nodePath:i})=>{let s=t?{...ro.default.env,...e}:e;return r||n?wa({env:s,cwd:o,execPath:i,preferLocal:r,addExecPath:n}):s}});var dr,oo=l(()=>{dr=(e,t,r)=>r.shell&&t.length>0?[[e,...t].join(" "),[],r]:[e,t,r]});function Ne(e){if(typeof e=="string")return Eh(e);if(!(ArrayBuffer.isView(e)&&e.BYTES_PER_ELEMENT===1))throw new Error("Input must be a string or a Uint8Array");return Ah(e)}var Eh,Ah,Kc,Oh,Jc,Ih,io=l(()=>{Eh=e=>e.at(-1)===Kc?e.slice(0,e.at(-2)===Jc?-2:-1):e,Ah=e=>e.at(-1)===Oh?e.subarray(0,e.at(-2)===Ih?-2:-1):e,Kc=`
`,Oh=Kc.codePointAt(0),Jc="\r",Ih=Jc.codePointAt(0)});function N(e,{checkOpen:t=!0}={}){return e!==null&&typeof e=="object"&&(e.writable||e.readable||!t||e.writable===void 0&&e.readable===void 0)&&typeof e.pipe=="function"}function so(e,{checkOpen:t=!0}={}){return N(e,{checkOpen:t})&&(e.writable||!t)&&typeof e.write=="function"&&typeof e.end=="function"&&typeof e.writable=="boolean"&&typeof e.writableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function ge(e,{checkOpen:t=!0}={}){return N(e,{checkOpen:t})&&(e.readable||!t)&&typeof e.read=="function"&&typeof e.readable=="boolean"&&typeof e.readableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function ao(e,t){return so(e,t)&&ge(e,t)}var ye=l(()=>{});function Xc(){return this[lo].next()}function Zc(e){return this[lo].return(e)}function uo({preventCancel:e=!1}={}){let t=this.getReader(),r=new co(t,e),n=Object.create(vh);return n[lo]=r,n}var Th,co,lo,vh,Qc=l(()=>{Th=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),co=class{#t;#r;#e=!1;#n=void 0;constructor(t,r){this.#t=t,this.#r=r}next(){let t=()=>this.#i();return this.#n=this.#n?this.#n.then(t,t):t(),this.#n}return(t){let r=()=>this.#o(t);return this.#n?this.#n.then(r,r):r()}async#i(){if(this.#e)return{done:!0,value:void 0};let t;try{t=await this.#t.read()}catch(r){throw this.#n=void 0,this.#e=!0,this.#t.releaseLock(),r}return t.done&&(this.#n=void 0,this.#e=!0,this.#t.releaseLock()),t}async#o(t){if(this.#e)return{done:!0,value:t};if(this.#e=!0,!this.#r){let r=this.#t.cancel(t);return this.#t.releaseLock(),await r,{done:!0,value:t}}return this.#t.releaseLock(),{done:!0,value:t}}},lo=Symbol();Object.defineProperty(Xc,"name",{value:"next"});Object.defineProperty(Zc,"name",{value:"return"});vh=Object.create(Th,{next:{enumerable:!0,configurable:!0,writable:!0,value:Xc},return:{enumerable:!0,configurable:!0,writable:!0,value:Zc}})});var el=l(()=>{});var tl=l(()=>{Qc();el()});var rl,Rh,Ch,Ph,at,fo=l(()=>{ye();tl();rl=e=>{if(ge(e,{checkOpen:!1})&&at.on!==void 0)return Ch(e);if(typeof e?.[Symbol.asyncIterator]=="function")return e;if(Rh.call(e)==="[object ReadableStream]")return uo.call(e);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:Rh}=Object.prototype,Ch=async function*(e){let t=new AbortController,r={};Ph(e,t,r);try{for await(let[n]of at.on(e,"data",{signal:t.signal}))yield n}catch(n){if(r.error!==void 0)throw r.error;if(!t.signal.aborted)throw n}finally{e.destroy()}},Ph=async(e,t,r)=>{try{await at.finished(e,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(n){r.error=n}finally{t.abort()}},at={}});var je,Mh,il,nl,Lh,ol,W,ct=l(()=>{fo();je=async(e,{init:t,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{let f=rl(e),u=t();u.length=0;try{for await(let d of f){let p=Lh(d),m=r[p](d,u);il({convertedChunk:m,state:u,getSize:n,truncateChunk:o,addChunk:i,maxBuffer:c})}return Mh({state:u,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:s,maxBuffer:c}),a(u)}catch(d){let p=typeof d=="object"&&d!==null?d:new Error(d);throw p.bufferedData=a(u),p}},Mh=({state:e,getSize:t,truncateChunk:r,addChunk:n,getFinalChunk:o,maxBuffer:i})=>{let s=o(e);s!==void 0&&il({convertedChunk:s,state:e,getSize:t,truncateChunk:r,addChunk:n,maxBuffer:i})},il=({convertedChunk:e,state:t,getSize:r,truncateChunk:n,addChunk:o,maxBuffer:i})=>{let s=r(e),a=t.length+s;if(a<=i){nl(e,t,o,a);return}let c=n(e,i-t.length);throw c!==void 0&&nl(c,t,o,i),new W},nl=(e,t,r,n)=>{t.contents=r(e,t,n),t.length=n},Lh=e=>{let t=typeof e;if(t==="string")return"string";if(t!=="object"||e===null)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=ol.call(e);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&ol.call(e.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:ol}=Object.prototype,W=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}}});var Q,lt,pr,mr,hr,gr=l(()=>{Q=e=>e,lt=()=>{},pr=({contents:e})=>e,mr=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},hr=e=>e.length});async function yr(e,t){return je(e,Uh,t)}var Bh,Fh,$h,Uh,sl=l(()=>{ct();gr();Bh=()=>({contents:[]}),Fh=()=>1,$h=(e,{contents:t})=>(t.push(e),t),Uh={init:Bh,convertChunk:{string:Q,buffer:Q,arrayBuffer:Q,dataView:Q,typedArray:Q,others:Q},getSize:Fh,truncateChunk:lt,addChunk:$h,getFinalChunk:lt,finalize:pr}});async function Sr(e,t){return je(e,Hh,t)}var _h,Nh,jh,al,cl,kh,Gh,Wh,zh,ul,ll,Vh,fl,Hh,dl=l(()=>{ct();gr();_h=()=>({contents:new ArrayBuffer(0)}),Nh=e=>jh.encode(e),jh=new TextEncoder,al=e=>new Uint8Array(e),cl=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),kh=(e,t)=>e.slice(0,t),Gh=(e,{contents:t,length:r},n)=>{let o=fl()?zh(t,n):Wh(t,n);return new Uint8Array(o).set(e,r),o},Wh=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(ul(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},zh=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:ul(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},ul=e=>ll**Math.ceil(Math.log(e)/Math.log(ll)),ll=2,Vh=({contents:e,length:t})=>fl()?e:e.slice(0,t),fl=()=>"resize"in ArrayBuffer.prototype,Hh={init:_h,convertChunk:{string:Nh,buffer:al,arrayBuffer:al,dataView:cl,typedArray:cl,others:mr},getSize:hr,truncateChunk:kh,addChunk:Gh,getFinalChunk:lt,finalize:Vh}});async function br(e,t){return je(e,Xh,t)}var Yh,wr,qh,Kh,Jh,Xh,pl=l(()=>{ct();gr();Yh=()=>({contents:"",textDecoder:new TextDecoder}),wr=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),qh=(e,{contents:t})=>t+e,Kh=(e,t)=>e.slice(0,t),Jh=({textDecoder:e})=>{let t=e.decode();return t===""?void 0:t},Xh={init:Yh,convertChunk:{string:Q,buffer:wr,arrayBuffer:wr,dataView:wr,typedArray:wr,others:mr},getSize:hr,truncateChunk:Kh,addChunk:qh,getFinalChunk:Jh,finalize:pr}});var ml=l(()=>{sl();dl();pl();ct()});var hl,gl,xr=l(()=>{hl=require("node:events"),gl=require("node:stream/promises");fo();ml();Object.assign(at,{on:hl.on,finished:gl.finished})});var yl,Zh,Sl,wl,Qh,bl,xl,Dr,Se=l(()=>{xr();J();Z();yl=({error:e,stream:t,readableObjectMode:r,lines:n,encoding:o,fdNumber:i})=>{if(!(e instanceof W))throw e;if(i==="all")return e;let s=Zh(r,n,o);throw e.maxBufferInfo={fdNumber:i,unit:s},t.destroy(),e},Zh=(e,t,r)=>e?"objects":t?"lines":r==="buffer"?"bytes":"characters",Sl=(e,t,r)=>{if(t.length!==r)return;let n=new W;throw n.maxBufferInfo={fdNumber:"ipc"},n},wl=(e,t)=>{let{streamName:r,threshold:n,unit:o}=Qh(e,t);return`Command's ${r} was larger than ${n} ${o}`},Qh=(e,t)=>{if(e?.maxBufferInfo===void 0)return{streamName:"output",threshold:t[1],unit:"bytes"};let{maxBufferInfo:{fdNumber:r,unit:n}}=e;delete e.maxBufferInfo;let o=X(t,r);return r==="ipc"?{streamName:"IPC output",threshold:o,unit:"messages"}:{streamName:vt(r),threshold:o,unit:n}},bl=(e,t,r)=>e?.code==="ENOBUFS"&&t!==null&&t.some(n=>n!==null&&n.length>Dr(r)),xl=(e,t,r)=>{if(!t)return e;let n=Dr(r);return e.length>n?e.slice(0,n):e},Dr=([,e])=>e});var El,Al,eg,tg,rg,ng,og,Dl,Ol=l(()=>{El=require("node:util");io();C();to();Pt();Se();rt();pe();Al=({stdio:e,all:t,ipcOutput:r,originalError:n,signal:o,signalDescription:i,exitCode:s,escapedCommand:a,timedOut:c,isCanceled:f,isGracefullyCanceled:u,isMaxBuffer:d,isForcefullyTerminated:p,forceKillAfterDelay:m,killSignal:h,maxBuffer:y,timeout:b,cwd:S})=>{let E=n?.code,T=eg({originalError:n,timedOut:c,timeout:b,isMaxBuffer:d,maxBuffer:y,errorCode:E,signal:o,signalDescription:i,exitCode:s,isCanceled:f,isGracefullyCanceled:u,isForcefullyTerminated:p,forceKillAfterDelay:m,killSignal:h}),L=rg(n,S),Y=L===void 0?"":`
${L}`,te=`${T}: ${a}${Y}`,de=t===void 0?[e[2],e[1]]:[t],Oe=[te,...de,...e.slice(3),r.map(re=>ng(re)).join(`
`)].map(re=>Ze(Ne(og(re)))).filter(Boolean).join(`

`);return{originalMessage:L,shortMessage:te,message:Oe}},eg=({originalError:e,timedOut:t,timeout:r,isMaxBuffer:n,maxBuffer:o,errorCode:i,signal:s,signalDescription:a,exitCode:c,isCanceled:f,isGracefullyCanceled:u,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:m})=>{let h=tg(d,p);return t?`Command timed out after ${r} milliseconds${h}`:u?s===void 0?`Command was gracefully canceled with exit code ${c}`:d?`Command was gracefully canceled${h}`:`Command was gracefully canceled with ${s} (${a})`:f?`Command was canceled${h}`:n?`${wl(e,o)}${h}`:i!==void 0?`Command failed with ${i}${h}`:d?`Command was killed with ${m} (${Wt(m)})${h}`:s!==void 0?`Command was killed with ${s} (${a})`:c!==void 0?`Command failed with exit code ${c}`:"Command failed"},tg=(e,t)=>e?` and was forcefully terminated after ${t} milliseconds`:"",rg=(e,t)=>{if(e instanceof U)return;let r=Ea(e)?e.originalMessage:String(e?.message??e),n=Ze(Hc(r,t));return n===""?void 0:n},ng=e=>typeof e=="string"?e:(0,El.inspect)(e),og=e=>Array.isArray(e)?e.map(t=>Ne(Dl(t))).filter(Boolean).join(`
`):Dl(e),Dl=e=>typeof e=="string"?e:x(e)?Ot(e):""});var Er,ke,ut,ig,Il,sg,ft=l(()=>{rt();Ut();pe();Ol();Er=({command:e,escapedCommand:t,stdio:r,all:n,ipcOutput:o,options:{cwd:i},startTime:s})=>Il({command:e,escapedCommand:t,cwd:i,durationMs:An(s),failed:!1,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isTerminated:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,exitCode:0,stdout:r[1],stderr:r[2],all:n,stdio:r,ipcOutput:o,pipedFrom:[]}),ke=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:s})=>ut({error:e,command:t,escapedCommand:r,startTime:i,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,stdio:Array.from({length:n.length}),ipcOutput:[],options:o,isSync:s}),ut=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:u,stdio:d,all:p,ipcOutput:m,options:{timeoutDuration:h,timeout:y=h,forceKillAfterDelay:b,killSignal:S,cwd:E,maxBuffer:T},isSync:L})=>{let{exitCode:Y,signal:te,signalDescription:de}=sg(f,u),{originalMessage:Oe,shortMessage:re,message:un}=Al({stdio:d,all:p,ipcOutput:m,originalError:e,signal:te,signalDescription:de,exitCode:Y,escapedCommand:r,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,forceKillAfterDelay:b,killSignal:S,maxBuffer:T,timeout:y,cwd:E}),Je=xa(e,un,L);return Object.assign(Je,ig({error:Je,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:Y,signal:te,signalDescription:de,stdio:d,all:p,ipcOutput:m,cwd:E,originalMessage:Oe,shortMessage:re})),Je},ig=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:u,signalDescription:d,stdio:p,all:m,ipcOutput:h,cwd:y,originalMessage:b,shortMessage:S})=>Il({shortMessage:S,originalMessage:b,command:t,escapedCommand:r,cwd:y,durationMs:An(n),failed:!0,timedOut:o,isCanceled:i,isGracefullyCanceled:s,isTerminated:u!==void 0,isMaxBuffer:a,isForcefullyTerminated:c,exitCode:f,signal:u,signalDescription:d,code:e.cause?.code,stdout:p[1],stderr:p[2],all:m,stdio:p,ipcOutput:h,pipedFrom:[]}),Il=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),sg=(e,t)=>{let r=e===null?void 0:e,n=t===null?void 0:t,o=n===void 0?void 0:Wt(t);return{exitCode:r,signal:n,signalDescription:o}}});function ag(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(Tl(e*1e3)%1e3),nanoseconds:Math.trunc(Tl(e*1e6)%1e3)}}function cg(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}function po(e){switch(typeof e){case"number":{if(Number.isFinite(e))return ag(e);break}case"bigint":return cg(e)}throw new TypeError("Expected a finite number or bigint")}var Tl,vl=l(()=>{Tl=e=>Number.isFinite(e)?e:0});function mo(e,t){let r=typeof e=="bigint";if(!r&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");t={...t};let n=e<0?"-":"";e=e<0?-e:e,t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.unitCount=1,t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);let o=[],i=(u,d)=>{let p=Math.floor(u*10**d+fg);return(Math.round(p)/10**d).toFixed(d)},s=(u,d,p,m)=>{if(!((o.length===0||!t.colonNotation)&&lg(u)&&!(t.colonNotation&&p==="m"))){if(m??=String(u),t.colonNotation){let h=m.includes(".")?m.split(".")[0].length:m.length,y=o.length>0?2:1;m="0".repeat(Math.max(0,y-h))+m}else m+=t.verbose?" "+ug(d,u):p;o.push(m)}},a=po(e),c=BigInt(a.days);if(t.hideYearAndDays?s(BigInt(c)*24n+BigInt(a.hours),"hour","h"):(t.hideYear?s(c,"day","d"):(s(c/365n,"year","y"),s(c%365n,"day","d")),s(Number(a.hours),"hour","h")),s(Number(a.minutes),"minute","m"),!t.hideSeconds)if(t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3&&!t.subSecondsAsDecimals){let u=Number(a.seconds),d=Number(a.milliseconds),p=Number(a.microseconds),m=Number(a.nanoseconds);if(s(u,"second","s"),t.formatSubMilliseconds)s(d,"millisecond","ms"),s(p,"microsecond","\xB5s"),s(m,"nanosecond","ns");else{let h=d+p/1e3+m/1e6,y=typeof t.millisecondsDecimalDigits=="number"?t.millisecondsDecimalDigits:0,b=h>=1?Math.round(h):Math.ceil(h),S=y?h.toFixed(y):b;s(Number.parseFloat(S),"millisecond","ms",S)}}else{let u=(r?Number(e%dg):e)/1e3%60,d=typeof t.secondsDecimalDigits=="number"?t.secondsDecimalDigits:1,p=i(u,d),m=t.keepDecimalsOnWholeSeconds?p:p.replace(/\.0+$/,"");s(Number.parseFloat(m),"second","s",m)}if(o.length===0)return n+"0"+(t.verbose?" milliseconds":"ms");let f=t.colonNotation?":":" ";return typeof t.unitCount=="number"&&(o=o.slice(0,Math.max(t.unitCount,1))),n+o.join(f)}var lg,ug,fg,dg,Rl=l(()=>{vl();lg=e=>e===0||e===0n,ug=(e,t)=>t===1||t===1n?e:`${e}s`,fg=1e-7,dg=24n*60n*60n*1000n});var Cl,Pl=l(()=>{Ce();Cl=(e,t)=>{e.failed&&j({type:"error",verboseMessage:e.shortMessage,verboseInfo:t,result:e})}});var Ml,pg,Ll=l(()=>{Rl();ne();Ce();Pl();Ml=(e,t)=>{ve(t)&&(Cl(e,t),pg(e,t))},pg=(e,t)=>{let r=`(done in ${mo(e.durationMs)})`;j({type:"duration",verboseMessage:r,verboseInfo:t,result:e})}});var Ge,Ar=l(()=>{Ll();Ge=(e,t,{reject:r})=>{if(Ml(e,t),e.failed&&r)throw e;return e}});var $l,mg,hg,Ul,_l,Bl,gg,ho,Fl,we,Nl,yg,Or,jl,Sg,wg,go,kl,bg,Gl,Ir,xg,yo,Dg,Eg,Wl,F,Tr,So,zl,Vl,ce,v=l(()=>{ye();q();C();$l=(e,t)=>we(e)?"asyncGenerator":Nl(e)?"generator":Or(e)?"fileUrl":Sg(e)?"filePath":xg(e)?"webStream":N(e,{checkOpen:!1})?"native":x(e)?"uint8Array":Dg(e)?"asyncIterable":Eg(e)?"iterable":yo(e)?Ul({transform:e},t):yg(e)?mg(e,t):"native",mg=(e,t)=>ao(e.transform,{checkOpen:!1})?hg(e,t):yo(e.transform)?Ul(e,t):gg(e,t),hg=(e,t)=>(_l(e,t,"Duplex stream"),"duplex"),Ul=(e,t)=>(_l(e,t,"web TransformStream"),"webTransform"),_l=({final:e,binary:t,objectMode:r},n,o)=>{Bl(e,`${n}.final`,o),Bl(t,`${n}.binary`,o),ho(r,`${n}.objectMode`)},Bl=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${t}\` option can only be defined when using a generator, not a ${r}.`)},gg=({transform:e,final:t,binary:r,objectMode:n},o)=>{if(e!==void 0&&!Fl(e))throw new TypeError(`The \`${o}.transform\` option must be a generator, a Duplex stream or a web TransformStream.`);if(ao(t,{checkOpen:!1}))throw new TypeError(`The \`${o}.final\` option must not be a Duplex stream.`);if(yo(t))throw new TypeError(`The \`${o}.final\` option must not be a web TransformStream.`);if(t!==void 0&&!Fl(t))throw new TypeError(`The \`${o}.final\` option must be a generator.`);return ho(r,`${o}.binary`),ho(n,`${o}.objectMode`),we(e)||we(t)?"asyncGenerator":"generator"},ho=(e,t)=>{if(e!==void 0&&typeof e!="boolean")throw new TypeError(`The \`${t}\` option must use a boolean.`)},Fl=e=>we(e)||Nl(e),we=e=>Object.prototype.toString.call(e)==="[object AsyncGeneratorFunction]",Nl=e=>Object.prototype.toString.call(e)==="[object GeneratorFunction]",yg=e=>w(e)&&(e.transform!==void 0||e.final!==void 0),Or=e=>Object.prototype.toString.call(e)==="[object URL]",jl=e=>Or(e)&&e.protocol!=="file:",Sg=e=>w(e)&&Object.keys(e).length>0&&Object.keys(e).every(t=>wg.has(t))&&go(e.file),wg=new Set(["file","append"]),go=e=>typeof e=="string",kl=(e,t)=>e==="native"&&typeof t=="string"&&!bg.has(t),bg=new Set(["ipc","ignore","inherit","overlapped","pipe"]),Gl=e=>Object.prototype.toString.call(e)==="[object ReadableStream]",Ir=e=>Object.prototype.toString.call(e)==="[object WritableStream]",xg=e=>Gl(e)||Ir(e),yo=e=>Gl(e?.readable)&&Ir(e?.writable),Dg=e=>Wl(e)&&typeof e[Symbol.asyncIterator]=="function",Eg=e=>Wl(e)&&typeof e[Symbol.iterator]=="function",Wl=e=>typeof e=="object"&&e!==null,F=new Set(["generator","asyncGenerator","duplex","webTransform"]),Tr=new Set(["fileUrl","filePath","fileNumber"]),So=new Set(["fileUrl","filePath"]),zl=new Set([...So,"webStream","nodeStream"]),Vl=new Set(["webTransform","duplex"]),ce={generator:"a generator",asyncGenerator:"an async generator",fileUrl:"a file URL",filePath:"a file path string",fileNumber:"a file descriptor number",webStream:"a web stream",nodeStream:"a Node.js stream",webTransform:"a web TransformStream",duplex:"a Duplex stream",native:"any value",iterable:"an iterable",asyncIterable:"an async iterable",string:"a string",uint8Array:"a Uint8Array"}});var wo,Ag,Og,Hl,bo=l(()=>{v();wo=(e,t,r,n)=>n==="output"?Ag(e,t,r):Og(e,t,r),Ag=(e,t,r)=>{let n=t!==0&&r[t-1].value.readableObjectMode;return{writableObjectMode:n,readableObjectMode:e??n}},Og=(e,t,r)=>{let n=t===0?e===!0:r[t-1].value.readableObjectMode,o=t!==r.length-1&&(e??n);return{writableObjectMode:n,readableObjectMode:o}},Hl=(e,t)=>{let r=e.findLast(({type:n})=>F.has(n));return r===void 0?!1:t==="input"?r.value.writableObjectMode:r.value.readableObjectMode}});var Yl,Ig,Tg,vg,Rg,Cg,Pg,ql=l(()=>{q();he();v();bo();Yl=(e,t,r,n)=>[...e.filter(({type:o})=>!F.has(o)),...Ig(e,t,r,n)],Ig=(e,t,r,{encoding:n})=>{let o=e.filter(({type:s})=>F.has(s)),i=Array.from({length:o.length});for(let[s,a]of Object.entries(o))i[s]=Tg({stdioItem:a,index:Number(s),newTransforms:i,optionName:t,direction:r,encoding:n});return Pg(i,r)},Tg=({stdioItem:e,stdioItem:{type:t},index:r,newTransforms:n,optionName:o,direction:i,encoding:s})=>t==="duplex"?vg({stdioItem:e,optionName:o}):t==="webTransform"?Rg({stdioItem:e,index:r,newTransforms:n,direction:i}):Cg({stdioItem:e,index:r,newTransforms:n,direction:i,encoding:s}),vg=({stdioItem:e,stdioItem:{value:{transform:t,transform:{writableObjectMode:r,readableObjectMode:n},objectMode:o=n}},optionName:i})=>{if(o&&!n)throw new TypeError(`The \`${i}.objectMode\` option can only be \`true\` if \`new Duplex({objectMode: true})\` is used.`);if(!o&&n)throw new TypeError(`The \`${i}.objectMode\` option cannot be \`false\` if \`new Duplex({objectMode: true})\` is used.`);return{...e,value:{transform:t,writableObjectMode:r,readableObjectMode:n}}},Rg=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o})=>{let{transform:i,objectMode:s}=w(t)?t:{transform:t},{writableObjectMode:a,readableObjectMode:c}=wo(s,r,n,o);return{...e,value:{transform:i,writableObjectMode:a,readableObjectMode:c}}},Cg=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o,encoding:i})=>{let{transform:s,final:a,binary:c=!1,preserveNewlines:f=!1,objectMode:u}=w(t)?t:{transform:t},d=c||P.has(i),{writableObjectMode:p,readableObjectMode:m}=wo(u,r,n,o);return{...e,value:{transform:s,final:a,binary:d,preserveNewlines:f,writableObjectMode:p,readableObjectMode:m}}},Pg=(e,t)=>t==="input"?e.reverse():e});var vr,Kl,Mg,Lg,We,xo,Jl,Bg,Fg,Xl=l(()=>{vr=O(require("node:process"),1);ye();v();Kl=(e,t,r)=>{let n=e.map(o=>Mg(o,t));if(n.includes("input")&&n.includes("output"))throw new TypeError(`The \`${r}\` option must not be an array of both readable and writable values.`);return n.find(Boolean)??Fg},Mg=({type:e,value:t},r)=>Lg[r]??Jl[e](t),Lg=["input","output","output"],We=()=>{},xo=()=>"input",Jl={generator:We,asyncGenerator:We,fileUrl:We,filePath:We,iterable:xo,asyncIterable:xo,uint8Array:xo,webStream:e=>Ir(e)?"output":"input",nodeStream(e){return ge(e,{checkOpen:!1})?so(e,{checkOpen:!1})?void 0:"input":"output"},webTransform:We,duplex:We,native(e){let t=Bg(e);if(t!==void 0)return t;if(N(e,{checkOpen:!1}))return Jl.nodeStream(e)}},Bg=e=>{if([0,vr.default.stdin].includes(e))return"input";if([1,2,vr.default.stdout,vr.default.stderr].includes(e))return"output"},Fg="output"});var Zl,Ql=l(()=>{Zl=(e,t)=>t&&!e.includes("ipc")?[...e,"ipc"]:e});var eu,$g,Ug,tu,_g,Ng,ru=l(()=>{J();Ql();ne();eu=({stdio:e,ipc:t,buffer:r,...n},o,i)=>{let s=$g(e,n).map((a,c)=>tu(a,c));return i?_g(s,r,o):Zl(s,t)},$g=(e,t)=>{if(e===void 0)return B.map(n=>t[n]);if(Ug(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${B.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return[e,e,e];if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,B.length);return Array.from({length:r},(n,o)=>e[o])},Ug=e=>B.some(t=>e[t]!==void 0),tu=(e,t)=>Array.isArray(e)?e.map(r=>tu(r,t)):e??(t>=B.length?"ignore":"pipe"),_g=(e,t,r)=>e.map((n,o)=>!t[o]&&o!==0&&!Re(r,o)&&Ng(n)?"ignore":n),Ng=e=>e==="pipe"||Array.isArray(e)&&e.every(t=>t==="pipe")});var ou,iu,su,jg,kg,Gg,Wg,nu,au=l(()=>{ou=require("node:fs"),iu=O(require("node:tty"),1);ye();J();C();se();su=({stdioItem:e,stdioItem:{type:t},isStdioArray:r,fdNumber:n,direction:o,isSync:i})=>!r||t!=="native"?e:i?jg({stdioItem:e,fdNumber:n,direction:o}):Wg({stdioItem:e,fdNumber:n}),jg=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n,direction:o})=>{let i=kg({value:t,optionName:r,fdNumber:n,direction:o});if(i!==void 0)return i;if(N(t,{checkOpen:!1}))throw new TypeError(`The \`${r}: Stream\` option cannot both be an array and include a stream with synchronous methods.`);return e},kg=({value:e,optionName:t,fdNumber:r,direction:n})=>{let o=Gg(e,r);if(o!==void 0){if(n==="output")return{type:"fileNumber",value:o,optionName:t};if(iu.default.isatty(o))throw new TypeError(`The \`${t}: ${Yt(e)}\` option is invalid: it cannot be a TTY with synchronous methods.`);return{type:"uint8Array",value:K((0,ou.readFileSync)(o)),optionName:t}}},Gg=(e,t)=>{if(e==="inherit")return t;if(typeof e=="number")return e;let r=Tt.indexOf(e);if(r!==-1)return r},Wg=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n})=>t==="inherit"?{type:"nodeStream",value:nu(n,t,r),optionName:r}:typeof t=="number"?{type:"nodeStream",value:nu(t,t,r),optionName:r}:N(t,{checkOpen:!1})?{type:"nodeStream",value:t,optionName:r}:e,nu=(e,t,r)=>{let n=Tt[e];if(n===void 0)throw new TypeError(`The \`${r}: ${t}\` option is invalid: no such standard stream.`);return n}});var cu,zg,Vg,Hg,Yg,lu=l(()=>{ye();C();v();cu=({input:e,inputFile:t},r)=>r===0?[...zg(e),...Hg(t)]:[],zg=e=>e===void 0?[]:[{type:Vg(e),value:e,optionName:"input"}],Vg=e=>{if(ge(e,{checkOpen:!1}))return"nodeStream";if(typeof e=="string")return"string";if(x(e))return"uint8Array";throw new Error("The `input` option must be a string, a Uint8Array or a Node.js Readable stream.")},Hg=e=>e===void 0?[]:[{...Yg(e),optionName:"inputFile"}],Yg=e=>{if(Or(e))return{type:"fileUrl",value:e};if(go(e))return{type:"filePath",value:{file:e}};throw new Error("The `inputFile` option must be a file path string or a file URL.")}});var uu,fu,qg,Kg,du,Jg,Xg,pu,mu=l(()=>{v();uu=e=>e.filter((t,r)=>e.every((n,o)=>t.value!==n.value||r>=o||t.type==="generator"||t.type==="asyncGenerator")),fu=({stdioItem:{type:e,value:t,optionName:r},direction:n,fileDescriptors:o,isSync:i})=>{let s=qg(o,e);if(s.length!==0){if(i){Kg({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});return}if(zl.has(e))return du({otherStdioItems:s,type:e,value:t,optionName:r,direction:n});Vl.has(e)&&Xg({otherStdioItems:s,type:e,value:t,optionName:r})}},qg=(e,t)=>e.flatMap(({direction:r,stdioItems:n})=>n.filter(o=>o.type===t).map((o=>({...o,direction:r})))),Kg=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{So.has(t)&&du({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})},du=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{let i=e.filter(a=>Jg(a,r));if(i.length===0)return;let s=i.find(a=>a.direction!==o);return pu(s,n,t),o==="output"?i[0].stream:void 0},Jg=({type:e,value:t},r)=>e==="filePath"?t.file===r.file:e==="fileUrl"?t.href===r.href:t===r,Xg=({otherStdioItems:e,type:t,value:r,optionName:n})=>{let o=e.find(({value:{transform:i}})=>i===r.transform);pu(o,n,t)},pu=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${e.optionName}\` and \`${t}\` options must not target ${ce[r]} that is the same.`)}});var Rr,Zg,Qg,ey,ty,ry,ny,oy,iy,sy,ay,cy,Do,ly,Cr=l(()=>{J();ql();bo();v();Xl();ru();au();lu();mu();Rr=(e,t,r,n)=>{let i=eu(t,r,n).map((a,c)=>Zg({stdioOption:a,fdNumber:c,options:t,isSync:n})),s=sy({initialFileDescriptors:i,addProperties:e,options:t,isSync:n});return t.stdio=s.map(({stdioItems:a})=>ly(a)),s},Zg=({stdioOption:e,fdNumber:t,options:r,isSync:n})=>{let o=vt(t),{stdioItems:i,isStdioArray:s}=Qg({stdioOption:e,fdNumber:t,options:r,optionName:o}),a=Kl(i,t,o),c=i.map(d=>su({stdioItem:d,isStdioArray:s,fdNumber:t,direction:a,isSync:n})),f=Yl(c,o,a,r),u=Hl(f,a);return iy(f,u),{direction:a,objectMode:u,stdioItems:f}},Qg=({stdioOption:e,fdNumber:t,options:r,optionName:n})=>{let i=[...(Array.isArray(e)?e:[e]).map(c=>ey(c,n)),...cu(r,t)],s=uu(i),a=s.length>1;return ty(s,a,n),ny(s),{stdioItems:s,isStdioArray:a}},ey=(e,t)=>({type:$l(e,t),value:e,optionName:t}),ty=(e,t,r)=>{if(e.length===0)throw new TypeError(`The \`${r}\` option must not be an empty array.`);if(t){for(let{value:n,optionName:o}of e)if(ry.has(n))throw new Error(`The \`${o}\` option must not include \`${n}\`.`)}},ry=new Set(["ignore","ipc"]),ny=e=>{for(let t of e)oy(t)},oy=({type:e,value:t,optionName:r})=>{if(jl(t))throw new TypeError(`The \`${r}: URL\` option must use the \`file:\` scheme.
For example, you can use the \`pathToFileURL()\` method of the \`url\` core module.`);if(kl(e,t))throw new TypeError(`The \`${r}: { file: '...' }\` option must be used instead of \`${r}: '...'\`.`)},iy=(e,t)=>{if(!t)return;let r=e.find(({type:n})=>Tr.has(n));if(r!==void 0)throw new TypeError(`The \`${r.optionName}\` option cannot use both files and transforms in objectMode.`)},sy=({initialFileDescriptors:e,addProperties:t,options:r,isSync:n})=>{let o=[];try{for(let i of e)o.push(ay({fileDescriptor:i,fileDescriptors:o,addProperties:t,options:r,isSync:n}));return o}catch(i){throw Do(o),i}},ay=({fileDescriptor:{direction:e,objectMode:t,stdioItems:r},fileDescriptors:n,addProperties:o,options:i,isSync:s})=>{let a=r.map(c=>cy({stdioItem:c,addProperties:o,direction:e,options:i,fileDescriptors:n,isSync:s}));return{direction:e,objectMode:t,stdioItems:a}},cy=({stdioItem:e,addProperties:t,direction:r,options:n,fileDescriptors:o,isSync:i})=>{let s=fu({stdioItem:e,direction:r,fileDescriptors:o,isSync:i});return s!==void 0?{...e,stream:s}:{...e,...t[r][e.type](e,n)}},Do=e=>{for(let{stdioItems:t}of e)for(let{stream:r}of t)r!==void 0&&!$(r)&&r.destroy()},ly=e=>{if(e.length>1)return e.some(({value:n})=>n==="overlapped")?"overlapped":"pipe";let[{type:t,value:r}]=e;return t==="native"?r:"pipe"}});var Eo,gu,z,uy,yu,hu,fy,Su=l(()=>{Eo=require("node:fs");C();Cr();v();gu=(e,t)=>Rr(fy,e,t,!0),z=({type:e,optionName:t})=>{yu(t,ce[e])},uy=({optionName:e,value:t})=>((t==="ipc"||t==="overlapped")&&yu(e,`"${t}"`),{}),yu=(e,t)=>{throw new TypeError(`The \`${e}\` option cannot be ${t} with synchronous methods.`)},hu={generator(){},asyncGenerator:z,webStream:z,nodeStream:z,webTransform:z,duplex:z,asyncIterable:z,native:uy},fy={input:{...hu,fileUrl:({value:e})=>({contents:[K((0,Eo.readFileSync)(e))]}),filePath:({value:{file:e}})=>({contents:[K((0,Eo.readFileSync)(e))]}),fileNumber:z,iterable:({value:e})=>({contents:[...e]}),string:({value:e})=>({contents:[e]}),uint8Array:({value:e})=>({contents:[e]})},output:{...hu,fileUrl:({value:e})=>({path:e}),filePath:({value:{file:e,append:t}})=>({path:e,append:t}),fileNumber:({value:e})=>({path:e}),iterable:z,string:z,uint8Array:z}}});var ee,Ao,dt=l(()=>{io();ee=(e,{stripFinalNewline:t},r)=>Ao(t,r)&&e!==void 0&&!Array.isArray(e)?Ne(e):e,Ao=(e,t)=>t==="all"?e[1]||e[2]:e[t]});var Pr,Io,wu,bu,dy,py,my,xu,hy,Oo,gy,yy,Sy,Mr=l(()=>{Pr=(e,t,r,n)=>e||r?void 0:bu(t,n),Io=(e,t,r)=>r?e.flatMap(n=>wu(n,t)):wu(e,t),wu=(e,t)=>{let{transform:r,final:n}=bu(t,{});return[...r(e),...n()]},bu=(e,t)=>(t.previousChunks="",{transform:dy.bind(void 0,t,e),final:my.bind(void 0,t)}),dy=function*(e,t,r){if(typeof r!="string"){yield r;return}let{previousChunks:n}=e,o=-1;for(let i=0;i<r.length;i+=1)if(r[i]===`
`){let s=py(r,i,t,e),a=r.slice(o+1,i+1-s);n.length>0&&(a=Oo(n,a),n=""),yield a,o=i}o!==r.length-1&&(n=Oo(n,r.slice(o+1))),e.previousChunks=n},py=(e,t,r,n)=>r?0:(n.isWindowsNewline=t!==0&&e[t-1]==="\r",n.isWindowsNewline?2:1),my=function*({previousChunks:e}){e.length>0&&(yield e)},xu=({binary:e,preserveNewlines:t,readableObjectMode:r,state:n})=>e||t||r?void 0:{transform:hy.bind(void 0,n)},hy=function*({isWindowsNewline:e=!1},t){let{unixNewline:r,windowsNewline:n,LF:o,concatBytes:i}=typeof t=="string"?gy:Sy;if(t.at(-1)===o){yield t;return}yield i(t,e?n:r)},Oo=(e,t)=>`${e}${t}`,gy={windowsNewline:`\r
`,unixNewline:`
`,LF:`
`,concatBytes:Oo},yy=(e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r},Sy={windowsNewline:new Uint8Array([13,10]),unixNewline:new Uint8Array([10]),LF:10,concatBytes:yy}});var Du,Eu,wy,Au,by,xy,Ou,Iu=l(()=>{Du=require("node:buffer");C();Eu=(e,t)=>e?void 0:wy.bind(void 0,t),wy=function*(e,t){if(typeof t!="string"&&!x(t)&&!Du.Buffer.isBuffer(t))throw new TypeError(`The \`${e}\` option's transform must use "objectMode: true" to receive as input: ${typeof t}.`);yield t},Au=(e,t)=>e?by.bind(void 0,t):xy.bind(void 0,t),by=function*(e,t){Ou(e,t),yield t},xy=function*(e,t){if(Ou(e,t),typeof t!="string"&&!x(t))throw new TypeError(`The \`${e}\` option's function must yield a string or an Uint8Array, not ${typeof t}.`);yield t},Ou=(e,t)=>{if(t==null)throw new TypeError(`The \`${e}\` option's function must not call \`yield ${t}\`.
Instead, \`yield\` should either be called with a value, or not be called at all. For example:
  if (condition) { yield value; }`)}});var Tu,vu,Lr,Dy,Ey,Ay,To=l(()=>{Tu=require("node:buffer"),vu=require("node:string_decoder");C();Lr=(e,t,r)=>{if(r)return;if(e)return{transform:Dy.bind(void 0,new TextEncoder)};let n=new vu.StringDecoder(t);return{transform:Ey.bind(void 0,n),final:Ay.bind(void 0,n)}},Dy=function*(e,t){Tu.Buffer.isBuffer(t)?yield K(t):typeof t=="string"?yield e.encode(t):yield t},Ey=function*(e,t){yield x(t)?e.write(t):t},Ay=function*(e){let t=e.end();t!==""&&(yield t)}});var vo,Ro,Br,Ru,Oy,Cu,Iy,Pu=l(()=>{vo=require("node:util"),Ro=(0,vo.callbackify)(async(e,t,r,n)=>{t.currentIterable=e(...r);try{for await(let o of t.currentIterable)n.push(o)}finally{delete t.currentIterable}}),Br=async function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=Iy}=t[r];for await(let o of n(e))yield*Br(o,t,r+1)},Ru=async function*(e){for(let[t,{final:r}]of Object.entries(e))yield*Oy(r,Number(t),e)},Oy=async function*(e,t,r){if(e!==void 0)for await(let n of e())yield*Br(n,r,t+1)},Cu=(0,vo.callbackify)(async({currentIterable:e},t)=>{if(e!==void 0){await(t?e.throw(t):e.return());return}if(t)throw t}),Iy=function*(e){yield e}});var Co,Mu,be,pt,Ty,vy,Po=l(()=>{Co=(e,t,r,n)=>{try{for(let o of e(...t))r.push(o);n()}catch(o){n(o)}},Mu=(e,t)=>[...t.flatMap(r=>[...be(r,e,0)]),...pt(e)],be=function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=vy}=t[r];for(let o of n(e))yield*be(o,t,r+1)},pt=function*(e){for(let[t,{final:r}]of Object.entries(e))yield*Ty(r,Number(t),e)},Ty=function*(e,t,r){if(e!==void 0)for(let n of e())yield*be(n,r,t+1)},vy=function*(e){yield e}});var mt,Mo,Fr,Lu,$r=l(()=>{mt=require("node:stream");v();Mr();Iu();To();Pu();Po();Mo=({value:e,value:{transform:t,final:r,writableObjectMode:n,readableObjectMode:o},optionName:i},{encoding:s})=>{let a={},c=Lu(e,s,i),f=we(t),u=we(r),d=f?Ro.bind(void 0,Br,a):Co.bind(void 0,be),p=f||u?Ro.bind(void 0,Ru,a):Co.bind(void 0,pt),m=f||u?Cu.bind(void 0,a):void 0;return{stream:new mt.Transform({writableObjectMode:n,writableHighWaterMark:(0,mt.getDefaultHighWaterMark)(n),readableObjectMode:o,readableHighWaterMark:(0,mt.getDefaultHighWaterMark)(o),transform(y,b,S){d([y,c,0],this,S)},flush(y){p([c],this,y)},destroy:m})}},Fr=(e,t,r,n)=>{let o=t.filter(({type:s})=>s==="generator"),i=n?o.reverse():o;for(let{value:s,optionName:a}of i){let c=Lu(s,r,a);e=Mu(c,e)}return e},Lu=({transform:e,final:t,binary:r,writableObjectMode:n,readableObjectMode:o,preserveNewlines:i},s,a)=>{let c={};return[{transform:Eu(n,a)},Lr(r,s,n),Pr(r,i,n,c),{transform:e,final:t},{transform:Au(o,a)},xu({binary:r,preserveNewlines:i,readableObjectMode:o,state:c})].filter(Boolean)}});var Bu,Ry,Cy,Py,My,Fu=l(()=>{$r();C();v();Bu=(e,t)=>{for(let r of Ry(e))Cy(e,r,t)},Ry=e=>new Set(Object.entries(e).filter(([,{direction:t}])=>t==="input").map(([t])=>Number(t))),Cy=(e,t,r)=>{let{stdioItems:n}=e[t],o=n.filter(({contents:a})=>a!==void 0);if(o.length===0)return;if(t!==0){let[{type:a,optionName:c}]=o;throw new TypeError(`Only the \`stdin\` option, not \`${c}\`, can be ${ce[a]} with synchronous methods.`)}let s=o.map(({contents:a})=>a).map(a=>Py(a,n));r.input=Xe(s)},Py=(e,t)=>{let r=Fr(e,t,"utf8",!0);return My(r),Xe(r)},My=e=>{let t=e.find(r=>typeof r!="string"&&!x(r));if(t!==void 0)throw new TypeError(`The \`stdin\` option is invalid: when passing objects as input, a transform must be used to serialize them to strings or Uint8Arrays: ${t}.`)}});var Ur,Ly,By,$u,Uu,Fy,_u,Lo=l(()=>{he();v();Ce();ne();Ur=({stdioItems:e,encoding:t,verboseInfo:r,fdNumber:n})=>n!=="all"&&Re(r,n)&&!P.has(t)&&Ly(n)&&(e.some(({type:o,value:i})=>o==="native"&&By.has(i))||e.every(({type:o})=>F.has(o))),Ly=e=>e===1||e===2,By=new Set(["pipe","overlapped"]),$u=async(e,t,r,n)=>{for await(let o of e)Fy(t)||_u(o,r,n)},Uu=(e,t,r)=>{for(let n of e)_u(n,t,r)},Fy=e=>e._readableState.pipes.length>0,_u=(e,t,r)=>{let n=Ft(e);j({type:"output",verboseMessage:n,fdNumber:t,verboseInfo:r})}});var _r,Nu,$y,Uy,_y,Ny,jy,ju=l(()=>{_r=require("node:fs");Lo();$r();Mr();C();v();Se();Nu=({fileDescriptors:e,syncResult:{output:t},options:r,isMaxBuffer:n,verboseInfo:o})=>{if(t===null)return{output:Array.from({length:3})};let i={},s=new Set([]);return{output:t.map((c,f)=>$y({result:c,fileDescriptors:e,fdNumber:f,state:i,outputFiles:s,isMaxBuffer:n,verboseInfo:o},r)),...i}},$y=({result:e,fileDescriptors:t,fdNumber:r,state:n,outputFiles:o,isMaxBuffer:i,verboseInfo:s},{buffer:a,encoding:c,lines:f,stripFinalNewline:u,maxBuffer:d})=>{if(e===null)return;let p=xl(e,i,d),m=K(p),{stdioItems:h,objectMode:y}=t[r],b=Uy([m],h,c,n),{serializedResult:S,finalResult:E=S}=_y({chunks:b,objectMode:y,encoding:c,lines:f,stripFinalNewline:u,fdNumber:r});Ny({serializedResult:S,fdNumber:r,state:n,verboseInfo:s,encoding:c,stdioItems:h,objectMode:y});let T=a[r]?E:void 0;try{return n.error===void 0&&jy(S,h,o),T}catch(L){return n.error=L,T}},Uy=(e,t,r,n)=>{try{return Fr(e,t,r,!1)}catch(o){return n.error=o,e}},_y=({chunks:e,objectMode:t,encoding:r,lines:n,stripFinalNewline:o,fdNumber:i})=>{if(t)return{serializedResult:e};if(r==="buffer")return{serializedResult:Xe(e)};let s=Wi(e,r);return n[i]?{serializedResult:s,finalResult:Io(s,!o[i],t)}:{serializedResult:s}},Ny=({serializedResult:e,fdNumber:t,state:r,verboseInfo:n,encoding:o,stdioItems:i,objectMode:s})=>{if(!Ur({stdioItems:i,encoding:o,verboseInfo:n,fdNumber:t}))return;let a=Io(e,!1,s);try{Uu(a,t,n)}catch(c){r.error??=c}},jy=(e,t,r)=>{for(let{path:n,append:o}of t.filter(({type:i})=>Tr.has(i))){let i=typeof n=="string"?n:n.toString();o||r.has(i)?(0,_r.appendFileSync)(n,e):(r.add(i),(0,_r.writeFileSync)(n,e))}}});var ku,Gu=l(()=>{C();dt();ku=([,e,t],r)=>{if(r.all)return e===void 0?t:t===void 0?e:Array.isArray(e)?Array.isArray(t)?[...e,...t]:[...e,ee(t,r,"all")]:Array.isArray(t)?[ee(e,r,"all"),...t]:x(e)&&x(t)?hn([e,t]):`${e}${t}`}});var Nr,Wu,ky,zu,Vu,Gy,Bo,Fo=l(()=>{Nr=require("node:events");pe();Wu=async(e,t)=>{let[r,n]=await ky(e);return t.isForcefullyTerminated??=!1,[r,n]},ky=async e=>{let[t,r]=await Promise.allSettled([(0,Nr.once)(e,"spawn"),(0,Nr.once)(e,"exit")]);return t.status==="rejected"?[]:r.status==="rejected"?zu(e):r.value},zu=async e=>{try{return await(0,Nr.once)(e,"exit")}catch{return zu(e)}},Vu=async e=>{let[t,r]=await e;if(!Gy(t,r)&&Bo(t,r))throw new U;return[t,r]},Gy=(e,t)=>e===void 0&&t===void 0,Bo=(e,t)=>e!==0||t!==null});var Hu,Wy,Yu=l(()=>{pe();Se();Fo();Hu=({error:e,status:t,signal:r,output:n},{maxBuffer:o})=>{let i=Wy(e,t,r),s=i?.code==="ETIMEDOUT",a=bl(i,n,o);return{resultError:i,exitCode:t,signal:r,timedOut:s,isMaxBuffer:a}},Wy=(e,t,r)=>e!==void 0?e:Bo(t,r)?new U:void 0});var qu,Ku,zy,Vy,Hy,jr,Yy,qy,Ky,Jy,Ju=l(()=>{qu=require("node:child_process");On();no();oo();ft();Ar();Su();dt();Fu();ju();Se();Gu();Yu();Ku=(e,t,r)=>{let{file:n,commandArguments:o,command:i,escapedCommand:s,startTime:a,verboseInfo:c,options:f,fileDescriptors:u}=zy(e,t,r),d=Yy({file:n,commandArguments:o,options:f,command:i,escapedCommand:s,verboseInfo:c,fileDescriptors:u,startTime:a});return Ge(d,c,f)},zy=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=_t(e,t,r),a=Vy(r),{file:c,commandArguments:f,options:u}=fr(e,t,a);Hy(u);let d=gu(u,s);return{file:c,commandArguments:f,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:u,fileDescriptors:d}},Vy=e=>e.node&&!e.ipc?{...e,ipc:!1}:e,Hy=({ipc:e,ipcInput:t,detached:r,cancelSignal:n})=>{t&&jr("ipcInput"),e&&jr("ipc: true"),r&&jr("detached: true"),n&&jr("cancelSignal")},jr=e=>{throw new TypeError(`The "${e}" option cannot be used with synchronous methods.`)},Yy=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,verboseInfo:i,fileDescriptors:s,startTime:a})=>{let c=qy({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:s,startTime:a});if(c.failed)return c;let{resultError:f,exitCode:u,signal:d,timedOut:p,isMaxBuffer:m}=Hu(c,r),{output:h,error:y=f}=Nu({fileDescriptors:s,syncResult:c,options:r,isMaxBuffer:m,verboseInfo:i}),b=h.map((E,T)=>ee(E,r,T)),S=ee(ku(h,r),r,"all");return Jy({error:y,exitCode:u,signal:d,timedOut:p,isMaxBuffer:m,stdio:b,all:S,options:r,command:n,escapedCommand:o,startTime:a})},qy=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:i,startTime:s})=>{try{Bu(i,r);let a=Ky(r);return(0,qu.spawnSync)(...dr(e,t,a))}catch(a){return ke({error:a,command:n,escapedCommand:o,fileDescriptors:i,options:r,startTime:s,isSync:!0})}},Ky=({encoding:e,maxBuffer:t,...r})=>({...r,encoding:"buffer",maxBuffer:Dr(t)}),Jy=({error:e,exitCode:t,signal:r,timedOut:n,isMaxBuffer:o,stdio:i,all:s,options:a,command:c,escapedCommand:f,startTime:u})=>e===void 0?Er({command:c,escapedCommand:f,stdio:i,all:s,ipcOutput:[],options:a,startTime:u}):ut({error:e,command:c,escapedCommand:f,timedOut:n,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:o,isForcefullyTerminated:!1,exitCode:t,signal:r,stdio:i,all:s,ipcOutput:[],options:a,startTime:u,isSync:!0})});var ze,Xu,Xy,Zy,Qy,eS,Zu=l(()=>{ze=require("node:events");$e();it();ot();Xu=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0,filter:i}={})=>(Be({methodName:"getOneMessage",isSubprocess:r,ipc:n,isConnected:nr(e)}),Xy({anyProcess:e,channel:t,isSubprocess:r,filter:i,reference:o})),Xy=async({anyProcess:e,channel:t,isSubprocess:r,filter:n,reference:o})=>{Jt(t,o);let i=ae(e,t,r),s=new AbortController;try{return await Promise.race([Zy(i,n,s),Qy(i,r,s),eS(i,r,s)])}catch(a){throw Fe(e),a}finally{s.abort(),Xt(t,o)}},Zy=async(e,t,{signal:r})=>{if(t===void 0){let[n]=await(0,ze.once)(e,"message",{signal:r});return n}for await(let[n]of(0,ze.on)(e,"message",{signal:r}))if(t(n))return n},Qy=async(e,t,{signal:r})=>{await(0,ze.once)(e,"disconnect",{signal:r}),Ha(t)},eS=async(e,t,{signal:r})=>{let[n]=await(0,ze.once)(e,"strict:error",{signal:r});throw Ht(n,t)}});var ht,ef,$o,tS,rS,nS,Qu,Uo=l(()=>{ht=require("node:events");$e();it();ot();ef=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0}={})=>$o({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:!r,reference:o}),$o=({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:o,reference:i})=>{Be({methodName:"getEachMessage",isSubprocess:r,ipc:n,isConnected:nr(e)}),Jt(t,i);let s=ae(e,t,r),a=new AbortController,c={};return tS(e,s,a),rS({ipcEmitter:s,isSubprocess:r,controller:a,state:c}),nS({anyProcess:e,channel:t,ipcEmitter:s,isSubprocess:r,shouldAwait:o,controller:a,state:c,reference:i})},tS=async(e,t,r)=>{try{await(0,ht.once)(t,"disconnect",{signal:r.signal}),r.abort()}catch{}},rS=async({ipcEmitter:e,isSubprocess:t,controller:r,state:n})=>{try{let[o]=await(0,ht.once)(e,"strict:error",{signal:r.signal});n.error=Ht(o,t),r.abort()}catch{}},nS=async function*({anyProcess:e,channel:t,ipcEmitter:r,isSubprocess:n,shouldAwait:o,controller:i,state:s,reference:a}){try{for await(let[c]of(0,ht.on)(r,"message",{signal:i.signal}))Qu(s),yield c}catch{Qu(s)}finally{i.abort(),Xt(t,a),n||Fe(e),o&&await e}},Qu=({error:e})=>{if(e)throw e}});var _o,tf,rf,nf,No=l(()=>{_o=O(require("node:process"),1);cr();Zu();Uo();tr();tf=(e,{ipc:t})=>{Object.assign(e,nf(e,!1,t))},rf=()=>{let e=_o.default,t=!0,r=_o.default.channel!==void 0;return{...nf(e,t,r),getCancelSignal:Tc.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})}},nf=(e,t,r)=>({sendMessage:ar.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getOneMessage:Xu.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getEachMessage:ef.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})})});var of,le,sf,oS,gt,iS,sS,aS,cS,af=l(()=>{of=require("node:child_process"),le=require("node:stream");Cr();ft();Ar();sf=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,verboseInfo:s})=>{Do(n);let a=new of.ChildProcess;oS(a,n),Object.assign(a,{readable:iS,writable:sS,duplex:aS});let c=ke({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:!1}),f=cS(c,s,o);return{subprocess:a,promise:f}},oS=(e,t)=>{let r=gt(),n=gt(),o=gt(),i=Array.from({length:t.length-3},gt),s=gt(),a=[r,n,o,...i];Object.assign(e,{stdin:r,stdout:n,stderr:o,all:s,stdio:a})},gt=()=>{let e=new le.PassThrough;return e.end(),e},iS=()=>new le.Readable({read(){}}),sS=()=>new le.Writable({write(){}}),aS=()=>new le.Duplex({read(){},write(){}}),cS=async(e,t,r)=>Ge(e,t,r)});var Ve,lf,V,uf,yt,cf,lS,ff=l(()=>{Ve=require("node:fs"),lf=require("node:buffer"),V=require("node:stream");$r();Cr();v();uf=(e,t)=>Rr(lS,e,t,!1),yt=({type:e,optionName:t})=>{throw new TypeError(`The \`${t}\` option cannot be ${ce[e]}.`)},cf={fileNumber:yt,generator:Mo,asyncGenerator:Mo,nodeStream:({value:e})=>({stream:e}),webTransform({value:{transform:e,writableObjectMode:t,readableObjectMode:r}}){let n=t||r;return{stream:V.Duplex.fromWeb(e,{objectMode:n})}},duplex:({value:{transform:e}})=>({stream:e}),native(){}},lS={input:{...cf,fileUrl:({value:e})=>({stream:(0,Ve.createReadStream)(e)}),filePath:({value:{file:e}})=>({stream:(0,Ve.createReadStream)(e)}),webStream:({value:e})=>({stream:V.Readable.fromWeb(e)}),iterable:({value:e})=>({stream:V.Readable.from(e)}),asyncIterable:({value:e})=>({stream:V.Readable.from(e)}),string:({value:e})=>({stream:V.Readable.from(e)}),uint8Array:({value:e})=>({stream:V.Readable.from(lf.Buffer.from(e))})},output:{...cf,fileUrl:({value:e})=>({stream:(0,Ve.createWriteStream)(e)}),filePath:({value:{file:e,append:t}})=>({stream:(0,Ve.createWriteStream)(e,t?{flags:"a"}:{})}),webStream:({value:e})=>({stream:V.Writable.fromWeb(e)}),iterable:yt,asyncIterable:yt,string:yt,uint8Array:yt}}});function xe(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let o of e)ko(o);let t=e.some(({readableObjectMode:o})=>o),r=uS(e,t),n=new jo({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let o of e)n.add(o);return n}var St,Gr,Go,uS,jo,fS,dS,pS,ko,mS,hS,gS,yS,SS,mf,hf,Wo,gf,wS,kr,df,pf,Wr=l(()=>{St=require("node:events"),Gr=require("node:stream"),Go=require("node:stream/promises");uS=(e,t)=>{if(e.length===0)return(0,Gr.getDefaultHighWaterMark)(t);let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},jo=class extends Gr.PassThrough{#t=new Set([]);#r=new Set([]);#e=new Set([]);#n;#i=Symbol("unpipe");#o=new WeakMap;add(t){if(ko(t),this.#t.has(t))return;this.#t.add(t),this.#n??=fS(this,this.#t,this.#i);let r=mS({passThroughStream:this,stream:t,streams:this.#t,ended:this.#r,aborted:this.#e,onFinished:this.#n,unpipeEvent:this.#i});this.#o.set(t,r),t.pipe(this,{end:!1})}async remove(t){if(ko(t),!this.#t.has(t))return!1;let r=this.#o.get(t);return r===void 0?!1:(this.#o.delete(t),t.unpipe(this),await r,!0)}},fS=async(e,t,r)=>{kr(e,df);let n=new AbortController;try{await Promise.race([dS(e,n),pS(e,t,r,n)])}finally{n.abort(),kr(e,-df)}},dS=async(e,{signal:t})=>{try{await(0,Go.finished)(e,{signal:t,cleanup:!0})}catch(r){throw mf(e,r),r}},pS=async(e,t,r,{signal:n})=>{for await(let[o]of(0,St.on)(e,"unpipe",{signal:n}))t.has(o)&&o.emit(r)},ko=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},mS=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,onFinished:i,unpipeEvent:s})=>{kr(e,pf);let a=new AbortController;try{await Promise.race([hS(i,t,a),gS({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:a}),yS({stream:t,streams:r,ended:n,aborted:o,unpipeEvent:s,controller:a})])}finally{a.abort(),kr(e,-pf)}r.size>0&&r.size===n.size+o.size&&(n.size===0&&o.size>0?Wo(e):SS(e))},hS=async(e,t,{signal:r})=>{try{await e,r.aborted||Wo(t)}catch(n){r.aborted||mf(t,n)}},gS=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:{signal:i}})=>{try{await(0,Go.finished)(t,{signal:i,cleanup:!0,readable:!0,writable:!1}),r.has(t)&&n.add(t)}catch(s){if(i.aborted||!r.has(t))return;hf(s)?o.add(t):gf(e,s)}},yS=async({stream:e,streams:t,ended:r,aborted:n,unpipeEvent:o,controller:{signal:i}})=>{if(await(0,St.once)(e,o,{signal:i}),!e.readable)return(0,St.once)(i,"abort",{signal:i});t.delete(e),r.delete(e),n.delete(e)},SS=e=>{e.writable&&e.end()},mf=(e,t)=>{hf(t)?Wo(e):gf(e,t)},hf=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Wo=e=>{(e.readable||e.writable)&&e.destroy()},gf=(e,t)=>{e.destroyed||(e.once("error",wS),e.destroy(t))},wS=()=>{},kr=(e,t)=>{let r=e.getMaxListeners();r!==0&&r!==Number.POSITIVE_INFINITY&&e.setMaxListeners(r+t)},df=2,pf=1});var zo,He,bS,Vo,xS,Ho,zr=l(()=>{zo=require("node:stream/promises");J();He=(e,t)=>{e.pipe(t),bS(e,t),xS(e,t)},bS=async(e,t)=>{if(!($(e)||$(t))){try{await(0,zo.finished)(e,{cleanup:!0,readable:!0,writable:!1})}catch{}Vo(t)}},Vo=e=>{e.writable&&e.end()},xS=async(e,t)=>{if(!($(e)||$(t))){try{await(0,zo.finished)(t,{cleanup:!0,readable:!1,writable:!0})}catch{}Ho(e)}},Ho=e=>{e.readable&&e.destroy()}});var yf,DS,ES,AS,OS,IS,Sf=l(()=>{Wr();J();Kt();v();zr();yf=(e,t,r)=>{let n=new Map;for(let[o,{stdioItems:i,direction:s}]of Object.entries(t)){for(let{stream:a}of i.filter(({type:c})=>F.has(c)))DS(e,a,s,o);for(let{stream:a}of i.filter(({type:c})=>!F.has(c)))AS({subprocess:e,stream:a,direction:s,fdNumber:o,pipeGroups:n,controller:r})}for(let[o,i]of n.entries()){let s=i.length===1?i[0]:xe(i);He(s,o)}},DS=(e,t,r,n)=>{r==="output"?He(e.stdio[n],t):He(t,e.stdio[n]);let o=ES[n];o!==void 0&&(e[o]=t),e.stdio[n]=t},ES=["stdin","stdout","stderr"],AS=({subprocess:e,stream:t,direction:r,fdNumber:n,pipeGroups:o,controller:i})=>{if(t===void 0)return;OS(t,i);let[s,a]=r==="output"?[t,e.stdio[n]]:[e.stdio[n],t],c=o.get(s)??[];o.set(s,[...c,a])},OS=(e,{signal:t})=>{$(e)&&me(e,IS,t)},IS=2});var De,wf=l(()=>{De=[];De.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&De.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&De.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var Vr,Yo,qo,TS,Ko,Hr,vS,Jo,Xo,Zo,bf,GI,WI,xf=l(()=>{wf();Vr=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Yo=Symbol.for("signal-exit emitter"),qo=globalThis,TS=Object.defineProperty.bind(Object),Ko=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(qo[Yo])return qo[Yo];TS(qo,Yo,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],o=n.indexOf(r);o!==-1&&(o===0&&n.length===1?n.length=0:n.splice(o,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let o=!1;for(let i of this.listeners[t])o=i(r,n)===!0||o;return t==="exit"&&(o=this.emit("afterExit",r,n)||o),o}},Hr=class{},vS=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Jo=class extends Hr{onExit(){return()=>{}}load(){}unload(){}},Xo=class extends Hr{#t=Zo.platform==="win32"?"SIGINT":"SIGHUP";#r=new Ko;#e;#n;#i;#o={};#s=!1;constructor(t){super(),this.#e=t,this.#o={};for(let r of De)this.#o[r]=()=>{let n=this.#e.listeners(r),{count:o}=this.#r,i=t;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(o+=i.__signal_exit_emitter__.count),n.length===o){this.unload();let s=this.#r.emit("exit",null,r),a=r==="SIGHUP"?this.#t:r;s||t.kill(t.pid,a)}};this.#i=t.reallyExit,this.#n=t.emit}onExit(t,r){if(!Vr(this.#e))return()=>{};this.#s===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#r.on(n,t),()=>{this.#r.removeListener(n,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#s){this.#s=!0,this.#r.count+=1;for(let t of De)try{let r=this.#o[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#c(t,...r),this.#e.reallyExit=t=>this.#a(t)}}unload(){this.#s&&(this.#s=!1,De.forEach(t=>{let r=this.#o[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#n,this.#e.reallyExit=this.#i,this.#r.count-=1)}#a(t){return Vr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#c(t,...r){let n=this.#n;if(t==="exit"&&Vr(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let o=n.call(this.#e,t,...r);return this.#r.emit("exit",this.#e.exitCode,null),o}else return n.call(this.#e,t,...r)}},Zo=globalThis.process,{onExit:bf,load:GI,unload:WI}=vS(Vr(Zo)?new Xo(Zo):new Jo)});var Df,Ef,Af=l(()=>{Df=require("node:events");xf();Ef=(e,{cleanup:t,detached:r},{signal:n})=>{if(!t||r)return;let o=bf(()=>{e.kill()});(0,Df.addAbortListener)(n,()=>{o()})}});var If,RS,CS,Of,PS,Tf=l(()=>{mn();Ut();se();Te();If=({source:e,sourcePromise:t,boundOptions:r,createNested:n},...o)=>{let i=$t(),{destination:s,destinationStream:a,destinationError:c,from:f,unpipeSignal:u}=RS(r,n,o),{sourceStream:d,sourceError:p}=PS(e,f),{options:m,fileDescriptors:h}=G.get(e);return{sourcePromise:t,sourceStream:d,sourceOptions:m,sourceError:p,destination:s,destinationStream:a,destinationError:c,unpipeSignal:u,fileDescriptors:h,startTime:i}},RS=(e,t,r)=>{try{let{destination:n,pipeOptions:{from:o,to:i,unpipeSignal:s}={}}=CS(e,t,...r),a=qt(n,i);return{destination:n,destinationStream:a,from:o,unpipeSignal:s}}catch(n){return{destinationError:n}}},CS=(e,t,r,...n)=>{if(Array.isArray(r))return{destination:t(Of,e)(r,...n),pipeOptions:e};if(typeof r=="string"||r instanceof URL||dn(r)){if(Object.keys(e).length>0)throw new TypeError('Please use .pipe("file", ..., options) or .pipe(execa("file", ..., options)) instead of .pipe(options)("file", ...).');let[o,i,s]=At(r,...n);return{destination:t(Of)(o,i,s),pipeOptions:s}}if(G.has(r)){if(Object.keys(e).length>0)throw new TypeError("Please use .pipe(options)`command` or .pipe($(options)`command`) instead of .pipe(options)($`command`).");return{destination:r,pipeOptions:n[0]}}throw new TypeError(`The first argument must be a template string, an options object, or an Execa subprocess: ${r}`)},Of=({options:e})=>({options:{...e,stdin:"pipe",piped:!0}}),PS=(e,t)=>{try{return{sourceStream:_e(e,t)}}catch(r){return{sourceError:r}}}});var Rf,MS,Qo,vf,ei=l(()=>{ft();zr();Rf=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n,fileDescriptors:o,sourceOptions:i,startTime:s})=>{let a=MS({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n});if(a!==void 0)throw Qo({error:a,fileDescriptors:o,sourceOptions:i,startTime:s})},MS=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n})=>{if(t!==void 0&&n!==void 0)return n;if(n!==void 0)return Ho(e),n;if(t!==void 0)return Vo(r),t},Qo=({error:e,fileDescriptors:t,sourceOptions:r,startTime:n})=>ke({error:e,command:vf,escapedCommand:vf,fileDescriptors:t,options:r,startTime:n,isSync:!1}),vf="source.pipe(destination)"});var Cf,Pf=l(()=>{Cf=async e=>{let[{status:t,reason:r,value:n=r},{status:o,reason:i,value:s=i}]=await e;if(s.pipedFrom.includes(n)||s.pipedFrom.push(n),o==="rejected")throw s;if(t==="rejected")throw n;return s}});var Mf,Lf,LS,BS,FS,Yr,$S,US,Bf=l(()=>{Mf=require("node:stream/promises");Wr();Kt();zr();Lf=(e,t,r)=>{let n=Yr.has(t)?BS(e,t):LS(e,t);return me(e,$S,r.signal),me(t,US,r.signal),FS(t),n},LS=(e,t)=>{let r=xe([e]);return He(r,t),Yr.set(t,r),r},BS=(e,t)=>{let r=Yr.get(t);return r.add(e),r},FS=async e=>{try{await(0,Mf.finished)(e,{cleanup:!0,readable:!1,writable:!0})}catch{}Yr.delete(e)},Yr=new WeakMap,$S=2,US=1});var Ff,$f,_S,Uf=l(()=>{Ff=require("node:util");ei();$f=(e,t)=>e===void 0?[]:[_S(e,t)],_S=async(e,{sourceStream:t,mergedStream:r,fileDescriptors:n,sourceOptions:o,startTime:i})=>{await(0,Ff.aborted)(e,t),await r.remove(t);let s=new Error("Pipe canceled by `unpipeSignal` option.");throw Qo({error:s,fileDescriptors:n,sourceOptions:o,startTime:i})}});var qr,NS,jS,_f=l(()=>{q();Tf();ei();Pf();Bf();Uf();qr=(e,...t)=>{if(w(t[0]))return qr.bind(void 0,{...e,boundOptions:{...e.boundOptions,...t[0]}});let{destination:r,...n}=If(e,...t),o=NS({...n,destination:r});return o.pipe=qr.bind(void 0,{...e,source:r,sourcePromise:o,boundOptions:{}}),o},NS=async({sourcePromise:e,sourceStream:t,sourceOptions:r,sourceError:n,destination:o,destinationStream:i,destinationError:s,unpipeSignal:a,fileDescriptors:c,startTime:f})=>{let u=jS(e,o);Rf({sourceStream:t,sourceError:n,destinationStream:i,destinationError:s,fileDescriptors:c,sourceOptions:r,startTime:f});let d=new AbortController;try{let p=Lf(t,i,d);return await Promise.race([Cf(u),...$f(a,{sourceStream:t,mergedStream:p,sourceOptions:r,fileDescriptors:c,startTime:f})])}finally{d.abort()}},jS=(e,t)=>Promise.allSettled([e,t])});var jf,kf,Kr,kS,ti,GS,Gf,ri,Nf,WS,zS,Jr=l(()=>{jf=require("node:events"),kf=require("node:stream");To();Mr();Po();Kr=({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:n,encoding:o,preserveNewlines:i})=>{let s=new AbortController;return kS(t,s),Gf({stream:e,controller:s,binary:r,shouldEncode:!e.readableObjectMode&&n,encoding:o,shouldSplit:!e.readableObjectMode,preserveNewlines:i})},kS=async(e,t)=>{try{await e}catch{}finally{t.abort()}},ti=({stream:e,onStreamEnd:t,lines:r,encoding:n,stripFinalNewline:o,allMixed:i})=>{let s=new AbortController;GS(t,s,e);let a=e.readableObjectMode&&!i;return Gf({stream:e,controller:s,binary:n==="buffer",shouldEncode:!a,encoding:n,shouldSplit:!a&&r,preserveNewlines:!o})},GS=async(e,t,r)=>{try{await e}catch{r.destroy()}finally{t.abort()}},Gf=({stream:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})=>{let a=(0,jf.on)(e,"data",{signal:t.signal,highWaterMark:Nf,highWatermark:Nf});return WS({onStdoutChunk:a,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s})},ri=(0,kf.getDefaultHighWaterMark)(!0),Nf=ri,WS=async function*({onStdoutChunk:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s}){let a=zS({binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:s});try{for await(let[c]of e)yield*be(c,a,0)}catch(c){if(!t.signal.aborted)throw c}finally{yield*pt(a)}},zS=({binary:e,shouldEncode:t,encoding:r,shouldSplit:n,preserveNewlines:o})=>[Lr(e,r,!t),Pr(e,o,!n,{})].filter(Boolean)});var Wf,zf,VS,HS,YS,ni,Vf,oi=l(()=>{Wf=require("node:timers/promises");xr();C();Lo();Jr();Se();dt();zf=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,buffer:o,maxBuffer:i,lines:s,allMixed:a,stripFinalNewline:c,verboseInfo:f,streamInfo:u})=>{let d=VS({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:a,verboseInfo:f,streamInfo:u});if(!o){await Promise.all([HS(e),d]);return}let p=Ao(c,r),m=ti({stream:e,onStreamEnd:t,lines:s,encoding:n,stripFinalNewline:p,allMixed:a}),[h]=await Promise.all([YS({stream:e,iterable:m,fdNumber:r,encoding:n,maxBuffer:i,lines:s}),d]);return h},VS=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:o,verboseInfo:i,streamInfo:{fileDescriptors:s}})=>{if(!Ur({stdioItems:s[r]?.stdioItems,encoding:n,verboseInfo:i,fdNumber:r}))return;let a=ti({stream:e,onStreamEnd:t,lines:!0,encoding:n,stripFinalNewline:!0,allMixed:o});await $u(a,e,r,i)},HS=async e=>{await(0,Wf.setImmediate)(),e.readableFlowing===null&&e.resume()},YS=async({stream:e,stream:{readableObjectMode:t},iterable:r,fdNumber:n,encoding:o,maxBuffer:i,lines:s})=>{try{return t||s?await yr(r,{maxBuffer:i}):o==="buffer"?new Uint8Array(await Sr(r,{maxBuffer:i})):await br(r,{maxBuffer:i})}catch(a){return Vf(yl({error:a,stream:e,readableObjectMode:t,lines:s,encoding:o,fdNumber:n}))}},ni=async e=>{try{return await e}catch(t){return Vf(t)}},Vf=({bufferedData:e})=>ki(e)?new Uint8Array(e):e});var Yf,wt,qS,KS,JS,XS,ZS,ii,Xr,Hf,Zr=l(()=>{Yf=require("node:stream/promises"),wt=async(e,t,r,{isSameDirection:n,stopOnExit:o=!1}={})=>{let i=qS(e,r),s=new AbortController;try{await Promise.race([...o?[r.exitPromise]:[],(0,Yf.finished)(e,{cleanup:!0,signal:s.signal})])}catch(a){i.stdinCleanedUp||XS(a,t,r,n)}finally{s.abort()}},qS=(e,{originalStreams:[t],subprocess:r})=>{let n={stdinCleanedUp:!1};return e===t&&KS(e,r,n),n},KS=(e,t,r)=>{let{_destroy:n}=e;e._destroy=(...o)=>{JS(t,r),n.call(e,...o)}},JS=({exitCode:e,signalCode:t},r)=>{(e!==null||t!==null)&&(r.stdinCleanedUp=!0)},XS=(e,t,r,n)=>{if(!ZS(e,t,r,n))throw e},ZS=(e,t,r,n=!0)=>r.propagating?Hf(e)||Xr(e):(r.propagating=!0,ii(r,t)===n?Hf(e):Xr(e)),ii=({fileDescriptors:e},t)=>t!=="all"&&e[t].direction==="input",Xr=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Hf=e=>e?.code==="EPIPE"});var qf,si,ai=l(()=>{oi();Zr();qf=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>e.stdio.map((c,f)=>si({stream:c,fdNumber:f,encoding:t,buffer:r[f],maxBuffer:n[f],lines:o[f],allMixed:!1,stripFinalNewline:i,verboseInfo:s,streamInfo:a})),si=async({stream:e,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:f})=>{if(!e)return;let u=wt(e,t,f);if(ii(f,t)){await u;return}let[d]=await Promise.all([zf({stream:e,onStreamEnd:u,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:s,stripFinalNewline:a,verboseInfo:c,streamInfo:f}),u]);return d}});var Kf,Jf,QS,ew,ci=l(()=>{Wr();ai();Kf=({stdout:e,stderr:t},{all:r})=>r&&(e||t)?xe([e,t].filter(Boolean)):void 0,Jf=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:s,streamInfo:a})=>si({...QS(e,r),fdNumber:"all",encoding:t,maxBuffer:n[1]+n[2],lines:o[1]||o[2],allMixed:ew(e),stripFinalNewline:i,verboseInfo:s,streamInfo:a}),QS=({stdout:e,stderr:t,all:r},[,n,o])=>{let i=n||o;return i?n?o?{stream:r,buffer:i}:{stream:e,buffer:i}:{stream:t,buffer:i}:{stream:r,buffer:i}},ew=({all:e,stdout:t,stderr:r})=>e&&t&&r&&t.readableObjectMode!==r.readableObjectMode});var Xf,Zf,Qf=l(()=>{Ce();ne();Xf=e=>Re(e,"ipc"),Zf=(e,t)=>{let r=Ft(e);j({type:"ipc",verboseMessage:r,fdNumber:"ipc",verboseInfo:t})}});var ed,td,rd=l(()=>{Se();Qf();Z();Uo();ed=async({subprocess:e,buffer:t,maxBuffer:r,ipc:n,ipcOutput:o,verboseInfo:i})=>{if(!n)return o;let s=Xf(i),a=X(t,"ipc"),c=X(r,"ipc");for await(let f of $o({anyProcess:e,channel:e.channel,isSubprocess:!1,ipc:n,shouldAwait:!1,reference:!0}))a&&(Sl(e,o,c),o.push(f)),s&&Zf(f,i);return o},td=async(e,t)=>(await Promise.allSettled([e]),t)});var nd,od,tw,rw,nw,id=l(()=>{nd=require("node:events");ye();Jn();kn();Kn();J();v();oi();rd();Qn();ci();ai();Fo();Zr();od=async({subprocess:e,options:{encoding:t,buffer:r,maxBuffer:n,lines:o,timeoutDuration:i,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,stripFinalNewline:f,ipc:u,ipcInput:d},context:p,verboseInfo:m,fileDescriptors:h,originalStreams:y,onInternalError:b,controller:S})=>{let E=Wu(e,p),T={originalStreams:y,fileDescriptors:h,subprocess:e,exitPromise:E,propagating:!1},L=qf({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:m,streamInfo:T}),Y=Jf({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:m,streamInfo:T}),te=[],de=ed({subprocess:e,buffer:r,maxBuffer:n,ipc:u,ipcOutput:te,verboseInfo:m}),Oe=tw(y,e,T),re=rw(h,T);try{return await Promise.race([Promise.all([{},Vu(E),Promise.all(L),Y,de,_c(e,d),...Oe,...re]),b,nw(e,S),...Lc(e,i,p,S),...Va({subprocess:e,cancelSignal:s,gracefulCancel:a,context:p,controller:S}),...Cc({subprocess:e,cancelSignal:s,gracefulCancel:a,forceKillAfterDelay:c,context:p,controller:S})])}catch(un){return p.terminationReason??="other",Promise.all([{error:un},E,Promise.all(L.map(Je=>ni(Je))),ni(Y),td(de,te),Promise.allSettled(Oe),Promise.allSettled(re)])}},tw=(e,t,r)=>e.map((n,o)=>n===t.stdio[o]?void 0:wt(n,o,r)),rw=(e,t)=>e.flatMap(({stdioItems:r},n)=>r.filter(({value:o,stream:i=o})=>N(i,{checkOpen:!1})&&!$(i)).map(({type:o,value:i,stream:s=i})=>wt(s,n,t,{isSameDirection:F.has(o),stopOnExit:o==="native"}))),nw=async(e,{signal:t})=>{let[r]=await(0,nd.once)(e,"error",{signal:t});throw r}});var sd,bt,Ye,Qr=l(()=>{Ue();sd=()=>({readableDestroy:new WeakMap,writableFinal:new WeakMap,writableDestroy:new WeakMap}),bt=(e,t,r)=>{let n=e[r];n.has(t)||n.set(t,[]);let o=n.get(t),i=k();return o.push(i),{resolve:i.resolve.bind(i),promises:o}},Ye=async({resolve:e,promises:t},r)=>{e();let[n]=await Promise.race([Promise.allSettled([!0,r]),Promise.all([!1,...t])]);return!n}});var li,ui,ad,fi,di,en,tn,pi=l(()=>{li=require("node:stream/promises");Zr();ui=async e=>{if(e!==void 0)try{await fi(e)}catch{}},ad=async e=>{if(e!==void 0)try{await di(e)}catch{}},fi=async e=>{await(0,li.finished)(e,{cleanup:!0,readable:!1,writable:!0})},di=async e=>{await(0,li.finished)(e,{cleanup:!0,readable:!0,writable:!1})},en=async(e,t)=>{if(await e,t)throw t},tn=(e,t,r)=>{r&&!Xr(r)?e.destroy(r):t&&e.destroy()}});var cd,ld,ud,mi,hi,gi,ow,yi,Si,fd,wi=l(()=>{cd=require("node:stream"),ld=require("node:util");he();se();Jr();Ue();Qr();pi();ud=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,binary:o=!0,preserveNewlines:i=!0}={})=>{let s=o||P.has(r),{subprocessStdout:a,waitReadableDestroy:c}=mi(e,n,t),{readableEncoding:f,readableObjectMode:u,readableHighWaterMark:d}=hi(a,s),{read:p,onStdoutDataDone:m}=gi({subprocessStdout:a,subprocess:e,binary:s,encoding:r,preserveNewlines:i}),h=new cd.Readable({read:p,destroy:(0,ld.callbackify)(Si.bind(void 0,{subprocessStdout:a,subprocess:e,waitReadableDestroy:c})),highWaterMark:d,objectMode:u,encoding:f});return yi({subprocessStdout:a,onStdoutDataDone:m,readable:h,subprocess:e}),h},mi=(e,t,r)=>{let n=_e(e,t),o=bt(r,n,"readableDestroy");return{subprocessStdout:n,waitReadableDestroy:o}},hi=({readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r},n)=>n?{readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r}:{readableEncoding:e,readableObjectMode:!0,readableHighWaterMark:ri},gi=({subprocessStdout:e,subprocess:t,binary:r,encoding:n,preserveNewlines:o})=>{let i=k(),s=Kr({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:!r,encoding:n,preserveNewlines:o});return{read(){ow(this,s,i)},onStdoutDataDone:i}},ow=async(e,t,r)=>{try{let{value:n,done:o}=await t.next();o?r.resolve():e.push(n)}catch{}},yi=async({subprocessStdout:e,onStdoutDataDone:t,readable:r,subprocess:n,subprocessStdin:o})=>{try{await di(e),await n,await ui(o),await t,r.readable&&r.push(null)}catch(i){await ui(o),fd(r,i)}},Si=async({subprocessStdout:e,subprocess:t,waitReadableDestroy:r},n)=>{await Ye(r,t)&&(fd(e,n),await en(t,n))},fd=(e,t)=>{tn(e,e.readable,t)}});var dd,bi,pd,xi,Di,iw,sw,Ei,Ai,md,Oi=l(()=>{dd=require("node:stream"),bi=require("node:util");se();Qr();pi();pd=({subprocess:e,concurrentStreams:t},{to:r}={})=>{let{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}=xi(e,r,t),s=new dd.Writable({...Di(n,e,o),destroy:(0,bi.callbackify)(Ai.bind(void 0,{subprocessStdin:n,subprocess:e,waitWritableFinal:o,waitWritableDestroy:i})),highWaterMark:n.writableHighWaterMark,objectMode:n.writableObjectMode});return Ei(n,s),s},xi=(e,t,r)=>{let n=qt(e,t),o=bt(r,n,"writableFinal"),i=bt(r,n,"writableDestroy");return{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}},Di=(e,t,r)=>({write:iw.bind(void 0,e),final:(0,bi.callbackify)(sw.bind(void 0,e,t,r))}),iw=(e,t,r,n)=>{e.write(t,r)?n():e.once("drain",n)},sw=async(e,t,r)=>{await Ye(r,t)&&(e.writable&&e.end(),await t)},Ei=async(e,t,r)=>{try{await fi(e),t.writable&&t.end()}catch(n){await ad(r),md(t,n)}},Ai=async({subprocessStdin:e,subprocess:t,waitWritableFinal:r,waitWritableDestroy:n},o)=>{await Ye(r,t),await Ye(n,t)&&(md(e,o),await en(t,o))},md=(e,t)=>{tn(e,e.writable,t)}});var hd,gd,yd,aw,Sd=l(()=>{hd=require("node:stream"),gd=require("node:util");he();wi();Oi();yd=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,to:o,binary:i=!0,preserveNewlines:s=!0}={})=>{let a=i||P.has(r),{subprocessStdout:c,waitReadableDestroy:f}=mi(e,n,t),{subprocessStdin:u,waitWritableFinal:d,waitWritableDestroy:p}=xi(e,o,t),{readableEncoding:m,readableObjectMode:h,readableHighWaterMark:y}=hi(c,a),{read:b,onStdoutDataDone:S}=gi({subprocessStdout:c,subprocess:e,binary:a,encoding:r,preserveNewlines:s}),E=new hd.Duplex({read:b,...Di(u,e,d),destroy:(0,gd.callbackify)(aw.bind(void 0,{subprocessStdout:c,subprocessStdin:u,subprocess:e,waitReadableDestroy:f,waitWritableFinal:d,waitWritableDestroy:p})),readableHighWaterMark:y,writableHighWaterMark:u.writableHighWaterMark,readableObjectMode:h,writableObjectMode:u.writableObjectMode,encoding:m});return yi({subprocessStdout:c,onStdoutDataDone:S,readable:E,subprocess:e,subprocessStdin:u}),Ei(u,E,c),E},aw=async({subprocessStdout:e,subprocessStdin:t,subprocess:r,waitReadableDestroy:n,waitWritableFinal:o,waitWritableDestroy:i},s)=>{await Promise.all([Si({subprocessStdout:e,subprocess:r,waitReadableDestroy:n},s),Ai({subprocessStdin:t,subprocess:r,waitWritableFinal:o,waitWritableDestroy:i},s)])}});var Ii,cw,wd=l(()=>{he();se();Jr();Ii=(e,t,{from:r,binary:n=!1,preserveNewlines:o=!1}={})=>{let i=n||P.has(t),s=_e(e,r),a=Kr({subprocessStdout:s,subprocess:e,binary:i,shouldEncode:!0,encoding:t,preserveNewlines:o});return cw(a,s,e)},cw=async function*(e,t,r){try{yield*e}finally{t.readable&&t.destroy(),await r}}});var bd,xd=l(()=>{Qr();wi();Oi();Sd();wd();bd=(e,{encoding:t})=>{let r=sd();e.readable=ud.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.writable=pd.bind(void 0,{subprocess:e,concurrentStreams:r}),e.duplex=yd.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.iterable=Ii.bind(void 0,e,t),e[Symbol.asyncIterator]=Ii.bind(void 0,e,t,{})}});var Dd,lw,uw,Ed=l(()=>{Dd=(e,t)=>{for(let[r,n]of uw){let o=n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}},lw=(async()=>{})().constructor.prototype,uw=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(lw,e)])});var Ad,Od,Id,fw,dw,pw,mw,hw,Td=l(()=>{Ad=require("node:events"),Od=require("node:child_process");xr();On();no();se();oo();No();ft();Ar();af();ff();dt();Sf();zt();Af();_f();ci();id();xd();Ue();Ed();Id=(e,t,r,n)=>{let{file:o,commandArguments:i,command:s,escapedCommand:a,startTime:c,verboseInfo:f,options:u,fileDescriptors:d}=fw(e,t,r),{subprocess:p,promise:m}=pw({file:o,commandArguments:i,options:u,startTime:c,verboseInfo:f,command:s,escapedCommand:a,fileDescriptors:d});return p.pipe=qr.bind(void 0,{source:p,sourcePromise:m,boundOptions:{},createNested:n}),Dd(p,m),G.set(p,{options:u,fileDescriptors:d}),p},fw=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:s}=_t(e,t,r),{file:a,commandArguments:c,options:f}=fr(e,t,r),u=dw(f),d=uf(u,s);return{file:a,commandArguments:c,command:n,escapedCommand:o,startTime:i,verboseInfo:s,options:u,fileDescriptors:d}},dw=({timeout:e,signal:t,...r})=>{if(t!==void 0)throw new TypeError('The "signal" option has been renamed to "cancelSignal" instead.');return{...r,timeoutDuration:e}},pw=({file:e,commandArguments:t,options:r,startTime:n,verboseInfo:o,command:i,escapedCommand:s,fileDescriptors:a})=>{let c;try{c=(0,Od.spawn)(...dr(e,t,r))}catch(h){return sf({error:h,command:i,escapedCommand:s,fileDescriptors:a,options:r,startTime:n,verboseInfo:o})}let f=new AbortController;(0,Ad.setMaxListeners)(Number.POSITIVE_INFINITY,f.signal);let u=[...c.stdio];yf(c,a,f),Ef(c,r,f);let d={},p=k();c.kill=Ga.bind(void 0,{kill:c.kill.bind(c),options:r,onInternalError:p,context:d,controller:f}),c.all=Kf(c,r),bd(c,r),tf(c,r);let m=mw({subprocess:c,options:r,startTime:n,verboseInfo:o,fileDescriptors:a,originalStreams:u,command:i,escapedCommand:s,context:d,onInternalError:p,controller:f});return{subprocess:c,promise:m}},mw=async({subprocess:e,options:t,startTime:r,verboseInfo:n,fileDescriptors:o,originalStreams:i,command:s,escapedCommand:a,context:c,onInternalError:f,controller:u})=>{let[d,[p,m],h,y,b]=await od({subprocess:e,options:t,context:c,verboseInfo:n,fileDescriptors:o,originalStreams:i,onInternalError:f,controller:u});u.abort(),f.resolve();let S=h.map((L,Y)=>ee(L,t,Y)),E=ee(y,t,"all"),T=hw({errorInfo:d,exitCode:p,signal:m,stdio:S,all:E,ipcOutput:b,context:c,options:t,command:s,escapedCommand:a,startTime:r});return Ge(T,n,t)},hw=({errorInfo:e,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,context:s,options:a,command:c,escapedCommand:f,startTime:u})=>"error"in e?ut({error:e.error,command:c,escapedCommand:f,timedOut:s.terminationReason==="timeout",isCanceled:s.terminationReason==="cancel"||s.terminationReason==="gracefulCancel",isGracefullyCanceled:s.terminationReason==="gracefulCancel",isMaxBuffer:e.error instanceof W,isForcefullyTerminated:s.isForcefullyTerminated,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,options:a,startTime:u,isSync:!1}):Er({command:c,escapedCommand:f,stdio:n,all:o,ipcOutput:i,options:a,startTime:u})});var rn,gw,yw,vd=l(()=>{q();Z();rn=(e,t)=>{let r=Object.fromEntries(Object.entries(t).map(([n,o])=>[n,gw(n,e[n],o)]));return{...e,...r}},gw=(e,t,r)=>yw.has(e)&&w(t)&&w(r)?{...t,...r}:r,yw=new Set(["env",...Sn])});var ue,Sw,ww,Rd=l(()=>{q();mn();Ji();Ju();Td();vd();ue=(e,t,r,n)=>{let o=(s,a,c)=>ue(s,a,r,c),i=(...s)=>Sw({mapArguments:e,deepOptions:r,boundOptions:t,setBoundExeca:n,createNested:o},...s);return n!==void 0&&n(i,o,t),i},Sw=({mapArguments:e,deepOptions:t={},boundOptions:r={},setBoundExeca:n,createNested:o},i,...s)=>{if(w(i))return o(e,rn(r,i),n);let{file:a,commandArguments:c,options:f,isSync:u}=ww({mapArguments:e,firstArgument:i,nextArguments:s,deepOptions:t,boundOptions:r});return u?Ku(a,c,f):Id(a,c,f,o)},ww=({mapArguments:e,firstArgument:t,nextArguments:r,deepOptions:n,boundOptions:o})=>{let i=qi(t)?Ki(t,r):[t,...r],[s,a,c]=At(...i),f=rn(rn(n,o),c),{file:u=s,commandArguments:d=a,options:p=f,isSync:m=!1}=e({file:s,commandArguments:a,options:f});return{file:u,commandArguments:d,options:p,isSync:m}}});var Cd,Pd,Md,bw,xw,Ld=l(()=>{Cd=({file:e,commandArguments:t})=>Md(e,t),Pd=({file:e,commandArguments:t})=>({...Md(e,t),isSync:!0}),Md=(e,t)=>{if(t.length>0)throw new TypeError(`The command and its arguments must be passed as a single string: ${e} ${t}.`);let[r,...n]=bw(e);return{file:r,commandArguments:n}},bw=e=>{if(typeof e!="string")throw new TypeError(`The command must be a string: ${String(e)}.`);let t=e.trim();if(t==="")return[];let r=[];for(let n of t.split(xw)){let o=r.at(-1);o&&o.endsWith("\\")?r[r.length-1]=`${o.slice(0,-1)} ${n}`:r.push(n)}return r},xw=/ +/g});var Bd,Fd,Dw,$d,Ew,Ud,_d=l(()=>{Bd=(e,t,r)=>{e.sync=t(Dw,r),e.s=e.sync},Fd=({options:e})=>$d(e),Dw=({options:e})=>({...$d(e),isSync:!0}),$d=e=>({options:{...Ew(e),...e}}),Ew=({input:e,inputFile:t,stdio:r})=>e===void 0&&t===void 0&&r===void 0?{stdin:"inherit"}:{},Ud={preferLocal:!0}});var A,hR,gR,yR,SR,wR,bR,xR,DR,ER,Ti=l(()=>{Rd();Ld();Zn();_d();No();A=ue(()=>({})),hR=ue(()=>({isSync:!0})),gR=ue(Cd),yR=ue(Pd),SR=ue(Bc),wR=ue(Fd,{},Ud,Bd),{sendMessage:bR,getOneMessage:xR,getEachMessage:DR,getCancelSignal:ER}=rf()});var Nd={};fn(Nd,{macosAudioAPI:()=>Ow});async function M(){vi.default.existsSync(I)||(vi.default.copyFileSync(Aw,I),await A("chmod",["+x",I]))}function qe({stderr:e}){if(e)throw new Error(e)}function Ee({stdout:e,stderr:t}){return qe({stderr:t}),JSON.parse(e)}var Ri,Ci,vi,Aw,I,Ow,jd=l(()=>{"use strict";Ri=O(require("path"));Ti();Ci=require("@raycast/api"),vi=O(require("fs")),Aw=Ri.default.join(Ci.environment.assetsPath,"audio-devices"),I=Ri.default.join(Ci.environment.supportPath,"audio-devices");Ow={async getAllDevices(){return await M(),Ee(await A(I,["list","--json"]))},async getInputDevices(){return await M(),Ee(await A(I,["list","--input","--json"]))},async getOutputDevices(){return await M(),Ee(await A(I,["list","--output","--json"]))},async getDefaultOutputDevice(){return await M(),Ee(await A(I,["output","get","--json"]))},async getDefaultInputDevice(){return await M(),Ee(await A(I,["input","get","--json"]))},async getDefaultSystemDevice(){return await M(),Ee(await A(I,["system","get","--json"]))},async setDefaultOutputDevice(e){return await M(),qe(await A(I,["output","set",e]))},async setDefaultInputDevice(e){return await M(),qe(await A(I,["input","set",e]))},async setDefaultSystemDevice(e){return await M(),qe(await A(I,["system","set",e]))},async getOutputDeviceVolume(e){await M();let{stdout:t,stderr:r}=await A(I,["volume","get",e]);return r?void 0:parseFloat(t)},async setOutputDeviceVolume(e,t){return await M(),qe(await A(I,["volume","set",e,`${t}`]))},async createAggregateDevice(e,t,r,n){return await M(),Ee(await A(I,["aggregate","create","--json",n?.multiOutput?"--multi-output":"",e,t,...r||[]].filter(Boolean)))},async destroyAggregateDevice(e){return await M(),qe(await A(I,["aggregate","destroy",e]))}}});var Gd={};fn(Gd,{windowsAudioAPI:()=>Rw});async function kd(){if(xt)return xt;try{await A("pwsh",["-NoProfile","-Command","exit 0"]),xt="pwsh"}catch{xt="powershell"}return xt}function Iw(e){return e.replace(/\x1B\[[0-9;]*m/g,"")}async function fe(e){let t=await kd();try{let{stdout:r}=await A(t,["-NoProfile","-Command",e]);return Iw(r)}catch(r){let n=r.stderr||r.message||"PowerShell command failed";throw console.error("PowerShell command failed",{command:e,errorMessage:n}),new Error(n)}}function an(){return nn||(nn=Tw().catch(e=>{throw nn=null,e})),nn}async function Tw(){let e=!1;try{let t=await fe("Get-Module -ListAvailable -Name AudioDeviceCmdlets | Select-Object -First 1 | ConvertTo-Json");e=!!(t&&t.trim()!==""&&t.trim()!=="null")}catch{e=!1}if(!e){(0,H.showToast)({style:H.Toast.Style.Animated,title:"Installing AudioDeviceCmdlets",message:"This may take a moment..."});try{let r=await kd()==="pwsh"?"Install-PSResource -Name AudioDeviceCmdlets -Scope CurrentUser -TrustRepository -Quiet *>&1 | Out-String":"Set-PSRepository -Name PSGallery -InstallationPolicy Trusted; Install-Module -Name AudioDeviceCmdlets -Scope CurrentUser -Force -SkipPublisherCheck *>&1 | Out-String",n=await fe(r);n&&n.trim()&&console.log("Install-Module output:",n);let o=await fe("Get-Module -ListAvailable -Name AudioDeviceCmdlets | Select-Object -First 1 | ConvertTo-Json");if(!o||o.trim()===""||o.trim()==="null"){let i=await fe("$env:PSModulePath"),s=`Module not found after install. PSModulePath: ${i}`;throw console.error("AudioDeviceCmdlets missing after install",{modulePath:i,installOutput:n}),(0,H.showToast)({style:H.Toast.Style.Failure,title:"AudioDeviceCmdlets Install Failed",message:s}),new Error(s)}(0,H.showToast)({style:H.Toast.Style.Success,title:"AudioDeviceCmdlets Installed"})}catch(t){let r=t.message||"Unknown error";throw console.error("AudioDeviceCmdlets install failed",r),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Installation Failed",message:r}),t}}}function cn(e){return`$WarningPreference = 'SilentlyContinue'; Import-Module AudioDeviceCmdlets -ErrorAction Stop -WarningAction SilentlyContinue; ${e}`}async function on(e){await an();let t="Get-AudioDevice -List";e&&(t=`Get-AudioDevice -List | Where-Object { $_.Type -eq '${e}' }`);let r=await fe(cn(`(${t} | ConvertTo-Json -Depth 3)`)),n=JSON.parse(r);return Array.isArray(n)?n:[n]}function Ke(e,t){return{id:e.ID,uid:e.ID,name:e.Name,isInput:t==="input",isOutput:t==="output",transportType:vw(e.Name),index:e.Index,isDefault:e.Default,isCommunication:e.DefaultComm}}function vw(e){let t={"realtek digital":"spdif","digital output":"spdif","steam streaming":"virtual",nvidia:"hdmi",headphones:"headphones",headset:"headphones",earbuds:"headphones",airpods:"headphones",microphone:"microphone",speakers:"speakers",hdmi:"hdmi",displayport:"displayport",usb:"usb",bluetooth:"bluetooth",mic:"microphone",speaker:"speakers",spdif:"spdif",optical:"spdif",dp:"displayport",virtual:"virtual"},r=e.toLowerCase();for(let[n,o]of Object.entries(t))if(r.includes(n))return o;return"speakers"}async function sn(e,t,r=!1){await an();let o=`Set-AudioDevice -ID '${e.replace(/'/g,"''")}' ${r?"-CommunicationOnly":"-DefaultOnly"}`;await fe(cn(o))}var H,xt,nn,Rw,Wd=l(()=>{"use strict";Ti();H=require("@raycast/api"),xt=null;nn=null;Rw={async getAllDevices(){let e=await on("Playback"),t=await on("Recording"),r=e.map(o=>Ke(o,"output")),n=t.map(o=>Ke(o,"input"));return[...r,...n]},async getInputDevices(){return(await on("Recording")).map(t=>Ke(t,"input"))},async getOutputDevices(){return(await on("Playback")).map(t=>Ke(t,"output"))},async getDefaultOutputDevice(){await an();let t=await fe(cn("(Get-AudioDevice -List | Where-Object { $_.Type -eq 'Playback' -and $_.Default -eq $true } | ConvertTo-Json)"));if(!t||t.trim()===""||t==="null")throw new Error("No default output device found");let r=JSON.parse(t);if(!r||!r.ID)throw new Error("No valid default output device found");return Ke(r,"output")},async getDefaultInputDevice(){await an();let t=await fe(cn("(Get-AudioDevice -List | Where-Object { $_.Type -eq 'Recording' -and $_.Default -eq $true } | ConvertTo-Json)"));if(!t||t.trim()===""||t==="null")throw new Error("No default input device found");let r=JSON.parse(t);if(!r||!r.ID)throw new Error("No valid default input device found");return Ke(r,"input")},async setDefaultOutputDevice(e){await sn(e,"output",!1)},async setDefaultInputDevice(e){await sn(e,"input",!1)},async setDefaultCommunicationOutputDevice(e){await sn(e,"output",!0)},async setDefaultCommunicationInputDevice(e){await sn(e,"input",!0)},async getOutputDeviceVolume(){},async setOutputDeviceVolume(){return Promise.resolve()}}});var Yw={};fn(Yw,{default:()=>ap});module.exports=pp(Yw);var D=require("@raycast/api");var Pi=process.platform==="win32"?"Windows":"macOS",zd=Pi==="macOS",Vd=Pi==="Windows",Dt=null;async function Hd(){if(Dt)return Dt;if(zd){let{macosAudioAPI:e}=await Promise.resolve().then(()=>(jd(),Nd));Dt=e}else if(Vd){let{windowsAudioAPI:e}=await Promise.resolve().then(()=>(Wd(),Gd));Dt=e}else throw new Error(`Unsupported platform: ${Pi}`);return Dt}var Mi=null;async function Ae(){return Mi||(Mi=await Hd()),Mi}async function Yd(){return(await Ae()).getInputDevices()}async function qd(){return(await Ae()).getOutputDevices()}async function Kd(){return(await Ae()).getDefaultOutputDevice()}async function Jd(){return(await Ae()).getDefaultInputDevice()}async function Xd(e){return(await Ae()).setDefaultOutputDevice(e)}async function Zd(e){return(await Ae()).setDefaultInputDevice(e)}async function Qd(e){let t=await Ae();return t.setDefaultSystemDevice?t.setDefaultSystemDevice(e):Promise.resolve()}var ep=require("@raycast/api");async function tp(e){let{systemOutput:t}=(0,ep.getPreferenceValues)();await Xd(e),t&&await Qd(e)}var Li={input:"autoSwitchInputEnabled",output:"autoSwitchOutputEnabled"};var ln=require("@raycast/api"),Cw="disabledDevices",Pw="hiddenDevices";var rp={input:"hiddenDevicesInput",output:"hiddenDevicesOutput"};var Mw="deviceOrderInput",Lw="deviceOrderOutput";function np(e){if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}async function Bi(e){return np(await ln.LocalStorage.getItem(e))}async function Bw(e,t){await ln.LocalStorage.setItem(e,JSON.stringify(t))}function Fw(...e){return Array.from(new Set(e.flat()))}async function $w(e){let t=await ln.LocalStorage.getItem(rp[e]);if(t!=null)return np(t);let r=await Bi(Pw),n=await Bi(Cw),o=Fw(r,n);return o.length>0&&await Bw(rp[e],o),o}async function op(e){return $w(e)}async function Fi(e){return Bi(e==="input"?Mw:Lw)}function Uw(e,t){let r=t.map(i=>i.uid),n=e.filter(i=>r.includes(i)),o=r.filter(i=>!n.includes(i));return[...n,...o]}function $i(e,t){let r=Uw(e,t),n=new Map(t.map(o=>[o.uid,o]));return r.map(o=>n.get(o)).filter(Boolean)}var _w=20,Nw=1e3,ip={input:"autoSwitchLastRunInput",output:"autoSwitchLastRunOutput"};async function jw(e){let t=await D.LocalStorage.getItem(ip[e]),r=t?Number(t):void 0;if(!r||!Number.isFinite(r))return!1;let n=_w*Nw;return Date.now()-r<n}async function kw(e){await D.LocalStorage.setItem(ip[e],String(Date.now()))}async function Gw(e){return await D.LocalStorage.getItem(Li[e])==="true"}async function Ww(e,t){await D.LocalStorage.setItem(Li[e],t?"true":"false")}async function zw(e){let t=await Yd(),r=await Fi("input"),n=new Set(e),i=$i(r,t).filter(a=>!n.has(a.uid))[0];return!i||(await Jd()).uid===i.uid?!1:(await Zd(i.id),!0)}async function Vw(e){let t=await qd(),r=await Fi("output"),n=new Set(e),i=$i(r,t).filter(a=>!n.has(a.uid))[0];return!i||(await Kd()).uid===i.uid?!1:(await tp(i.id),!0)}async function Hw(e){let t=await op(e);return e==="input"?await zw(t):await Vw(t)}async function sp(e){let t=D.environment.launchType===D.LaunchType.Background,r=await Gw(e);if(t)if(r)await(0,D.updateCommandMetadata)({subtitle:"Enabled"});else{await(0,D.updateCommandMetadata)({subtitle:"Disabled"});return}else{let n=!r;if(await Ww(e,n),await(0,D.updateCommandMetadata)({subtitle:n?"Enabled":"Disabled"}),await(0,D.showHUD)(n?"Auto switch enabled":"Auto switch disabled"),!n)return}try{if(t&&await jw(e))return;await Hw(e),t&&await kw(e)}catch(n){t||await(0,D.showToast)(D.Toast.Style.Failure,`Auto switch ${e==="input"?"input":"output"} failed`,String(n))}}async function ap(){await sp("input")}
