{
  "version": 3,
  "sources": ["../src/favourite.tsx", "../src/utils.tsx", "../node_modules/run-applescript/index.js"],
  "sourcesContent": ["import { getPreferenceValues, showHUD, showToast, Toast } from \"@raycast/api\";\nimport { setOutputDevice } from \"./utils\";\n\nexport default async () => {\n  const preferences = getPreferenceValues();\n  if (preferences.favourite != null && preferences.favourite !== \"\") {\n    try {\n      await setOutputDevice(preferences.favourite);\n      await showHUD(`Active output audio device set to ${preferences.favourite}`);\n    } catch (error) {\n      console.error(error);\n      await showToast({\n        style: Toast.Style.Failure,\n        title: \"Favourite output audio device could not be set\",\n      });\n    }\n  } else {\n    await showToast({\n      style: Toast.Style.Failure,\n      title: \"No favourite output audio device specified\",\n    });\n  }\n};\n", "import { environment } from \"@raycast/api\";\nimport { runAppleScript } from \"run-applescript\";\n\nfunction sliceIntoChunks(arr: Array<string>, chunkSize: number): Array<Array<string>> {\n  const res = [];\n  for (let i = 0; i < arr.length; i += chunkSize) {\n    const chunk = arr.slice(i, i + chunkSize);\n    res.push(chunk);\n  }\n  return res;\n}\n\nexport async function getOutputDevices() {\n  const stringList = await runAppleScript(`\n    set devices to {}\n\n    tell application \"System Preferences\"\n      reveal pane id \"com.apple.preference.sound\"\n    end tell\n    tell application \"System Events\"\n      tell application process \"System Preferences\"\n        repeat until exists tab group 1 of window \"Sound\"\n        end repeat\n        tell tab group 1 of window \"Sound\"\n          click radio button \"Output\"\n          tell table 1 of scroll area 1\n            set selected_row to (first UI element whose selected is true)\n            set currentOutput to value of text field 1 of selected_row as text\n            \n            repeat with r in rows\n              try\n                set deviceName to value of text field 1 of r as text\n                set deviceType to value of text field 2 of r as text\n                set end of devices to { deviceName, deviceType }\n              end try\n            end repeat\n          end tell\n        end tell\n      end tell\n    end tell\n\n    if application \"System Preferences\" is running then\n      tell application \"System Preferences\" to quit\n    end if\n    \n    return [ devices, \"currentOutput\", currentOutput ]\n  `);\n\n  const list = stringList.split(\", \");\n\n  const currentOutputSeparator = list.indexOf(\"currentOutput\");\n  const currentOutput = list[currentOutputSeparator + 1];\n\n  return sliceIntoChunks(list.slice(0, currentOutputSeparator), 2).map(([name, type]) => ({\n    name,\n    type,\n    selected: name === currentOutput,\n  }));\n}\n\nexport async function setOutputDevice(item: string) {\n  await runAppleScript(`\n    tell application \"System Preferences\"\n      reveal pane id \"com.apple.preference.sound\"\n    end tell\n    tell application \"System Events\"\n      tell application process \"System Preferences\"\n        repeat until exists tab group 1 of window \"Sound\"\n        end repeat\n        tell tab group 1 of window \"Sound\"\n          click radio button \"Output\"\n          tell table 1 of scroll area 1\n            select (row 1 where value of text field 1 is \"${item}\")\n          end tell\n        end tell\n      end tell\n    end tell\n\n    if application \"System Preferences\" is running then\n      tell application \"System Preferences\" to quit\n    end if\n  `);\n}\n\n/**\n * Create a deep link to this extension.\n * */\nexport const createDeepLink = function <T>(command: string, context?: T) {\n  const protocol = environment.raycastVersion.includes(\"alpha\") ? \"raycastinternal://\" : \"raycast://\";\n  const deeplink = `${protocol}extensions/benvp/audio-device/${command}`;\n\n  if (context) {\n    const payload = encodeURIComponent(JSON.stringify(context));\n    return `${deeplink}?context=${payload}`;\n  }\n\n  return deeplink;\n};\n", "import process from 'node:process';\nimport {promisify} from 'node:util';\nimport {execFile, execFileSync} from 'node:child_process';\n\nconst execFileAsync = promisify(execFile);\n\nexport async function runAppleScript(script, {humanReadableOutput = true, signal} = {}) {\n\tif (process.platform !== 'darwin') {\n\t\tthrow new Error('macOS only');\n\t}\n\n\tconst outputArguments = humanReadableOutput ? [] : ['-ss'];\n\n\tconst execOptions = {};\n\tif (signal) {\n\t\texecOptions.signal = signal;\n\t}\n\n\tconst {stdout} = await execFileAsync('osascript', ['-e', script, outputArguments], execOptions);\n\treturn stdout.trim();\n}\n\nexport function runAppleScriptSync(script, {humanReadableOutput = true} = {}) {\n\tif (process.platform !== 'darwin') {\n\t\tthrow new Error('macOS only');\n\t}\n\n\tconst outputArguments = humanReadableOutput ? [] : ['-ss'];\n\n\tconst stdout = execFileSync('osascript', ['-e', script, ...outputArguments], {\n\t\tencoding: 'utf8',\n\t\tstdio: ['ignore', 'pipe', 'ignore'],\n\t\ttimeout: 500,\n\t});\n\n\treturn stdout.trim();\n}\n"],
  "mappings": "0jBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA+D,wBCA/D,IAAAC,EAA4B,wBCA5B,IAAAC,EAAoB,6BACpBC,EAAwB,qBACxBC,EAAqC,8BAE/BC,KAAgB,aAAU,UAAQ,EAExC,eAAsBC,EAAeC,EAAQ,CAAC,oBAAAC,EAAsB,GAAM,OAAAC,CAAM,EAAI,CAAC,EAAG,CACvF,GAAI,EAAAC,QAAQ,WAAa,SACxB,MAAM,IAAI,MAAM,YAAY,EAG7B,IAAMC,EAAkBH,EAAsB,CAAC,EAAI,CAAC,KAAK,EAEnDI,EAAc,CAAC,EACjBH,IACHG,EAAY,OAASH,GAGtB,GAAM,CAAC,OAAAI,CAAM,EAAI,MAAMR,EAAc,YAAa,CAAC,KAAME,EAAQI,CAAe,EAAGC,CAAW,EAC9F,OAAOC,EAAO,KAAK,CACpB,CDwCA,eAAsBC,EAAgBC,EAAc,CAClD,MAAMC,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAWqCD,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAS7D,CACH,CD/EA,IAAOE,EAAQ,SAAY,CACzB,IAAMC,KAAc,uBAAoB,EACxC,GAAIA,EAAY,WAAa,MAAQA,EAAY,YAAc,GAC7D,GAAI,CACF,MAAMC,EAAgBD,EAAY,SAAS,EAC3C,QAAM,WAAQ,qCAAqCA,EAAY,SAAS,EAAE,CAC5E,OAASE,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnB,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,gDACT,CAAC,CACH,MAEA,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,4CACT,CAAC,CAEL",
  "names": ["favourite_exports", "__export", "favourite_default", "__toCommonJS", "import_api", "import_api", "import_node_process", "import_node_util", "import_node_child_process", "execFileAsync", "runAppleScript", "script", "humanReadableOutput", "signal", "process", "outputArguments", "execOptions", "stdout", "setOutputDevice", "item", "runAppleScript", "favourite_default", "preferences", "setOutputDevice", "error"]
}
