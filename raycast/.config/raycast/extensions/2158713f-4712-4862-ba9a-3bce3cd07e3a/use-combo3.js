"use strict";var tp=Object.create;var Dt=Object.defineProperty;var rp=Object.getOwnPropertyDescriptor;var np=Object.getOwnPropertyNames;var op=Object.getPrototypeOf,ip=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(e&&(t=e(e=0)),t);var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),hn=(e,t)=>{for(var r in t)Dt(e,r,{get:t[r],enumerable:!0})},Fi=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of np(t))!ip.call(e,o)&&o!==r&&Dt(e,o,{get:()=>t[o],enumerable:!(n=rp(t,o))||n.enumerable});return e};var $=(e,t,r)=>(r=e!=null?tp(op(e)):{},Fi(t||!e||!e.__esModule?Dt(r,"default",{value:e,enumerable:!0}):r,e)),ap=e=>Fi(Dt({},"__esModule",{value:!0}),e);function S(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}var q=l(()=>{});var ji,Ie,sp,gn,bn,Oe=l(()=>{ji=require("node:url"),Ie=(e,t)=>{let r=bn(sp(e));if(typeof r!="string")throw new TypeError(`${t} must be a string or a file URL: ${r}.`);return r},sp=e=>gn(e)?e.toString():e,gn=e=>typeof e!="string"&&e&&Object.getPrototypeOf(e)===String.prototype,bn=e=>e instanceof URL?(0,ji.fileURLToPath)(e):e});var Ot,yn=l(()=>{q();Oe();Ot=(e,t=[],r={})=>{let n=Ie(e,"First argument"),[o,i]=S(t)?[[],t]:[t,r];if(!Array.isArray(o))throw new TypeError(`Second argument must be either an array of arguments or an options object: ${o}`);if(o.some(c=>typeof c=="object"&&c!==null))throw new TypeError(`Second argument must be an array of strings: ${o}`);let a=o.map(String),s=a.find(c=>c.includes("\0"));if(s!==void 0)throw new TypeError(`Arguments cannot contain null bytes ("\\0"): ${s}`);if(!S(i))throw new TypeError(`Last argument must be an options object: ${i}`);return[n,a,i]}});var Wi,zi,Gi,E,K,cp,Vi,lp,kt,Hi,up,Qe,fp,wn,dp,k=l(()=>{Wi=require("node:string_decoder"),{toString:zi}=Object.prototype,Gi=e=>zi.call(e)==="[object ArrayBuffer]",E=e=>zi.call(e)==="[object Uint8Array]",K=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),cp=new TextEncoder,Vi=e=>cp.encode(e),lp=new TextDecoder,kt=e=>lp.decode(e),Hi=(e,t)=>up(e,t).join(""),up=(e,t)=>{if(t==="utf8"&&e.every(i=>typeof i=="string"))return e;let r=new Wi.StringDecoder(t),n=e.map(i=>typeof i=="string"?Vi(i):i).map(i=>r.write(i)),o=r.end();return o===""?n:[...n,o]},Qe=e=>e.length===1&&E(e[0])?e[0]:wn(fp(e)),fp=e=>e.map(t=>typeof t=="string"?Vi(t):t),wn=e=>{let t=new Uint8Array(dp(e)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t},dp=e=>{let t=0;for(let r of e)t+=r.length;return t}});var Ji,Zi,Xi,pp,mp,Yi,hp,qi,Ki,gp,Qi=l(()=>{Ji=require("node:child_process");q();k();Zi=e=>Array.isArray(e)&&Array.isArray(e.raw),Xi=(e,t)=>{let r=[];for(let[i,a]of e.entries())r=pp({templates:e,expressions:t,tokens:r,index:i,template:a});if(r.length===0)throw new TypeError("Template script must not be empty");let[n,...o]=r;return[n,o,{}]},pp=({templates:e,expressions:t,tokens:r,index:n,template:o})=>{if(o===void 0)throw new TypeError(`Invalid backslash sequence: ${e.raw[n]}`);let{nextTokens:i,leadingWhitespaces:a,trailingWhitespaces:s}=mp(o,e.raw[n]),c=qi(r,i,a);if(n===t.length)return c;let f=t[n],u=Array.isArray(f)?f.map(d=>Ki(d)):[Ki(f)];return qi(c,u,s)},mp=(e,t)=>{if(t.length===0)return{nextTokens:[],leadingWhitespaces:!1,trailingWhitespaces:!1};let r=[],n=0,o=Yi.has(t[0]);for(let a=0,s=0;a<e.length;a+=1,s+=1){let c=t[s];if(Yi.has(c))n!==a&&r.push(e.slice(n,a)),n=a+1;else if(c==="\\"){let f=t[s+1];f===`
`?(a-=1,s+=1):f==="u"&&t[s+2]==="{"?s=t.indexOf("}",s+3):s+=hp[f]??1}}let i=n===e.length;return i||r.push(e.slice(n)),{nextTokens:r,leadingWhitespaces:o,trailingWhitespaces:i}},Yi=new Set([" ","	","\r",`
`]),hp={x:3,u:5},qi=(e,t,r)=>r||e.length===0||t.length===0?[...e,...t]:[...e.slice(0,-1),`${e.at(-1)}${t[0]}`,...t.slice(1)],Ki=e=>{let t=typeof e;if(t==="string")return e;if(t==="number")return String(e);if(S(e)&&("stdout"in e||"isMaxBuffer"in e))return gp(e);throw e instanceof Ji.ChildProcess||Object.prototype.toString.call(e)==="[object Promise]"?new TypeError("Unexpected subprocess in template expression. Please use ${await subprocess} instead of ${subprocess}."):new TypeError(`Unexpected "${t}" in template expression`)},gp=({stdout:e})=>{if(typeof e=="string")return e;if(E(e))return kt(e);throw e===void 0?new TypeError(`Missing result.stdout in template expression. This is probably due to the previous subprocess' "stdout" option.`):new TypeError(`Unexpected "${typeof e}" stdout in template expression`)}});var Rt,_,Pt,M,Ct,J=l(()=>{Rt=$(require("node:process"),1),_=e=>Pt.includes(e),Pt=[Rt.default.stdin,Rt.default.stdout,Rt.default.stderr],M=["stdin","stdout","stderr"],Ct=e=>M[e]??`stdio[${e}]`});var ta,ra,Sn,bp,yp,wp,Sp,ea,xp,xn,$p,Ep,vp,Ap,$n,Z,X=l(()=>{ta=require("node:util");q();J();ra=e=>{let t={...e};for(let r of $n)t[r]=Sn(e,r);return t},Sn=(e,t)=>{let r=Array.from({length:bp(e)+1}),n=yp(e[t],r,t);return Ep(n,t)},bp=({stdio:e})=>Array.isArray(e)?Math.max(e.length,M.length):M.length,yp=(e,t,r)=>S(e)?wp(e,t,r):t.fill(e),wp=(e,t,r)=>{for(let n of Object.keys(e).sort(Sp))for(let o of xp(n,r,t))t[o]=e[n];return t},Sp=(e,t)=>ea(e)<ea(t)?1:-1,ea=e=>e==="stdout"||e==="stderr"?0:e==="all"?2:1,xp=(e,t,r)=>{if(e==="ipc")return[r.length-1];let n=xn(e);if(n===void 0||n===0)throw new TypeError(`"${t}.${e}" is invalid.
It must be "${t}.stdout", "${t}.stderr", "${t}.all", "${t}.ipc", or "${t}.fd3", "${t}.fd4" (and so on).`);if(n>=r.length)throw new TypeError(`"${t}.${e}" is invalid: that file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);return n==="all"?[1,2]:[n]},xn=e=>{if(e==="all")return e;if(M.includes(e))return M.indexOf(e);let t=$p.exec(e);if(t!==null)return Number(t[1])},$p=/^fd(\d+)$/,Ep=(e,t)=>e.map(r=>r===void 0?Ap[t]:r),vp=(0,ta.debuglog)("execa").enabled?"full":"none",Ap={lines:!1,buffer:!0,maxBuffer:1e3*1e3*100,verbose:vp,stripFinalNewline:!0},$n=["lines","buffer","maxBuffer","verbose","stripFinalNewline"],Z=(e,t)=>t==="ipc"?e.at(-1):e[t]});var ke,Re,na,En,Dp,Mt,Ut,ne=l(()=>{X();ke=({verbose:e},t)=>En(e,t)!=="none",Re=({verbose:e},t)=>!["none","short"].includes(En(e,t)),na=({verbose:e},t)=>{let r=En(e,t);return Mt(r)?r:void 0},En=(e,t)=>t===void 0?Dp(e):Z(e,t),Dp=e=>e.find(t=>Mt(t))??Ut.findLast(t=>e.includes(t)),Mt=e=>typeof e=="function",Ut=["none","short","full"]});var oa,ia,aa,et,sa,Tp,Ip,Op,kp,Rp,Pp,Cp,_t=l(()=>{oa=require("node:process"),ia=require("node:util"),aa=(e,t)=>{let r=[e,...t],n=r.join(" "),o=r.map(i=>Pp(sa(i))).join(" ");return{command:n,escapedCommand:o}},et=e=>(0,ia.stripVTControlCharacters)(e).split(`
`).map(t=>sa(t)).join(`
`),sa=e=>e.replaceAll(Op,t=>Tp(t)),Tp=e=>{let t=kp[e];if(t!==void 0)return t;let r=e.codePointAt(0),n=r.toString(16);return r<=Rp?`\\u${n.padStart(4,"0")}`:`\\U${n}`},Ip=()=>{try{return new RegExp("\\p{Separator}|\\p{Other}","gu")}catch{return/[\s\u0000-\u001F\u007F-\u009F\u00AD]/g}},Op=Ip(),kp={" ":" ","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Rp=65535,Pp=e=>Cp.test(e)?e:oa.platform==="win32"?`"${e.replaceAll('"','""')}"`:`'${e.replaceAll("'","'\\''")}'`,Cp=/^[\w./-]+$/});function An(){let{env:e}=vn.default,{TERM:t,TERM_PROGRAM:r}=e;return vn.default.platform!=="win32"?t!=="linux":!!e.WT_SESSION||!!e.TERMINUS_SUBLIME||e.ConEmuTask==="{cmd::Cmder}"||r==="Terminus-Sublime"||r==="vscode"||t==="xterm-256color"||t==="alacritty"||t==="rxvt-unicode"||t==="rxvt-unicode-256color"||e.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var vn,ca=l(()=>{vn=$(require("node:process"),1)});var la,ua,Mp,Up,_p,Lp,Fp,Lt,q0,fa=l(()=>{ca();la={circleQuestionMark:"(?)",questionMarkPrefix:"(?)",square:"\u2588",squareDarkShade:"\u2593",squareMediumShade:"\u2592",squareLightShade:"\u2591",squareTop:"\u2580",squareBottom:"\u2584",squareLeft:"\u258C",squareRight:"\u2590",squareCenter:"\u25A0",bullet:"\u25CF",dot:"\u2024",ellipsis:"\u2026",pointerSmall:"\u203A",triangleUp:"\u25B2",triangleUpSmall:"\u25B4",triangleDown:"\u25BC",triangleDownSmall:"\u25BE",triangleLeftSmall:"\u25C2",triangleRightSmall:"\u25B8",home:"\u2302",heart:"\u2665",musicNote:"\u266A",musicNoteBeamed:"\u266B",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",arrowLeftRight:"\u2194",arrowUpDown:"\u2195",almostEqual:"\u2248",notEqual:"\u2260",lessOrEqual:"\u2264",greaterOrEqual:"\u2265",identical:"\u2261",infinity:"\u221E",subscriptZero:"\u2080",subscriptOne:"\u2081",subscriptTwo:"\u2082",subscriptThree:"\u2083",subscriptFour:"\u2084",subscriptFive:"\u2085",subscriptSix:"\u2086",subscriptSeven:"\u2087",subscriptEight:"\u2088",subscriptNine:"\u2089",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneEighth:"\u215B",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E",line:"\u2500",lineBold:"\u2501",lineDouble:"\u2550",lineDashed0:"\u2504",lineDashed1:"\u2505",lineDashed2:"\u2508",lineDashed3:"\u2509",lineDashed4:"\u254C",lineDashed5:"\u254D",lineDashed6:"\u2574",lineDashed7:"\u2576",lineDashed8:"\u2578",lineDashed9:"\u257A",lineDashed10:"\u257C",lineDashed11:"\u257E",lineDashed12:"\u2212",lineDashed13:"\u2013",lineDashed14:"\u2010",lineDashed15:"\u2043",lineVertical:"\u2502",lineVerticalBold:"\u2503",lineVerticalDouble:"\u2551",lineVerticalDashed0:"\u2506",lineVerticalDashed1:"\u2507",lineVerticalDashed2:"\u250A",lineVerticalDashed3:"\u250B",lineVerticalDashed4:"\u254E",lineVerticalDashed5:"\u254F",lineVerticalDashed6:"\u2575",lineVerticalDashed7:"\u2577",lineVerticalDashed8:"\u2579",lineVerticalDashed9:"\u257B",lineVerticalDashed10:"\u257D",lineVerticalDashed11:"\u257F",lineDownLeft:"\u2510",lineDownLeftArc:"\u256E",lineDownBoldLeftBold:"\u2513",lineDownBoldLeft:"\u2512",lineDownLeftBold:"\u2511",lineDownDoubleLeftDouble:"\u2557",lineDownDoubleLeft:"\u2556",lineDownLeftDouble:"\u2555",lineDownRight:"\u250C",lineDownRightArc:"\u256D",lineDownBoldRightBold:"\u250F",lineDownBoldRight:"\u250E",lineDownRightBold:"\u250D",lineDownDoubleRightDouble:"\u2554",lineDownDoubleRight:"\u2553",lineDownRightDouble:"\u2552",lineUpLeft:"\u2518",lineUpLeftArc:"\u256F",lineUpBoldLeftBold:"\u251B",lineUpBoldLeft:"\u251A",lineUpLeftBold:"\u2519",lineUpDoubleLeftDouble:"\u255D",lineUpDoubleLeft:"\u255C",lineUpLeftDouble:"\u255B",lineUpRight:"\u2514",lineUpRightArc:"\u2570",lineUpBoldRightBold:"\u2517",lineUpBoldRight:"\u2516",lineUpRightBold:"\u2515",lineUpDoubleRightDouble:"\u255A",lineUpDoubleRight:"\u2559",lineUpRightDouble:"\u2558",lineUpDownLeft:"\u2524",lineUpBoldDownBoldLeftBold:"\u252B",lineUpBoldDownBoldLeft:"\u2528",lineUpDownLeftBold:"\u2525",lineUpBoldDownLeftBold:"\u2529",lineUpDownBoldLeftBold:"\u252A",lineUpDownBoldLeft:"\u2527",lineUpBoldDownLeft:"\u2526",lineUpDoubleDownDoubleLeftDouble:"\u2563",lineUpDoubleDownDoubleLeft:"\u2562",lineUpDownLeftDouble:"\u2561",lineUpDownRight:"\u251C",lineUpBoldDownBoldRightBold:"\u2523",lineUpBoldDownBoldRight:"\u2520",lineUpDownRightBold:"\u251D",lineUpBoldDownRightBold:"\u2521",lineUpDownBoldRightBold:"\u2522",lineUpDownBoldRight:"\u251F",lineUpBoldDownRight:"\u251E",lineUpDoubleDownDoubleRightDouble:"\u2560",lineUpDoubleDownDoubleRight:"\u255F",lineUpDownRightDouble:"\u255E",lineDownLeftRight:"\u252C",lineDownBoldLeftBoldRightBold:"\u2533",lineDownLeftBoldRightBold:"\u252F",lineDownBoldLeftRight:"\u2530",lineDownBoldLeftBoldRight:"\u2531",lineDownBoldLeftRightBold:"\u2532",lineDownLeftRightBold:"\u252E",lineDownLeftBoldRight:"\u252D",lineDownDoubleLeftDoubleRightDouble:"\u2566",lineDownDoubleLeftRight:"\u2565",lineDownLeftDoubleRightDouble:"\u2564",lineUpLeftRight:"\u2534",lineUpBoldLeftBoldRightBold:"\u253B",lineUpLeftBoldRightBold:"\u2537",lineUpBoldLeftRight:"\u2538",lineUpBoldLeftBoldRight:"\u2539",lineUpBoldLeftRightBold:"\u253A",lineUpLeftRightBold:"\u2536",lineUpLeftBoldRight:"\u2535",lineUpDoubleLeftDoubleRightDouble:"\u2569",lineUpDoubleLeftRight:"\u2568",lineUpLeftDoubleRightDouble:"\u2567",lineUpDownLeftRight:"\u253C",lineUpBoldDownBoldLeftBoldRightBold:"\u254B",lineUpDownBoldLeftBoldRightBold:"\u2548",lineUpBoldDownLeftBoldRightBold:"\u2547",lineUpBoldDownBoldLeftRightBold:"\u254A",lineUpBoldDownBoldLeftBoldRight:"\u2549",lineUpBoldDownLeftRight:"\u2540",lineUpDownBoldLeftRight:"\u2541",lineUpDownLeftBoldRight:"\u253D",lineUpDownLeftRightBold:"\u253E",lineUpBoldDownBoldLeftRight:"\u2542",lineUpDownLeftBoldRightBold:"\u253F",lineUpBoldDownLeftBoldRight:"\u2543",lineUpBoldDownLeftRightBold:"\u2544",lineUpDownBoldLeftBoldRight:"\u2545",lineUpDownBoldLeftRightBold:"\u2546",lineUpDoubleDownDoubleLeftDoubleRightDouble:"\u256C",lineUpDoubleDownDoubleLeftRight:"\u256B",lineUpDownLeftDoubleRightDouble:"\u256A",lineCross:"\u2573",lineBackslash:"\u2572",lineSlash:"\u2571"},ua={tick:"\u2714",info:"\u2139",warning:"\u26A0",cross:"\u2718",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",pointer:"\u276F",triangleUpOutline:"\u25B3",triangleLeft:"\u25C0",triangleRight:"\u25B6",lozenge:"\u25C6",lozengeOutline:"\u25C7",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",star:"\u2605",play:"\u25B6",nodejs:"\u2B22",oneSeventh:"\u2150",oneNinth:"\u2151",oneTenth:"\u2152"},Mp={tick:"\u221A",info:"i",warning:"\u203C",cross:"\xD7",squareSmall:"\u25A1",squareSmallFilled:"\u25A0",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",pointer:">",triangleUpOutline:"\u2206",triangleLeft:"\u25C4",triangleRight:"\u25BA",lozenge:"\u2666",lozengeOutline:"\u25CA",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",star:"\u2736",play:"\u25BA",nodejs:"\u2666",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},Up={...la,...ua},_p={...la,...Mp},Lp=An(),Fp=Lp?Up:_p,Lt=Fp,q0=Object.entries(ua)});var da,Np,g,J0,pa,Z0,X0,Q0,ew,tw,rw,nw,ow,iw,aw,sw,cw,lw,uw,fw,Ft,dw,pw,mw,hw,gw,bw,yw,ww,Sw,ma,xw,ha,$w,Ew,vw,Aw,Dw,Tw,Iw,Ow,kw,Rw,Pw,Dn=l(()=>{da=$(require("node:tty"),1),Np=da.default?.WriteStream?.prototype?.hasColors?.()??!1,g=(e,t)=>{if(!Np)return o=>o;let r=`\x1B[${e}m`,n=`\x1B[${t}m`;return o=>{let i=o+"",a=i.indexOf(n);if(a===-1)return r+i+n;let s=r,c=0,u=(t===22?n:"")+r;for(;a!==-1;)s+=i.slice(c,a)+u,c=a+n.length,a=i.indexOf(n,c);return s+=i.slice(c)+n,s}},J0=g(0,0),pa=g(1,22),Z0=g(2,22),X0=g(3,23),Q0=g(4,24),ew=g(53,55),tw=g(7,27),rw=g(8,28),nw=g(9,29),ow=g(30,39),iw=g(31,39),aw=g(32,39),sw=g(33,39),cw=g(34,39),lw=g(35,39),uw=g(36,39),fw=g(37,39),Ft=g(90,39),dw=g(40,49),pw=g(41,49),mw=g(42,49),hw=g(43,49),gw=g(44,49),bw=g(45,49),yw=g(46,49),ww=g(47,49),Sw=g(100,49),ma=g(91,39),xw=g(92,39),ha=g(93,39),$w=g(94,39),Ew=g(95,39),vw=g(96,39),Aw=g(97,39),Dw=g(101,49),Tw=g(102,49),Iw=g(103,49),Ow=g(104,49),kw=g(105,49),Rw=g(106,49),Pw=g(107,49)});var ga=l(()=>{Dn();Dn()});var wa,jp,Nt,ba,Wp,ya,zp,Sa=l(()=>{fa();ga();wa=({type:e,message:t,timestamp:r,piped:n,commandId:o,result:{failed:i=!1}={},options:{reject:a=!0}})=>{let s=jp(r),c=Wp[e]({failed:i,reject:a,piped:n}),f=zp[e]({reject:a});return`${Ft(`[${s}]`)} ${Ft(`[${o}]`)} ${f(c)} ${f(t)}`},jp=e=>`${Nt(e.getHours(),2)}:${Nt(e.getMinutes(),2)}:${Nt(e.getSeconds(),2)}.${Nt(e.getMilliseconds(),3)}`,Nt=(e,t)=>String(e).padStart(t,"0"),ba=({failed:e,reject:t})=>e?t?Lt.cross:Lt.warning:Lt.tick,Wp={command:({piped:e})=>e?"|":"$",output:()=>" ",ipc:()=>"*",error:ba,duration:ba},ya=e=>e,zp={command:()=>pa,output:()=>ya,ipc:()=>ya,error:({reject:e})=>e?ma:ha,duration:()=>Ft}});var xa,Gp,Vp,$a=l(()=>{ne();xa=(e,t,r)=>{let n=na(t,r);return e.map(({verboseLine:o,verboseObject:i})=>Gp(o,i,n)).filter(o=>o!==void 0).map(o=>Vp(o)).join("")},Gp=(e,t,r)=>{if(r===void 0)return e;let n=r(e,t);if(typeof n=="string")return n},Vp=e=>e.endsWith(`
`)?e:`${e}
`});var Ea,B,Hp,Yp,qp,Bt,Kp,Pe=l(()=>{Ea=require("node:util");_t();Sa();$a();B=({type:e,verboseMessage:t,fdNumber:r,verboseInfo:n,result:o})=>{let i=Hp({type:e,result:o,verboseInfo:n}),a=Yp(t,i),s=xa(a,n,r);s!==""&&console.warn(s.slice(0,-1))},Hp=({type:e,result:t,verboseInfo:{escapedCommand:r,commandId:n,rawOptions:{piped:o=!1,...i}}})=>({type:e,escapedCommand:r,commandId:`${n}`,timestamp:new Date,piped:o,result:t,options:i}),Yp=(e,t)=>e.split(`
`).map(r=>qp({...t,message:r})),qp=e=>({verboseLine:wa(e),verboseObject:e}),Bt=e=>{let t=typeof e=="string"?e:(0,Ea.inspect)(e);return et(t).replaceAll("	"," ".repeat(Kp))},Kp=2});var va,Aa=l(()=>{ne();Pe();va=(e,t)=>{ke(t)&&B({type:"command",verboseMessage:e,verboseInfo:t})}});var Da,Jp,Zp,Xp,Ta=l(()=>{ne();Da=(e,t,r)=>{Xp(e);let n=Jp(e);return{verbose:e,escapedCommand:t,commandId:n,rawOptions:r}},Jp=e=>ke({verbose:e})?Zp++:void 0,Zp=0n,Xp=e=>{for(let t of e){if(t===!1)throw new TypeError(`The "verbose: false" option was renamed to "verbose: 'none'".`);if(t===!0)throw new TypeError(`The "verbose: true" option was renamed to "verbose: 'short'".`);if(!Ut.includes(t)&&!Mt(t)){let r=Ut.map(n=>`'${n}'`).join(", ");throw new TypeError(`The "verbose" option must not be ${t}. Allowed values are: ${r} or a function.`)}}}});var Tn,jt,In,Wt=l(()=>{Tn=require("node:process"),jt=()=>Tn.hrtime.bigint(),In=e=>Number(Tn.hrtime.bigint()-e)/1e6});var zt,On=l(()=>{Aa();Ta();Wt();_t();X();zt=(e,t,r)=>{let n=jt(),{command:o,escapedCommand:i}=aa(e,t),a=Sn(r,"verbose"),s=Da(a,i,{...r});return va(i,s),{command:o,escapedCommand:i,startTime:n,verboseInfo:s}}});var Pa=O((rS,Ra)=>{Ra.exports=ka;ka.sync=em;var Ia=require("fs");function Qp(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Oa(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Qp(t,r)}function ka(e,t,r){Ia.stat(e,function(n,o){r(n,n?!1:Oa(o,e,t))})}function em(e,t){return Oa(Ia.statSync(e),e,t)}});var La=O((nS,_a)=>{_a.exports=Ma;Ma.sync=tm;var Ca=require("fs");function Ma(e,t,r){Ca.stat(e,function(n,o){r(n,n?!1:Ua(o,t))})}function tm(e,t){return Ua(Ca.statSync(e),t)}function Ua(e,t){return e.isFile()&&rm(e,t)}function rm(e,t){var r=e.mode,n=e.uid,o=e.gid,i=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),a=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),f=parseInt("001",8),u=s|c,d=r&f||r&c&&o===a||r&s&&n===i||r&u&&i===0;return d}});var Na=O((iS,Fa)=>{var oS=require("fs"),Gt;process.platform==="win32"||global.TESTING_WINDOWS?Gt=Pa():Gt=La();Fa.exports=kn;kn.sync=nm;function kn(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){kn(e,t||{},function(i,a){i?o(i):n(a)})})}Gt(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function nm(e,t){try{return Gt.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var Ha=O((aS,Va)=>{var Ce=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Ba=require("path"),om=Ce?";":":",ja=Na(),Wa=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),za=(e,t)=>{let r=t.colon||om,n=e.match(/\//)||Ce&&e.match(/\\/)?[""]:[...Ce?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=Ce?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=Ce?o.split(r):[""];return Ce&&e.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},Ga=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:i}=za(e,t),a=[],s=f=>new Promise((u,d)=>{if(f===n.length)return t.all&&a.length?u(a):d(Wa(e));let p=n[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,h=Ba.join(m,e),b=!m&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;u(c(b,f,0))}),c=(f,u,d)=>new Promise((p,m)=>{if(d===o.length)return p(s(u+1));let h=o[d];ja(f+h,{pathExt:i},(b,x)=>{if(!b&&x)if(t.all)a.push(f+h);else return p(f+h);return p(c(f,u,d+1))})});return r?s(0).then(f=>r(null,f),r):s(0)},im=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=za(e,t),i=[];for(let a=0;a<r.length;a++){let s=r[a],c=/^".*"$/.test(s)?s.slice(1,-1):s,f=Ba.join(c,e),u=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+f:f;for(let d=0;d<n.length;d++){let p=u+n[d];try{if(ja.sync(p,{pathExt:o}))if(t.all)i.push(p);else return p}catch{}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw Wa(e)};Va.exports=Ga;Ga.sync=im});var qa=O((sS,Rn)=>{"use strict";var Ya=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Rn.exports=Ya;Rn.exports.default=Ya});var Xa=O((cS,Za)=>{"use strict";var Ka=require("path"),am=Ha(),sm=qa();function Ja(e,t){let r=e.options.env||process.env,n=process.cwd(),o=e.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch{}let a;try{a=am.sync(e.command,{path:r[sm({env:r})],pathExt:t?Ka.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return a&&(a=Ka.resolve(o?e.options.cwd:"",a)),a}function cm(e){return Ja(e)||Ja(e,!0)}Za.exports=cm});var Qa=O((lS,Cn)=>{"use strict";var Pn=/([()\][%!^"`<>&|;, *?])/g;function lm(e){return e=e.replace(Pn,"^$1"),e}function um(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),e=e.replace(/(?=(\\+?)?)\1$/,"$1$1"),e=`"${e}"`,e=e.replace(Pn,"^$1"),t&&(e=e.replace(Pn,"^$1")),e}Cn.exports.command=lm;Cn.exports.argument=um});var ts=O((uS,es)=>{"use strict";es.exports=/^#!(.*)/});var ns=O((fS,rs)=>{"use strict";var fm=ts();rs.exports=(e="")=>{let t=e.match(fm);if(!t)return null;let[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return o==="env"?n:n?`${o} ${n}`:o}});var is=O((dS,os)=>{"use strict";var Mn=require("fs"),dm=ns();function pm(e){let r=Buffer.alloc(150),n;try{n=Mn.openSync(e,"r"),Mn.readSync(n,r,0,150,0),Mn.closeSync(n)}catch{}return dm(r.toString())}os.exports=pm});var ls=O((pS,cs)=>{"use strict";var mm=require("path"),as=Xa(),ss=Qa(),hm=is(),gm=process.platform==="win32",bm=/\.(?:com|exe)$/i,ym=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function wm(e){e.file=as(e);let t=e.file&&hm(e.file);return t?(e.args.unshift(e.file),e.command=t,as(e)):e.file}function Sm(e){if(!gm)return e;let t=wm(e),r=!bm.test(t);if(e.options.forceShell||r){let n=ym.test(t);e.command=mm.normalize(e.command),e.command=ss.command(e.command),e.args=e.args.map(i=>ss.argument(i,n));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function xm(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null),t=t?t.slice(0):[],r=Object.assign({},r);let n={command:e,args:t,options:r,file:void 0,original:{command:e,args:t}};return r.shell?n:Sm(n)}cs.exports=xm});var ds=O((mS,fs)=>{"use strict";var Un=process.platform==="win32";function _n(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function $m(e,t){if(!Un)return;let r=e.emit;e.emit=function(n,o){if(n==="exit"){let i=us(o,t);if(i)return r.call(e,"error",i)}return r.apply(e,arguments)}}function us(e,t){return Un&&e===1&&!t.file?_n(t.original,"spawn"):null}function Em(e,t){return Un&&e===1&&!t.file?_n(t.original,"spawnSync"):null}fs.exports={hookChildProcess:$m,verifyENOENT:us,verifyENOENTSync:Em,notFoundError:_n}});var hs=O((hS,Me)=>{"use strict";var ps=require("child_process"),Ln=ls(),Fn=ds();function ms(e,t,r){let n=Ln(e,t,r),o=ps.spawn(n.command,n.args,n.options);return Fn.hookChildProcess(o,n),o}function vm(e,t,r){let n=Ln(e,t,r),o=ps.spawnSync(n.command,n.args,n.options);return o.error=o.error||Fn.verifyENOENTSync(o.status,n),o}Me.exports=ms;Me.exports.spawn=ms;Me.exports.sync=vm;Me.exports._parse=Ln;Me.exports._enoent=Fn});function Vt(e={}){let{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}var gs=l(()=>{});var bs=l(()=>{});function Ht(e){return e instanceof URL?(0,ws.fileURLToPath)(e):e}function Ss(e){return{*[Symbol.iterator](){let t=Nn.default.resolve(Ht(e)),r;for(;r!==t;)yield t,r=t,t=Nn.default.resolve(t,"..")}}}var ys,Bn,Nn,ws,yS,wS,xs=l(()=>{ys=require("node:util"),Bn=require("node:child_process"),Nn=$(require("node:path"),1),ws=require("node:url");bs();yS=(0,ys.promisify)(Bn.execFile);wS=10*1024*1024});var tt,oe,Am,Dm,Tm,$s,Es=l(()=>{tt=$(require("node:process"),1),oe=$(require("node:path"),1);gs();xs();Am=({cwd:e=tt.default.cwd(),path:t=tt.default.env[Vt()],preferLocal:r=!0,execPath:n=tt.default.execPath,addExecPath:o=!0}={})=>{let i=oe.default.resolve(Ht(e)),a=[],s=t.split(oe.default.delimiter);return r&&Dm(a,s,i),o&&Tm(a,s,n,i),t===""||t===oe.default.delimiter?`${a.join(oe.default.delimiter)}${t}`:[...a,t].join(oe.default.delimiter)},Dm=(e,t,r)=>{for(let n of Ss(r)){let o=oe.default.join(n,"node_modules/.bin");t.includes(o)||e.push(o)}},Tm=(e,t,r,n)=>{let o=oe.default.resolve(n,Ht(r),"..");t.includes(o)||e.push(o)},$s=({env:e=tt.default.env,...t}={})=>{e={...e};let r=Vt({env:e});return t.path=e[r],e[r]=Am(t),e}});var vs,L,As,Ds,Ts,Yt,rt,nt,ge=l(()=>{vs=(e,t,r)=>{let n=r?nt:rt,o=e instanceof L?{}:{cause:e};return new n(t,o)},L=class extends Error{},As=(e,t)=>{Object.defineProperty(e.prototype,"name",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,Ts,{value:!0,writable:!1,enumerable:!1,configurable:!1})},Ds=e=>Yt(e)&&Ts in e,Ts=Symbol("isExecaError"),Yt=e=>Object.prototype.toString.call(e)==="[object Error]",rt=class extends Error{};As(rt,rt.name);nt=class extends Error{};As(nt,nt.name)});var Is,Im,Os,ks,Rs=l(()=>{Is=()=>{let e=ks-Os+1;return Array.from({length:e},Im)},Im=(e,t)=>({name:`SIGRT${t+1}`,number:Os+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Os=34,ks=64});var Ps,Cs=l(()=>{Ps=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]});var Ms,jn,Om,Us=l(()=>{Ms=require("node:os");Cs();Rs();jn=()=>{let e=Is();return[...Ps,...e].map(Om)},Om=({name:e,number:t,description:r,action:n,forced:o=!1,standard:i})=>{let{signals:{[e]:a}}=Ms.constants,s=a!==void 0;return{name:e,number:s?a:t,description:r,supported:s,action:n,forced:o,standard:i}}});var _s,km,Rm,Ls,Pm,Cm,Mm,PS,Fs=l(()=>{_s=require("node:os");Us();km=()=>{let e=jn();return Object.fromEntries(e.map(Rm))},Rm=({name:e,number:t,description:r,supported:n,action:o,forced:i,standard:a})=>[e,{name:e,number:t,description:r,supported:n,action:o,forced:i,standard:a}],Ls=km(),Pm=()=>{let e=jn(),t=65,r=Array.from({length:t},(n,o)=>Cm(o,e));return Object.assign({},...r)},Cm=(e,t)=>{let r=Mm(e,t);if(r===void 0)return{};let{name:n,description:o,supported:i,action:a,forced:s,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:a,forced:s,standard:c}}},Mm=(e,t)=>{let r=t.find(({name:n})=>_s.constants.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)},PS=Pm()});var Ue,Bs,js,Ws,Um,_m,Ns,Lm,Wn,Fm,Nm,qt,ot=l(()=>{Ue=require("node:os");Fs();Bs=e=>{let t="option `killSignal`";if(e===0)throw new TypeError(`Invalid ${t}: 0 cannot be used.`);return Ws(e,t)},js=e=>e===0?e:Ws(e,"`subprocess.kill()`'s argument"),Ws=(e,t)=>{if(Number.isInteger(e))return Um(e,t);if(typeof e=="string")return Lm(e,t);throw new TypeError(`Invalid ${t} ${String(e)}: it must be a string or an integer.
${Wn()}`)},Um=(e,t)=>{if(Ns.has(e))return Ns.get(e);throw new TypeError(`Invalid ${t} ${e}: this signal integer does not exist.
${Wn()}`)},_m=()=>new Map(Object.entries(Ue.constants.signals).reverse().map(([e,t])=>[t,e])),Ns=_m(),Lm=(e,t)=>{if(e in Ue.constants.signals)return e;throw e.toUpperCase()in Ue.constants.signals?new TypeError(`Invalid ${t} '${e}': please rename it to '${e.toUpperCase()}'.`):new TypeError(`Invalid ${t} '${e}': this signal name does not exist.
${Wn()}`)},Wn=()=>`Available signal names: ${Fm()}.
Available signal numbers: ${Nm()}.`,Fm=()=>Object.keys(Ue.constants.signals).sort().map(e=>`'${e}'`).join(", "),Nm=()=>[...new Set(Object.values(Ue.constants.signals).sort((e,t)=>e-t))].join(", "),qt=e=>Ls[e].description});var zs,Gs,Bm,Vs,jm,Wm,zm,zn,Kt=l(()=>{zs=require("node:timers/promises");ge();ot();Gs=e=>{if(e===!1)return e;if(e===!0)return Bm;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterDelay\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Bm=1e3*5,Vs=({kill:e,options:{forceKillAfterDelay:t,killSignal:r},onInternalError:n,context:o,controller:i},a,s)=>{let{signal:c,error:f}=jm(a,s,r);Wm(f,n);let u=e(c);return zm({kill:e,signal:c,forceKillAfterDelay:t,killSignal:r,killResult:u,context:o,controller:i}),u},jm=(e,t,r)=>{let[n=r,o]=Yt(e)?[void 0,e]:[e,t];if(typeof n!="string"&&!Number.isInteger(n))throw new TypeError(`The first argument must be an error instance or a signal name string/integer: ${String(n)}`);if(o!==void 0&&!Yt(o))throw new TypeError(`The second argument is optional. If specified, it must be an error instance: ${o}`);return{signal:js(n),error:o}},Wm=(e,t)=>{e!==void 0&&t.reject(e)},zm=async({kill:e,signal:t,forceKillAfterDelay:r,killSignal:n,killResult:o,context:i,controller:a})=>{t===n&&o&&zn({kill:e,forceKillAfterDelay:r,context:i,controllerSignal:a.signal})},zn=async({kill:e,forceKillAfterDelay:t,context:r,controllerSignal:n})=>{if(t!==!1)try{await(0,zs.setTimeout)(t,void 0,{signal:n}),e("SIGKILL")&&(r.isForcefullyTerminated??=!0)}catch{}}});var Hs,Jt,Gn=l(()=>{Hs=require("node:events"),Jt=async(e,t)=>{e.aborted||await(0,Hs.once)(e,"abort",{signal:t})}});var Ys,qs,Gm,Vn=l(()=>{Gn();Ys=({cancelSignal:e})=>{if(e!==void 0&&Object.prototype.toString.call(e)!=="[object AbortSignal]")throw new Error(`The \`cancelSignal\` option must be an AbortSignal: ${String(e)}`)},qs=({subprocess:e,cancelSignal:t,gracefulCancel:r,context:n,controller:o})=>t===void 0||r?[]:[Gm(e,t,n,o)],Gm=async(e,t,r,{signal:n})=>{throw await Jt(t,n),r.terminationReason??="cancel",e.kill(),t.reason}});var _e,Vm,Hn,Ks,Js,Zt,Zs,Xs,Qs,ec,tc,rc,Hm,Ym,qm,F,Km,ie,Le,Fe=l(()=>{_e=({methodName:e,isSubprocess:t,ipc:r,isConnected:n})=>{Vm(e,t,r),Hn(e,t,n)},Vm=(e,t,r)=>{if(!r)throw new Error(`${F(e,t)} can only be used if the \`ipc\` option is \`true\`.`)},Hn=(e,t,r)=>{if(!r)throw new Error(`${F(e,t)} cannot be used: the ${ie(t)} has already exited or disconnected.`)},Ks=e=>{throw new Error(`${F("getOneMessage",e)} could not complete: the ${ie(e)} exited or disconnected.`)},Js=e=>{throw new Error(`${F("sendMessage",e)} failed: the ${ie(e)} is sending a message too, instead of listening to incoming messages.
This can be fixed by both sending a message and listening to incoming messages at the same time:

const [receivedMessage] = await Promise.all([
	${F("getOneMessage",e)},
	${F("sendMessage",e,"message, {strict: true}")},
]);`)},Zt=(e,t)=>new Error(`${F("sendMessage",t)} failed when sending an acknowledgment response to the ${ie(t)}.`,{cause:e}),Zs=e=>{throw new Error(`${F("sendMessage",e)} failed: the ${ie(e)} is not listening to incoming messages.`)},Xs=e=>{throw new Error(`${F("sendMessage",e)} failed: the ${ie(e)} exited without listening to incoming messages.`)},Qs=()=>new Error(`\`cancelSignal\` aborted: the ${ie(!0)} disconnected.`),ec=()=>{throw new Error("`getCancelSignal()` cannot be used without setting the `cancelSignal` subprocess option.")},tc=({error:e,methodName:t,isSubprocess:r})=>{if(e.code==="EPIPE")throw new Error(`${F(t,r)} cannot be used: the ${ie(r)} is disconnecting.`,{cause:e})},rc=({error:e,methodName:t,isSubprocess:r,message:n})=>{if(Hm(e))throw new Error(`${F(t,r)}'s argument type is invalid: the message cannot be serialized: ${String(n)}.`,{cause:e})},Hm=({code:e,message:t})=>Ym.has(e)||qm.some(r=>t.includes(r)),Ym=new Set(["ERR_MISSING_ARGS","ERR_INVALID_ARG_TYPE"]),qm=["could not be cloned","circular structure","call stack size exceeded"],F=(e,t,r="")=>e==="cancelSignal"?"`cancelSignal`'s `controller.abort()`":`${Km(t)}${e}(${r})`,Km=e=>e?"":"subprocess.",ie=e=>e?"parent process":"subprocess",Le=e=>{e.connected&&e.disconnect()}});var j,Ne=l(()=>{j=()=>{let e={},t=new Promise((r,n)=>{Object.assign(e,{resolve:r,reject:n})});return Object.assign(t,e)}});var Qt,Be,W,nc,Jm,Zm,oc,Xm,ic,it,Xt,ae=l(()=>{X();Qt=(e,t="stdin")=>{let{options:n,fileDescriptors:o}=W.get(e),i=nc(o,t,!0),a=e.stdio[i];if(a===null)throw new TypeError(oc(i,t,n,!0));return a},Be=(e,t="stdout")=>{let{options:n,fileDescriptors:o}=W.get(e),i=nc(o,t,!1),a=i==="all"?e.all:e.stdio[i];if(a==null)throw new TypeError(oc(i,t,n,!1));return a},W=new WeakMap,nc=(e,t,r)=>{let n=Jm(t,r);return Zm(n,t,r,e),n},Jm=(e,t)=>{let r=xn(e);if(r!==void 0)return r;let{validOptions:n,defaultValue:o}=t?{validOptions:'"stdin"',defaultValue:"stdin"}:{validOptions:'"stdout", "stderr", "all"',defaultValue:"stdout"};throw new TypeError(`"${it(t)}" must not be "${e}".
It must be ${n} or "fd3", "fd4" (and so on).
It is optional and defaults to "${o}".`)},Zm=(e,t,r,n)=>{let o=n[ic(e)];if(o===void 0)throw new TypeError(`"${it(r)}" must not be ${t}. That file descriptor does not exist.
Please set the "stdio" option to ensure that file descriptor exists.`);if(o.direction==="input"&&!r)throw new TypeError(`"${it(r)}" must not be ${t}. It must be a readable stream, not writable.`);if(o.direction!=="input"&&r)throw new TypeError(`"${it(r)}" must not be ${t}. It must be a writable stream, not readable.`)},oc=(e,t,r,n)=>{if(e==="all"&&!r.all)return`The "all" option must be true to use "from: 'all'".`;let{optionName:o,optionValue:i}=Xm(e,r);return`The "${o}: ${Xt(i)}" option is incompatible with using "${it(n)}: ${Xt(t)}".
Please set this option with "pipe" instead.`},Xm=(e,{stdin:t,stdout:r,stderr:n,stdio:o})=>{let i=ic(e);return i===0&&t!==void 0?{optionName:"stdin",optionValue:t}:i===1&&r!==void 0?{optionName:"stdout",optionValue:r}:i===2&&n!==void 0?{optionName:"stderr",optionValue:n}:{optionName:`stdio[${i}]`,optionValue:o[i]}},ic=e=>e==="all"?1:e,it=e=>e?"to":"from",Xt=e=>typeof e=="string"?`'${e}'`:typeof e=="number"?`${e}`:"Stream"});var ac,be,er=l(()=>{ac=require("node:events"),be=(e,t,r)=>{let n=e.getMaxListeners();n===0||n===Number.POSITIVE_INFINITY||(e.setMaxListeners(n+t),(0,ac.addAbortListener)(r,()=>{e.setMaxListeners(e.getMaxListeners()-t)}))}});var tr,Yn,rr,qn,sc,cc,at=l(()=>{tr=(e,t)=>{t&&Yn(e)},Yn=e=>{e.refCounted()},rr=(e,t)=>{t&&qn(e)},qn=e=>{e.unrefCounted()},sc=(e,t)=>{t&&(qn(e),qn(e))},cc=(e,t)=>{t&&(Yn(e),Yn(e))}});var lc,uc,fc,dc,nr,pc=l(()=>{lc=require("node:events"),uc=require("node:timers/promises");ir();at();or();ar();fc=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n},o)=>{if(hc(o)||bc(o))return;nr.has(e)||nr.set(e,[]);let i=nr.get(e);if(i.push(o),!(i.length>1))for(;i.length>0;){await gc(e,n,o),await uc.scheduler.yield();let a=await mc({wrappedMessage:i[0],anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n});i.shift(),n.emit("message",a),n.emit("message:done")}},dc=async({anyProcess:e,channel:t,isSubprocess:r,ipcEmitter:n,boundOnMessage:o})=>{Kn();let i=nr.get(e);for(;i?.length>0;)await(0,lc.once)(n,"message:done");e.removeListener("message",o),cc(t,r),n.connected=!1,n.emit("disconnect")},nr=new WeakMap});var yc,se,sr,Qm,cr,st=l(()=>{yc=require("node:events");pc();at();se=(e,t,r)=>{if(sr.has(e))return sr.get(e);let n=new yc.EventEmitter;return n.connected=!0,sr.set(e,n),Qm({ipcEmitter:n,anyProcess:e,channel:t,isSubprocess:r}),n},sr=new WeakMap,Qm=({ipcEmitter:e,anyProcess:t,channel:r,isSubprocess:n})=>{let o=fc.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e});t.on("message",o),t.once("disconnect",dc.bind(void 0,{anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:e,boundOnMessage:o})),sc(r,n)},cr=e=>{let t=sr.get(e);return t===void 0?e.channel!==null:t.connected}});var wc,Sc,eh,xc,mc,hc,$c,lr,th,ur,Ec,or=l(()=>{wc=require("node:events");Ne();er();pr();Fe();st();ir();Sc=({anyProcess:e,channel:t,isSubprocess:r,message:n,strict:o})=>{if(!o)return n;let i=se(e,t,r),a=fr(e,i);return{id:eh++,type:ur,message:n,hasListeners:a}},eh=0n,xc=(e,t)=>{if(!(t?.type!==ur||t.hasListeners))for(let{id:r}of e)r!==void 0&&lr[r].resolve({isDeadlock:!0,hasListeners:!1})},mc=async({wrappedMessage:e,anyProcess:t,channel:r,isSubprocess:n,ipcEmitter:o})=>{if(e?.type!==ur||!t.connected)return e;let{id:i,message:a}=e,s={id:i,type:Ec,message:fr(t,o)};try{await dr({anyProcess:t,channel:r,isSubprocess:n,ipc:!0},s)}catch(c){o.emit("strict:error",c)}return a},hc=e=>{if(e?.type!==Ec)return!1;let{id:t,message:r}=e;return lr[t]?.resolve({isDeadlock:!1,hasListeners:r}),!0},$c=async(e,t,r)=>{if(e?.type!==ur)return;let n=j();lr[e.id]=n;let o=new AbortController;try{let{isDeadlock:i,hasListeners:a}=await Promise.race([n,th(t,r,o)]);i&&Js(r),a||Zs(r)}finally{o.abort(),delete lr[e.id]}},lr={},th=async(e,t,{signal:r})=>{be(e,1,r),await(0,wc.once)(e,"disconnect",{signal:r}),Xs(t)},ur="execa:ipc:request",Ec="execa:ipc:response"});var vc,Ac,gc,ct,fr,rh,ir=l(()=>{Ne();X();ae();or();vc=(e,t,r)=>{ct.has(e)||ct.set(e,new Set);let n=ct.get(e),o=j(),i=r?t.id:void 0,a={onMessageSent:o,id:i};return n.add(a),{outgoingMessages:n,outgoingMessage:a}},Ac=({outgoingMessages:e,outgoingMessage:t})=>{e.delete(t),t.onMessageSent.resolve()},gc=async(e,t,r)=>{for(;!fr(e,t)&&ct.get(e)?.size>0;){let n=[...ct.get(e)];xc(n,r),await Promise.all(n.map(({onMessageSent:o})=>o))}},ct=new WeakMap,fr=(e,t)=>t.listenerCount("message")>rh(e),rh=e=>W.has(e)&&!Z(W.get(e).options.buffer,"ipc")?1:0});var Dc,dr,nh,Zn,oh,Jn,pr=l(()=>{Dc=require("node:util");Fe();ir();or();dr=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},o,{strict:i=!1}={})=>{let a="sendMessage";return _e({methodName:a,isSubprocess:r,ipc:n,isConnected:e.connected}),nh({anyProcess:e,channel:t,methodName:a,isSubprocess:r,message:o,strict:i})},nh=async({anyProcess:e,channel:t,methodName:r,isSubprocess:n,message:o,strict:i})=>{let a=Sc({anyProcess:e,channel:t,isSubprocess:n,message:o,strict:i}),s=vc(e,a,i);try{await Zn({anyProcess:e,methodName:r,isSubprocess:n,wrappedMessage:a,message:o})}catch(c){throw Le(e),c}finally{Ac(s)}},Zn=async({anyProcess:e,methodName:t,isSubprocess:r,wrappedMessage:n,message:o})=>{let i=oh(e);try{await Promise.all([$c(n,e,r),i(n)])}catch(a){throw tc({error:a,methodName:t,isSubprocess:r}),rc({error:a,methodName:t,isSubprocess:r,message:o}),a}},oh=e=>{if(Jn.has(e))return Jn.get(e);let t=(0,Dc.promisify)(e.send.bind(e));return Jn.set(e,t),t},Jn=new WeakMap});var Ic,Oc,kc,ih,Tc,bc,Rc,Kn,Xn,ar=l(()=>{Ic=require("node:timers/promises");pr();st();Fe();Oc=(e,t)=>{let r="cancelSignal";return Hn(r,!1,e.connected),Zn({anyProcess:e,methodName:r,isSubprocess:!1,wrappedMessage:{type:Rc,message:t},message:t})},kc=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>(await ih({anyProcess:e,channel:t,isSubprocess:r,ipc:n}),Xn.signal),ih=async({anyProcess:e,channel:t,isSubprocess:r,ipc:n})=>{if(!Tc){if(Tc=!0,!n){ec();return}if(t===null){Kn();return}se(e,t,r),await Ic.scheduler.yield()}},Tc=!1,bc=e=>e?.type!==Rc?!1:(Xn.abort(e.message),!0),Rc="execa:ipc:cancel",Kn=()=>{Xn.abort(Qs())},Xn=new AbortController});var Pc,Cc,ah,sh,Qn=l(()=>{Gn();ar();Kt();Pc=({gracefulCancel:e,cancelSignal:t,ipc:r,serialization:n})=>{if(e){if(t===void 0)throw new Error("The `cancelSignal` option must be defined when setting the `gracefulCancel` option.");if(!r)throw new Error("The `ipc` option cannot be false when setting the `gracefulCancel` option.");if(n==="json")throw new Error("The `serialization` option cannot be 'json' when setting the `gracefulCancel` option.")}},Cc=({subprocess:e,cancelSignal:t,gracefulCancel:r,forceKillAfterDelay:n,context:o,controller:i})=>r?[ah({subprocess:e,cancelSignal:t,forceKillAfterDelay:n,context:o,controller:i})]:[],ah=async({subprocess:e,cancelSignal:t,forceKillAfterDelay:r,context:n,controller:{signal:o}})=>{await Jt(t,o);let i=sh(t);throw await Oc(e,i),zn({kill:e.kill,forceKillAfterDelay:r,context:n,controllerSignal:o}),n.terminationReason??="gracefulCancel",t.reason},sh=({reason:e})=>{if(!(e instanceof DOMException))return e;let t=new Error(e.message);return Object.defineProperty(t,"stack",{value:e.stack,enumerable:!1,configurable:!0,writable:!0}),t}});var Mc,Uc,_c,ch,eo=l(()=>{Mc=require("node:timers/promises");ge();Uc=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},_c=(e,t,r,n)=>t===0||t===void 0?[]:[ch(e,t,r,n)],ch=async(e,t,r,{signal:n})=>{throw await(0,Mc.setTimeout)(t,void 0,{signal:n}),r.terminationReason??="timeout",e.kill(),new L}});var mr,to,Lc,Fc,ro=l(()=>{mr=require("node:process"),to=$(require("node:path"),1);Oe();Lc=({options:e})=>{if(e.node===!1)throw new TypeError('The "node" option cannot be false with `execaNode()`.');return{options:{...e,node:!0}}},Fc=(e,t,{node:r=!1,nodePath:n=mr.execPath,nodeOptions:o=mr.execArgv.filter(c=>!c.startsWith("--inspect")),cwd:i,execPath:a,...s})=>{if(a!==void 0)throw new TypeError('The "execPath" option has been removed. Please use the "nodePath" option instead.');let c=Ie(n,'The "nodePath" option'),f=to.default.resolve(i,c),u={...s,nodePath:f,node:r,cwd:i};if(!r)return[e,t,u];if(to.default.basename(e,".exe")==="node")throw new TypeError('When the "node" option is true, the first argument does not need to be "node".');return[f,[...o,e,...t],{ipc:!0,...u,shell:!1}]}});var Nc,Bc,lh,uh,fh,jc,no=l(()=>{Nc=require("node:v8"),Bc=({ipcInput:e,ipc:t,serialization:r})=>{if(e!==void 0){if(!t)throw new Error("The `ipcInput` option cannot be set unless the `ipc` option is `true`.");fh[r](e)}},lh=e=>{try{(0,Nc.serialize)(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with a structured clone.",{cause:t})}},uh=e=>{try{JSON.stringify(e)}catch(t){throw new Error("The `ipcInput` option is not serializable with JSON.",{cause:t})}},fh={advanced:lh,json:uh},jc=async(e,t)=>{t!==void 0&&await e.sendMessage(t)}});var zc,dh,R,oo,ph,Wc,hr,ye=l(()=>{zc=({encoding:e})=>{if(oo.has(e))return;let t=ph(e);if(t!==void 0)throw new TypeError(`Invalid option \`encoding: ${hr(e)}\`.
Please rename it to ${hr(t)}.`);let r=[...oo].map(n=>hr(n)).join(", ");throw new TypeError(`Invalid option \`encoding: ${hr(e)}\`.
Please rename it to one of: ${r}.`)},dh=new Set(["utf8","utf16le"]),R=new Set(["buffer","hex","base64","base64url","latin1","ascii"]),oo=new Set([...dh,...R]),ph=e=>{if(e===null)return"buffer";if(typeof e!="string")return;let t=e.toLowerCase();if(t in Wc)return Wc[t];if(oo.has(t))return t},Wc={"utf-8":"utf8","utf-16le":"utf16le","ucs-2":"utf16le",ucs2:"utf16le",binary:"latin1"},hr=e=>typeof e=="string"?`"${e}"`:String(e)});var Gc,Vc,Hc,Yc,qc,Kc,io=l(()=>{Gc=require("node:fs"),Vc=$(require("node:path"),1),Hc=$(require("node:process"),1);Oe();Yc=(e=qc())=>{let t=Ie(e,'The "cwd" option');return Vc.default.resolve(t)},qc=()=>{try{return Hc.default.cwd()}catch(e){throw e.message=`The current directory does not exist.
${e.message}`,e}},Kc=(e,t)=>{if(t===qc())return e;let r;try{r=(0,Gc.statSync)(t)}catch(n){return`The "cwd" option is invalid: ${t}.
${n.message}
${e}`}return r.isDirectory()?e:`The "cwd" option is not a directory: ${t}.
${e}`}});var Jc,ao,Zc,gr,mh,hh,so=l(()=>{Jc=$(require("node:path"),1),ao=$(require("node:process"),1),Zc=$(hs(),1);Es();Kt();ot();Vn();Qn();eo();ro();no();ye();io();Oe();X();gr=(e,t,r)=>{r.cwd=Yc(r.cwd);let[n,o,i]=Fc(e,t,r),{command:a,args:s,options:c}=Zc.default._parse(n,o,i),f=ra(c),u=mh(f);return Uc(u),zc(u),Bc(u),Ys(u),Pc(u),u.shell=bn(u.shell),u.env=hh(u),u.killSignal=Bs(u.killSignal),u.forceKillAfterDelay=Gs(u.forceKillAfterDelay),u.lines=u.lines.map((d,p)=>d&&!R.has(u.encoding)&&u.buffer[p]),ao.default.platform==="win32"&&Jc.default.basename(a,".exe")==="cmd"&&s.unshift("/q"),{file:a,commandArguments:s,options:u}},mh=({extendEnv:e=!0,preferLocal:t=!1,cwd:r,localDir:n=r,encoding:o="utf8",reject:i=!0,cleanup:a=!0,all:s=!1,windowsHide:c=!0,killSignal:f="SIGTERM",forceKillAfterDelay:u=!0,gracefulCancel:d=!1,ipcInput:p,ipc:m=p!==void 0||d,serialization:h="advanced",...b})=>({...b,extendEnv:e,preferLocal:t,cwd:r,localDirectory:n,encoding:o,reject:i,cleanup:a,all:s,windowsHide:c,killSignal:f,forceKillAfterDelay:u,gracefulCancel:d,ipcInput:p,ipc:m,serialization:h}),hh=({env:e,extendEnv:t,preferLocal:r,node:n,localDirectory:o,nodePath:i})=>{let a=t?{...ao.default.env,...e}:e;return r||n?$s({env:a,cwd:o,execPath:i,preferLocal:r,addExecPath:n}):a}});var br,co=l(()=>{br=(e,t,r)=>r.shell&&t.length>0?[[e,...t].join(" "),[],r]:[e,t,r]});function je(e){if(typeof e=="string")return gh(e);if(!(ArrayBuffer.isView(e)&&e.BYTES_PER_ELEMENT===1))throw new Error("Input must be a string or a Uint8Array");return bh(e)}var gh,bh,Xc,yh,Qc,wh,lo=l(()=>{gh=e=>e.at(-1)===Xc?e.slice(0,e.at(-2)===Qc?-2:-1):e,bh=e=>e.at(-1)===yh?e.subarray(0,e.at(-2)===wh?-2:-1):e,Xc=`
`,yh=Xc.codePointAt(0),Qc="\r",wh=Qc.codePointAt(0)});function N(e,{checkOpen:t=!0}={}){return e!==null&&typeof e=="object"&&(e.writable||e.readable||!t||e.writable===void 0&&e.readable===void 0)&&typeof e.pipe=="function"}function uo(e,{checkOpen:t=!0}={}){return N(e,{checkOpen:t})&&(e.writable||!t)&&typeof e.write=="function"&&typeof e.end=="function"&&typeof e.writable=="boolean"&&typeof e.writableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function we(e,{checkOpen:t=!0}={}){return N(e,{checkOpen:t})&&(e.readable||!t)&&typeof e.read=="function"&&typeof e.readable=="boolean"&&typeof e.readableObjectMode=="boolean"&&typeof e.destroy=="function"&&typeof e.destroyed=="boolean"}function fo(e,t){return uo(e,t)&&we(e,t)}var Se=l(()=>{});function el(){return this[mo].next()}function tl(e){return this[mo].return(e)}function ho({preventCancel:e=!1}={}){let t=this.getReader(),r=new po(t,e),n=Object.create(xh);return n[mo]=r,n}var Sh,po,mo,xh,rl=l(()=>{Sh=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype),po=class{#t;#r;#e=!1;#n=void 0;constructor(t,r){this.#t=t,this.#r=r}next(){let t=()=>this.#i();return this.#n=this.#n?this.#n.then(t,t):t(),this.#n}return(t){let r=()=>this.#o(t);return this.#n?this.#n.then(r,r):r()}async#i(){if(this.#e)return{done:!0,value:void 0};let t;try{t=await this.#t.read()}catch(r){throw this.#n=void 0,this.#e=!0,this.#t.releaseLock(),r}return t.done&&(this.#n=void 0,this.#e=!0,this.#t.releaseLock()),t}async#o(t){if(this.#e)return{done:!0,value:t};if(this.#e=!0,!this.#r){let r=this.#t.cancel(t);return this.#t.releaseLock(),await r,{done:!0,value:t}}return this.#t.releaseLock(),{done:!0,value:t}}},mo=Symbol();Object.defineProperty(el,"name",{value:"next"});Object.defineProperty(tl,"name",{value:"return"});xh=Object.create(Sh,{next:{enumerable:!0,configurable:!0,writable:!0,value:el},return:{enumerable:!0,configurable:!0,writable:!0,value:tl}})});var nl=l(()=>{});var ol=l(()=>{rl();nl()});var il,$h,Eh,vh,lt,go=l(()=>{Se();ol();il=e=>{if(we(e,{checkOpen:!1})&&lt.on!==void 0)return Eh(e);if(typeof e?.[Symbol.asyncIterator]=="function")return e;if($h.call(e)==="[object ReadableStream]")return ho.call(e);throw new TypeError("The first argument must be a Readable, a ReadableStream, or an async iterable.")},{toString:$h}=Object.prototype,Eh=async function*(e){let t=new AbortController,r={};vh(e,t,r);try{for await(let[n]of lt.on(e,"data",{signal:t.signal}))yield n}catch(n){if(r.error!==void 0)throw r.error;if(!t.signal.aborted)throw n}finally{e.destroy()}},vh=async(e,t,r)=>{try{await lt.finished(e,{cleanup:!0,readable:!0,writable:!1,error:!1})}catch(n){r.error=n}finally{t.abort()}},lt={}});var We,Ah,cl,al,Dh,sl,z,ut=l(()=>{go();We=async(e,{init:t,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:a,finalize:s},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{let f=il(e),u=t();u.length=0;try{for await(let d of f){let p=Dh(d),m=r[p](d,u);cl({convertedChunk:m,state:u,getSize:n,truncateChunk:o,addChunk:i,maxBuffer:c})}return Ah({state:u,convertChunk:r,getSize:n,truncateChunk:o,addChunk:i,getFinalChunk:a,maxBuffer:c}),s(u)}catch(d){let p=typeof d=="object"&&d!==null?d:new Error(d);throw p.bufferedData=s(u),p}},Ah=({state:e,getSize:t,truncateChunk:r,addChunk:n,getFinalChunk:o,maxBuffer:i})=>{let a=o(e);a!==void 0&&cl({convertedChunk:a,state:e,getSize:t,truncateChunk:r,addChunk:n,maxBuffer:i})},cl=({convertedChunk:e,state:t,getSize:r,truncateChunk:n,addChunk:o,maxBuffer:i})=>{let a=r(e),s=t.length+a;if(s<=i){al(e,t,o,s);return}let c=n(e,i-t.length);throw c!==void 0&&al(c,t,o,i),new z},al=(e,t,r,n)=>{t.contents=r(e,t,n),t.length=n},Dh=e=>{let t=typeof e;if(t==="string")return"string";if(t!=="object"||e===null)return"others";if(globalThis.Buffer?.isBuffer(e))return"buffer";let r=sl.call(e);return r==="[object ArrayBuffer]"?"arrayBuffer":r==="[object DataView]"?"dataView":Number.isInteger(e.byteLength)&&Number.isInteger(e.byteOffset)&&sl.call(e.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:sl}=Object.prototype,z=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}}});var Q,ft,yr,wr,Sr,xr=l(()=>{Q=e=>e,ft=()=>{},yr=({contents:e})=>e,wr=e=>{throw new Error(`Streams in object mode are not supported: ${String(e)}`)},Sr=e=>e.length});async function $r(e,t){return We(e,kh,t)}var Th,Ih,Oh,kh,ll=l(()=>{ut();xr();Th=()=>({contents:[]}),Ih=()=>1,Oh=(e,{contents:t})=>(t.push(e),t),kh={init:Th,convertChunk:{string:Q,buffer:Q,arrayBuffer:Q,dataView:Q,typedArray:Q,others:Q},getSize:Ih,truncateChunk:ft,addChunk:Oh,getFinalChunk:ft,finalize:yr}});async function Er(e,t){return We(e,Nh,t)}var Rh,Ph,Ch,ul,fl,Mh,Uh,_h,Lh,pl,dl,Fh,ml,Nh,hl=l(()=>{ut();xr();Rh=()=>({contents:new ArrayBuffer(0)}),Ph=e=>Ch.encode(e),Ch=new TextEncoder,ul=e=>new Uint8Array(e),fl=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Mh=(e,t)=>e.slice(0,t),Uh=(e,{contents:t,length:r},n)=>{let o=ml()?Lh(t,n):_h(t,n);return new Uint8Array(o).set(e,r),o},_h=(e,t)=>{if(t<=e.byteLength)return e;let r=new ArrayBuffer(pl(t));return new Uint8Array(r).set(new Uint8Array(e),0),r},Lh=(e,t)=>{if(t<=e.maxByteLength)return e.resize(t),e;let r=new ArrayBuffer(t,{maxByteLength:pl(t)});return new Uint8Array(r).set(new Uint8Array(e),0),r},pl=e=>dl**Math.ceil(Math.log(e)/Math.log(dl)),dl=2,Fh=({contents:e,length:t})=>ml()?e:e.slice(0,t),ml=()=>"resize"in ArrayBuffer.prototype,Nh={init:Rh,convertChunk:{string:Ph,buffer:ul,arrayBuffer:ul,dataView:fl,typedArray:fl,others:wr},getSize:Sr,truncateChunk:Mh,addChunk:Uh,getFinalChunk:ft,finalize:Fh}});async function Ar(e,t){return We(e,Gh,t)}var Bh,vr,jh,Wh,zh,Gh,gl=l(()=>{ut();xr();Bh=()=>({contents:"",textDecoder:new TextDecoder}),vr=(e,{textDecoder:t})=>t.decode(e,{stream:!0}),jh=(e,{contents:t})=>t+e,Wh=(e,t)=>e.slice(0,t),zh=({textDecoder:e})=>{let t=e.decode();return t===""?void 0:t},Gh={init:Bh,convertChunk:{string:Q,buffer:vr,arrayBuffer:vr,dataView:vr,typedArray:vr,others:wr},getSize:Sr,truncateChunk:Wh,addChunk:jh,getFinalChunk:zh,finalize:yr}});var bl=l(()=>{ll();hl();gl();ut()});var yl,wl,Dr=l(()=>{yl=require("node:events"),wl=require("node:stream/promises");go();bl();Object.assign(lt,{on:yl.on,finished:wl.finished})});var Sl,Vh,xl,$l,Hh,El,vl,Tr,xe=l(()=>{Dr();J();X();Sl=({error:e,stream:t,readableObjectMode:r,lines:n,encoding:o,fdNumber:i})=>{if(!(e instanceof z))throw e;if(i==="all")return e;let a=Vh(r,n,o);throw e.maxBufferInfo={fdNumber:i,unit:a},t.destroy(),e},Vh=(e,t,r)=>e?"objects":t?"lines":r==="buffer"?"bytes":"characters",xl=(e,t,r)=>{if(t.length!==r)return;let n=new z;throw n.maxBufferInfo={fdNumber:"ipc"},n},$l=(e,t)=>{let{streamName:r,threshold:n,unit:o}=Hh(e,t);return`Command's ${r} was larger than ${n} ${o}`},Hh=(e,t)=>{if(e?.maxBufferInfo===void 0)return{streamName:"output",threshold:t[1],unit:"bytes"};let{maxBufferInfo:{fdNumber:r,unit:n}}=e;delete e.maxBufferInfo;let o=Z(t,r);return r==="ipc"?{streamName:"IPC output",threshold:o,unit:"messages"}:{streamName:Ct(r),threshold:o,unit:n}},El=(e,t,r)=>e?.code==="ENOBUFS"&&t!==null&&t.some(n=>n!==null&&n.length>Tr(r)),vl=(e,t,r)=>{if(!t)return e;let n=Tr(r);return e.length>n?e.slice(0,n):e},Tr=([,e])=>e});var Dl,Tl,Yh,qh,Kh,Jh,Zh,Al,Il=l(()=>{Dl=require("node:util");lo();k();io();_t();xe();ot();ge();Tl=({stdio:e,all:t,ipcOutput:r,originalError:n,signal:o,signalDescription:i,exitCode:a,escapedCommand:s,timedOut:c,isCanceled:f,isGracefullyCanceled:u,isMaxBuffer:d,isForcefullyTerminated:p,forceKillAfterDelay:m,killSignal:h,maxBuffer:b,timeout:x,cwd:y})=>{let v=n?.code,T=Yh({originalError:n,timedOut:c,timeout:x,isMaxBuffer:d,maxBuffer:b,errorCode:v,signal:o,signalDescription:i,exitCode:a,isCanceled:f,isGracefullyCanceled:u,isForcefullyTerminated:p,forceKillAfterDelay:m,killSignal:h}),C=Kh(n,y),Y=C===void 0?"":`
${C}`,te=`${T}: ${s}${Y}`,pe=t===void 0?[e[2],e[1]]:[t],Te=[te,...pe,...e.slice(3),r.map(re=>Jh(re)).join(`
`)].map(re=>et(je(Zh(re)))).filter(Boolean).join(`

`);return{originalMessage:C,shortMessage:te,message:Te}},Yh=({originalError:e,timedOut:t,timeout:r,isMaxBuffer:n,maxBuffer:o,errorCode:i,signal:a,signalDescription:s,exitCode:c,isCanceled:f,isGracefullyCanceled:u,isForcefullyTerminated:d,forceKillAfterDelay:p,killSignal:m})=>{let h=qh(d,p);return t?`Command timed out after ${r} milliseconds${h}`:u?a===void 0?`Command was gracefully canceled with exit code ${c}`:d?`Command was gracefully canceled${h}`:`Command was gracefully canceled with ${a} (${s})`:f?`Command was canceled${h}`:n?`${$l(e,o)}${h}`:i!==void 0?`Command failed with ${i}${h}`:d?`Command was killed with ${m} (${qt(m)})${h}`:a!==void 0?`Command was killed with ${a} (${s})`:c!==void 0?`Command failed with exit code ${c}`:"Command failed"},qh=(e,t)=>e?` and was forcefully terminated after ${t} milliseconds`:"",Kh=(e,t)=>{if(e instanceof L)return;let r=Ds(e)?e.originalMessage:String(e?.message??e),n=et(Kc(r,t));return n===""?void 0:n},Jh=e=>typeof e=="string"?e:(0,Dl.inspect)(e),Zh=e=>Array.isArray(e)?e.map(t=>je(Al(t))).filter(Boolean).join(`
`):Al(e),Al=e=>typeof e=="string"?e:E(e)?kt(e):""});var Ir,ze,dt,Xh,Ol,Qh,pt=l(()=>{ot();Wt();ge();Il();Ir=({command:e,escapedCommand:t,stdio:r,all:n,ipcOutput:o,options:{cwd:i},startTime:a})=>Ol({command:e,escapedCommand:t,cwd:i,durationMs:In(a),failed:!1,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isTerminated:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,exitCode:0,stdout:r[1],stderr:r[2],all:n,stdio:r,ipcOutput:o,pipedFrom:[]}),ze=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:a})=>dt({error:e,command:t,escapedCommand:r,startTime:i,timedOut:!1,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:!1,isForcefullyTerminated:!1,stdio:Array.from({length:n.length}),ipcOutput:[],options:o,isSync:a}),dt=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:a,isMaxBuffer:s,isForcefullyTerminated:c,exitCode:f,signal:u,stdio:d,all:p,ipcOutput:m,options:{timeoutDuration:h,timeout:b=h,forceKillAfterDelay:x,killSignal:y,cwd:v,maxBuffer:T},isSync:C})=>{let{exitCode:Y,signal:te,signalDescription:pe}=Qh(f,u),{originalMessage:Te,shortMessage:re,message:mn}=Tl({stdio:d,all:p,ipcOutput:m,originalError:e,signal:te,signalDescription:pe,exitCode:Y,escapedCommand:r,timedOut:o,isCanceled:i,isGracefullyCanceled:a,isMaxBuffer:s,isForcefullyTerminated:c,forceKillAfterDelay:x,killSignal:y,maxBuffer:T,timeout:b,cwd:v}),Xe=vs(e,mn,C);return Object.assign(Xe,Xh({error:Xe,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:a,isMaxBuffer:s,isForcefullyTerminated:c,exitCode:Y,signal:te,signalDescription:pe,stdio:d,all:p,ipcOutput:m,cwd:v,originalMessage:Te,shortMessage:re})),Xe},Xh=({error:e,command:t,escapedCommand:r,startTime:n,timedOut:o,isCanceled:i,isGracefullyCanceled:a,isMaxBuffer:s,isForcefullyTerminated:c,exitCode:f,signal:u,signalDescription:d,stdio:p,all:m,ipcOutput:h,cwd:b,originalMessage:x,shortMessage:y})=>Ol({shortMessage:y,originalMessage:x,command:t,escapedCommand:r,cwd:b,durationMs:In(n),failed:!0,timedOut:o,isCanceled:i,isGracefullyCanceled:a,isTerminated:u!==void 0,isMaxBuffer:s,isForcefullyTerminated:c,exitCode:f,signal:u,signalDescription:d,code:e.cause?.code,stdout:p[1],stderr:p[2],all:m,stdio:p,ipcOutput:h,pipedFrom:[]}),Ol=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),Qh=(e,t)=>{let r=e===null?void 0:e,n=t===null?void 0:t,o=n===void 0?void 0:qt(t);return{exitCode:r,signal:n,signalDescription:o}}});function eg(e){return{days:Math.trunc(e/864e5),hours:Math.trunc(e/36e5%24),minutes:Math.trunc(e/6e4%60),seconds:Math.trunc(e/1e3%60),milliseconds:Math.trunc(e%1e3),microseconds:Math.trunc(kl(e*1e3)%1e3),nanoseconds:Math.trunc(kl(e*1e6)%1e3)}}function tg(e){return{days:e/86400000n,hours:e/3600000n%24n,minutes:e/60000n%60n,seconds:e/1000n%60n,milliseconds:e%1000n,microseconds:0n,nanoseconds:0n}}function bo(e){switch(typeof e){case"number":{if(Number.isFinite(e))return eg(e);break}case"bigint":return tg(e)}throw new TypeError("Expected a finite number or bigint")}var kl,Rl=l(()=>{kl=e=>Number.isFinite(e)?e:0});function yo(e,t){let r=typeof e=="bigint";if(!r&&!Number.isFinite(e))throw new TypeError("Expected a finite number or bigint");t={...t};let n=e<0?"-":"";e=e<0?-e:e,t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.unitCount=1,t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);let o=[],i=(u,d)=>{let p=Math.floor(u*10**d+og);return(Math.round(p)/10**d).toFixed(d)},a=(u,d,p,m)=>{if(!((o.length===0||!t.colonNotation)&&rg(u)&&!(t.colonNotation&&p==="m"))){if(m??=String(u),t.colonNotation){let h=m.includes(".")?m.split(".")[0].length:m.length,b=o.length>0?2:1;m="0".repeat(Math.max(0,b-h))+m}else m+=t.verbose?" "+ng(d,u):p;o.push(m)}},s=bo(e),c=BigInt(s.days);if(t.hideYearAndDays?a(BigInt(c)*24n+BigInt(s.hours),"hour","h"):(t.hideYear?a(c,"day","d"):(a(c/365n,"year","y"),a(c%365n,"day","d")),a(Number(s.hours),"hour","h")),a(Number(s.minutes),"minute","m"),!t.hideSeconds)if(t.separateMilliseconds||t.formatSubMilliseconds||!t.colonNotation&&e<1e3&&!t.subSecondsAsDecimals){let u=Number(s.seconds),d=Number(s.milliseconds),p=Number(s.microseconds),m=Number(s.nanoseconds);if(a(u,"second","s"),t.formatSubMilliseconds)a(d,"millisecond","ms"),a(p,"microsecond","\xB5s"),a(m,"nanosecond","ns");else{let h=d+p/1e3+m/1e6,b=typeof t.millisecondsDecimalDigits=="number"?t.millisecondsDecimalDigits:0,x=h>=1?Math.round(h):Math.ceil(h),y=b?h.toFixed(b):x;a(Number.parseFloat(y),"millisecond","ms",y)}}else{let u=(r?Number(e%ig):e)/1e3%60,d=typeof t.secondsDecimalDigits=="number"?t.secondsDecimalDigits:1,p=i(u,d),m=t.keepDecimalsOnWholeSeconds?p:p.replace(/\.0+$/,"");a(Number.parseFloat(m),"second","s",m)}if(o.length===0)return n+"0"+(t.verbose?" milliseconds":"ms");let f=t.colonNotation?":":" ";return typeof t.unitCount=="number"&&(o=o.slice(0,Math.max(t.unitCount,1))),n+o.join(f)}var rg,ng,og,ig,Pl=l(()=>{Rl();rg=e=>e===0||e===0n,ng=(e,t)=>t===1||t===1n?e:`${e}s`,og=1e-7,ig=24n*60n*60n*1000n});var Cl,Ml=l(()=>{Pe();Cl=(e,t)=>{e.failed&&B({type:"error",verboseMessage:e.shortMessage,verboseInfo:t,result:e})}});var Ul,ag,_l=l(()=>{Pl();ne();Pe();Ml();Ul=(e,t)=>{ke(t)&&(Cl(e,t),ag(e,t))},ag=(e,t)=>{let r=`(done in ${yo(e.durationMs)})`;B({type:"duration",verboseMessage:r,verboseInfo:t,result:e})}});var Ge,Or=l(()=>{_l();Ge=(e,t,{reject:r})=>{if(Ul(e,t),e.failed&&r)throw e;return e}});var Nl,sg,cg,Bl,jl,Ll,lg,wo,Fl,$e,Wl,ug,kr,zl,fg,dg,So,Gl,pg,Vl,Rr,mg,xo,hg,gg,Hl,U,Pr,$o,Yl,ql,ce,I=l(()=>{Se();q();k();Nl=(e,t)=>$e(e)?"asyncGenerator":Wl(e)?"generator":kr(e)?"fileUrl":fg(e)?"filePath":mg(e)?"webStream":N(e,{checkOpen:!1})?"native":E(e)?"uint8Array":hg(e)?"asyncIterable":gg(e)?"iterable":xo(e)?Bl({transform:e},t):ug(e)?sg(e,t):"native",sg=(e,t)=>fo(e.transform,{checkOpen:!1})?cg(e,t):xo(e.transform)?Bl(e,t):lg(e,t),cg=(e,t)=>(jl(e,t,"Duplex stream"),"duplex"),Bl=(e,t)=>(jl(e,t,"web TransformStream"),"webTransform"),jl=({final:e,binary:t,objectMode:r},n,o)=>{Ll(e,`${n}.final`,o),Ll(t,`${n}.binary`,o),wo(r,`${n}.objectMode`)},Ll=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${t}\` option can only be defined when using a generator, not a ${r}.`)},lg=({transform:e,final:t,binary:r,objectMode:n},o)=>{if(e!==void 0&&!Fl(e))throw new TypeError(`The \`${o}.transform\` option must be a generator, a Duplex stream or a web TransformStream.`);if(fo(t,{checkOpen:!1}))throw new TypeError(`The \`${o}.final\` option must not be a Duplex stream.`);if(xo(t))throw new TypeError(`The \`${o}.final\` option must not be a web TransformStream.`);if(t!==void 0&&!Fl(t))throw new TypeError(`The \`${o}.final\` option must be a generator.`);return wo(r,`${o}.binary`),wo(n,`${o}.objectMode`),$e(e)||$e(t)?"asyncGenerator":"generator"},wo=(e,t)=>{if(e!==void 0&&typeof e!="boolean")throw new TypeError(`The \`${t}\` option must use a boolean.`)},Fl=e=>$e(e)||Wl(e),$e=e=>Object.prototype.toString.call(e)==="[object AsyncGeneratorFunction]",Wl=e=>Object.prototype.toString.call(e)==="[object GeneratorFunction]",ug=e=>S(e)&&(e.transform!==void 0||e.final!==void 0),kr=e=>Object.prototype.toString.call(e)==="[object URL]",zl=e=>kr(e)&&e.protocol!=="file:",fg=e=>S(e)&&Object.keys(e).length>0&&Object.keys(e).every(t=>dg.has(t))&&So(e.file),dg=new Set(["file","append"]),So=e=>typeof e=="string",Gl=(e,t)=>e==="native"&&typeof t=="string"&&!pg.has(t),pg=new Set(["ipc","ignore","inherit","overlapped","pipe"]),Vl=e=>Object.prototype.toString.call(e)==="[object ReadableStream]",Rr=e=>Object.prototype.toString.call(e)==="[object WritableStream]",mg=e=>Vl(e)||Rr(e),xo=e=>Vl(e?.readable)&&Rr(e?.writable),hg=e=>Hl(e)&&typeof e[Symbol.asyncIterator]=="function",gg=e=>Hl(e)&&typeof e[Symbol.iterator]=="function",Hl=e=>typeof e=="object"&&e!==null,U=new Set(["generator","asyncGenerator","duplex","webTransform"]),Pr=new Set(["fileUrl","filePath","fileNumber"]),$o=new Set(["fileUrl","filePath"]),Yl=new Set([...$o,"webStream","nodeStream"]),ql=new Set(["webTransform","duplex"]),ce={generator:"a generator",asyncGenerator:"an async generator",fileUrl:"a file URL",filePath:"a file path string",fileNumber:"a file descriptor number",webStream:"a web stream",nodeStream:"a Node.js stream",webTransform:"a web TransformStream",duplex:"a Duplex stream",native:"any value",iterable:"an iterable",asyncIterable:"an async iterable",string:"a string",uint8Array:"a Uint8Array"}});var Eo,bg,yg,Kl,vo=l(()=>{I();Eo=(e,t,r,n)=>n==="output"?bg(e,t,r):yg(e,t,r),bg=(e,t,r)=>{let n=t!==0&&r[t-1].value.readableObjectMode;return{writableObjectMode:n,readableObjectMode:e??n}},yg=(e,t,r)=>{let n=t===0?e===!0:r[t-1].value.readableObjectMode,o=t!==r.length-1&&(e??n);return{writableObjectMode:n,readableObjectMode:o}},Kl=(e,t)=>{let r=e.findLast(({type:n})=>U.has(n));return r===void 0?!1:t==="input"?r.value.writableObjectMode:r.value.readableObjectMode}});var Jl,wg,Sg,xg,$g,Eg,vg,Zl=l(()=>{q();ye();I();vo();Jl=(e,t,r,n)=>[...e.filter(({type:o})=>!U.has(o)),...wg(e,t,r,n)],wg=(e,t,r,{encoding:n})=>{let o=e.filter(({type:a})=>U.has(a)),i=Array.from({length:o.length});for(let[a,s]of Object.entries(o))i[a]=Sg({stdioItem:s,index:Number(a),newTransforms:i,optionName:t,direction:r,encoding:n});return vg(i,r)},Sg=({stdioItem:e,stdioItem:{type:t},index:r,newTransforms:n,optionName:o,direction:i,encoding:a})=>t==="duplex"?xg({stdioItem:e,optionName:o}):t==="webTransform"?$g({stdioItem:e,index:r,newTransforms:n,direction:i}):Eg({stdioItem:e,index:r,newTransforms:n,direction:i,encoding:a}),xg=({stdioItem:e,stdioItem:{value:{transform:t,transform:{writableObjectMode:r,readableObjectMode:n},objectMode:o=n}},optionName:i})=>{if(o&&!n)throw new TypeError(`The \`${i}.objectMode\` option can only be \`true\` if \`new Duplex({objectMode: true})\` is used.`);if(!o&&n)throw new TypeError(`The \`${i}.objectMode\` option cannot be \`false\` if \`new Duplex({objectMode: true})\` is used.`);return{...e,value:{transform:t,writableObjectMode:r,readableObjectMode:n}}},$g=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o})=>{let{transform:i,objectMode:a}=S(t)?t:{transform:t},{writableObjectMode:s,readableObjectMode:c}=Eo(a,r,n,o);return{...e,value:{transform:i,writableObjectMode:s,readableObjectMode:c}}},Eg=({stdioItem:e,stdioItem:{value:t},index:r,newTransforms:n,direction:o,encoding:i})=>{let{transform:a,final:s,binary:c=!1,preserveNewlines:f=!1,objectMode:u}=S(t)?t:{transform:t},d=c||R.has(i),{writableObjectMode:p,readableObjectMode:m}=Eo(u,r,n,o);return{...e,value:{transform:a,final:s,binary:d,preserveNewlines:f,writableObjectMode:p,readableObjectMode:m}}},vg=(e,t)=>t==="input"?e.reverse():e});var Cr,Xl,Ag,Dg,Ve,Ao,Ql,Tg,Ig,eu=l(()=>{Cr=$(require("node:process"),1);Se();I();Xl=(e,t,r)=>{let n=e.map(o=>Ag(o,t));if(n.includes("input")&&n.includes("output"))throw new TypeError(`The \`${r}\` option must not be an array of both readable and writable values.`);return n.find(Boolean)??Ig},Ag=({type:e,value:t},r)=>Dg[r]??Ql[e](t),Dg=["input","output","output"],Ve=()=>{},Ao=()=>"input",Ql={generator:Ve,asyncGenerator:Ve,fileUrl:Ve,filePath:Ve,iterable:Ao,asyncIterable:Ao,uint8Array:Ao,webStream:e=>Rr(e)?"output":"input",nodeStream(e){return we(e,{checkOpen:!1})?uo(e,{checkOpen:!1})?void 0:"input":"output"},webTransform:Ve,duplex:Ve,native(e){let t=Tg(e);if(t!==void 0)return t;if(N(e,{checkOpen:!1}))return Ql.nodeStream(e)}},Tg=e=>{if([0,Cr.default.stdin].includes(e))return"input";if([1,2,Cr.default.stdout,Cr.default.stderr].includes(e))return"output"},Ig="output"});var tu,ru=l(()=>{tu=(e,t)=>t&&!e.includes("ipc")?[...e,"ipc"]:e});var nu,Og,kg,ou,Rg,Pg,iu=l(()=>{J();ru();ne();nu=({stdio:e,ipc:t,buffer:r,...n},o,i)=>{let a=Og(e,n).map((s,c)=>ou(s,c));return i?Rg(a,r,o):tu(a,t)},Og=(e,t)=>{if(e===void 0)return M.map(n=>t[n]);if(kg(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${M.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return[e,e,e];if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,M.length);return Array.from({length:r},(n,o)=>e[o])},kg=e=>M.some(t=>e[t]!==void 0),ou=(e,t)=>Array.isArray(e)?e.map(r=>ou(r,t)):e??(t>=M.length?"ignore":"pipe"),Rg=(e,t,r)=>e.map((n,o)=>!t[o]&&o!==0&&!Re(r,o)&&Pg(n)?"ignore":n),Pg=e=>e==="pipe"||Array.isArray(e)&&e.every(t=>t==="pipe")});var su,cu,lu,Cg,Mg,Ug,_g,au,uu=l(()=>{su=require("node:fs"),cu=$(require("node:tty"),1);Se();J();k();ae();lu=({stdioItem:e,stdioItem:{type:t},isStdioArray:r,fdNumber:n,direction:o,isSync:i})=>!r||t!=="native"?e:i?Cg({stdioItem:e,fdNumber:n,direction:o}):_g({stdioItem:e,fdNumber:n}),Cg=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n,direction:o})=>{let i=Mg({value:t,optionName:r,fdNumber:n,direction:o});if(i!==void 0)return i;if(N(t,{checkOpen:!1}))throw new TypeError(`The \`${r}: Stream\` option cannot both be an array and include a stream with synchronous methods.`);return e},Mg=({value:e,optionName:t,fdNumber:r,direction:n})=>{let o=Ug(e,r);if(o!==void 0){if(n==="output")return{type:"fileNumber",value:o,optionName:t};if(cu.default.isatty(o))throw new TypeError(`The \`${t}: ${Xt(e)}\` option is invalid: it cannot be a TTY with synchronous methods.`);return{type:"uint8Array",value:K((0,su.readFileSync)(o)),optionName:t}}},Ug=(e,t)=>{if(e==="inherit")return t;if(typeof e=="number")return e;let r=Pt.indexOf(e);if(r!==-1)return r},_g=({stdioItem:e,stdioItem:{value:t,optionName:r},fdNumber:n})=>t==="inherit"?{type:"nodeStream",value:au(n,t,r),optionName:r}:typeof t=="number"?{type:"nodeStream",value:au(t,t,r),optionName:r}:N(t,{checkOpen:!1})?{type:"nodeStream",value:t,optionName:r}:e,au=(e,t,r)=>{let n=Pt[e];if(n===void 0)throw new TypeError(`The \`${r}: ${t}\` option is invalid: no such standard stream.`);return n}});var fu,Lg,Fg,Ng,Bg,du=l(()=>{Se();k();I();fu=({input:e,inputFile:t},r)=>r===0?[...Lg(e),...Ng(t)]:[],Lg=e=>e===void 0?[]:[{type:Fg(e),value:e,optionName:"input"}],Fg=e=>{if(we(e,{checkOpen:!1}))return"nodeStream";if(typeof e=="string")return"string";if(E(e))return"uint8Array";throw new Error("The `input` option must be a string, a Uint8Array or a Node.js Readable stream.")},Ng=e=>e===void 0?[]:[{...Bg(e),optionName:"inputFile"}],Bg=e=>{if(kr(e))return{type:"fileUrl",value:e};if(So(e))return{type:"filePath",value:{file:e}};throw new Error("The `inputFile` option must be a file path string or a file URL.")}});var pu,mu,jg,Wg,hu,zg,Gg,gu,bu=l(()=>{I();pu=e=>e.filter((t,r)=>e.every((n,o)=>t.value!==n.value||r>=o||t.type==="generator"||t.type==="asyncGenerator")),mu=({stdioItem:{type:e,value:t,optionName:r},direction:n,fileDescriptors:o,isSync:i})=>{let a=jg(o,e);if(a.length!==0){if(i){Wg({otherStdioItems:a,type:e,value:t,optionName:r,direction:n});return}if(Yl.has(e))return hu({otherStdioItems:a,type:e,value:t,optionName:r,direction:n});ql.has(e)&&Gg({otherStdioItems:a,type:e,value:t,optionName:r})}},jg=(e,t)=>e.flatMap(({direction:r,stdioItems:n})=>n.filter(o=>o.type===t).map((o=>({...o,direction:r})))),Wg=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{$o.has(t)&&hu({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})},hu=({otherStdioItems:e,type:t,value:r,optionName:n,direction:o})=>{let i=e.filter(s=>zg(s,r));if(i.length===0)return;let a=i.find(s=>s.direction!==o);return gu(a,n,t),o==="output"?i[0].stream:void 0},zg=({type:e,value:t},r)=>e==="filePath"?t.file===r.file:e==="fileUrl"?t.href===r.href:t===r,Gg=({otherStdioItems:e,type:t,value:r,optionName:n})=>{let o=e.find(({value:{transform:i}})=>i===r.transform);gu(o,n,t)},gu=(e,t,r)=>{if(e!==void 0)throw new TypeError(`The \`${e.optionName}\` and \`${t}\` options must not target ${ce[r]} that is the same.`)}});var Mr,Vg,Hg,Yg,qg,Kg,Jg,Zg,Xg,Qg,eb,tb,Do,rb,Ur=l(()=>{J();Zl();vo();I();eu();iu();uu();du();bu();Mr=(e,t,r,n)=>{let i=nu(t,r,n).map((s,c)=>Vg({stdioOption:s,fdNumber:c,options:t,isSync:n})),a=Qg({initialFileDescriptors:i,addProperties:e,options:t,isSync:n});return t.stdio=a.map(({stdioItems:s})=>rb(s)),a},Vg=({stdioOption:e,fdNumber:t,options:r,isSync:n})=>{let o=Ct(t),{stdioItems:i,isStdioArray:a}=Hg({stdioOption:e,fdNumber:t,options:r,optionName:o}),s=Xl(i,t,o),c=i.map(d=>lu({stdioItem:d,isStdioArray:a,fdNumber:t,direction:s,isSync:n})),f=Jl(c,o,s,r),u=Kl(f,s);return Xg(f,u),{direction:s,objectMode:u,stdioItems:f}},Hg=({stdioOption:e,fdNumber:t,options:r,optionName:n})=>{let i=[...(Array.isArray(e)?e:[e]).map(c=>Yg(c,n)),...fu(r,t)],a=pu(i),s=a.length>1;return qg(a,s,n),Jg(a),{stdioItems:a,isStdioArray:s}},Yg=(e,t)=>({type:Nl(e,t),value:e,optionName:t}),qg=(e,t,r)=>{if(e.length===0)throw new TypeError(`The \`${r}\` option must not be an empty array.`);if(t){for(let{value:n,optionName:o}of e)if(Kg.has(n))throw new Error(`The \`${o}\` option must not include \`${n}\`.`)}},Kg=new Set(["ignore","ipc"]),Jg=e=>{for(let t of e)Zg(t)},Zg=({type:e,value:t,optionName:r})=>{if(zl(t))throw new TypeError(`The \`${r}: URL\` option must use the \`file:\` scheme.
For example, you can use the \`pathToFileURL()\` method of the \`url\` core module.`);if(Gl(e,t))throw new TypeError(`The \`${r}: { file: '...' }\` option must be used instead of \`${r}: '...'\`.`)},Xg=(e,t)=>{if(!t)return;let r=e.find(({type:n})=>Pr.has(n));if(r!==void 0)throw new TypeError(`The \`${r.optionName}\` option cannot use both files and transforms in objectMode.`)},Qg=({initialFileDescriptors:e,addProperties:t,options:r,isSync:n})=>{let o=[];try{for(let i of e)o.push(eb({fileDescriptor:i,fileDescriptors:o,addProperties:t,options:r,isSync:n}));return o}catch(i){throw Do(o),i}},eb=({fileDescriptor:{direction:e,objectMode:t,stdioItems:r},fileDescriptors:n,addProperties:o,options:i,isSync:a})=>{let s=r.map(c=>tb({stdioItem:c,addProperties:o,direction:e,options:i,fileDescriptors:n,isSync:a}));return{direction:e,objectMode:t,stdioItems:s}},tb=({stdioItem:e,addProperties:t,direction:r,options:n,fileDescriptors:o,isSync:i})=>{let a=mu({stdioItem:e,direction:r,fileDescriptors:o,isSync:i});return a!==void 0?{...e,stream:a}:{...e,...t[r][e.type](e,n)}},Do=e=>{for(let{stdioItems:t}of e)for(let{stream:r}of t)r!==void 0&&!_(r)&&r.destroy()},rb=e=>{if(e.length>1)return e.some(({value:n})=>n==="overlapped")?"overlapped":"pipe";let[{type:t,value:r}]=e;return t==="native"?r:"pipe"}});var To,wu,G,nb,Su,yu,ob,xu=l(()=>{To=require("node:fs");k();Ur();I();wu=(e,t)=>Mr(ob,e,t,!0),G=({type:e,optionName:t})=>{Su(t,ce[e])},nb=({optionName:e,value:t})=>((t==="ipc"||t==="overlapped")&&Su(e,`"${t}"`),{}),Su=(e,t)=>{throw new TypeError(`The \`${e}\` option cannot be ${t} with synchronous methods.`)},yu={generator(){},asyncGenerator:G,webStream:G,nodeStream:G,webTransform:G,duplex:G,asyncIterable:G,native:nb},ob={input:{...yu,fileUrl:({value:e})=>({contents:[K((0,To.readFileSync)(e))]}),filePath:({value:{file:e}})=>({contents:[K((0,To.readFileSync)(e))]}),fileNumber:G,iterable:({value:e})=>({contents:[...e]}),string:({value:e})=>({contents:[e]}),uint8Array:({value:e})=>({contents:[e]})},output:{...yu,fileUrl:({value:e})=>({path:e}),filePath:({value:{file:e,append:t}})=>({path:e,append:t}),fileNumber:({value:e})=>({path:e}),iterable:G,string:G,uint8Array:G}}});var ee,Io,mt=l(()=>{lo();ee=(e,{stripFinalNewline:t},r)=>Io(t,r)&&e!==void 0&&!Array.isArray(e)?je(e):e,Io=(e,t)=>t==="all"?e[1]||e[2]:e[t]});var _r,ko,$u,Eu,ib,ab,sb,vu,cb,Oo,lb,ub,fb,Lr=l(()=>{_r=(e,t,r,n)=>e||r?void 0:Eu(t,n),ko=(e,t,r)=>r?e.flatMap(n=>$u(n,t)):$u(e,t),$u=(e,t)=>{let{transform:r,final:n}=Eu(t,{});return[...r(e),...n()]},Eu=(e,t)=>(t.previousChunks="",{transform:ib.bind(void 0,t,e),final:sb.bind(void 0,t)}),ib=function*(e,t,r){if(typeof r!="string"){yield r;return}let{previousChunks:n}=e,o=-1;for(let i=0;i<r.length;i+=1)if(r[i]===`
`){let a=ab(r,i,t,e),s=r.slice(o+1,i+1-a);n.length>0&&(s=Oo(n,s),n=""),yield s,o=i}o!==r.length-1&&(n=Oo(n,r.slice(o+1))),e.previousChunks=n},ab=(e,t,r,n)=>r?0:(n.isWindowsNewline=t!==0&&e[t-1]==="\r",n.isWindowsNewline?2:1),sb=function*({previousChunks:e}){e.length>0&&(yield e)},vu=({binary:e,preserveNewlines:t,readableObjectMode:r,state:n})=>e||t||r?void 0:{transform:cb.bind(void 0,n)},cb=function*({isWindowsNewline:e=!1},t){let{unixNewline:r,windowsNewline:n,LF:o,concatBytes:i}=typeof t=="string"?lb:fb;if(t.at(-1)===o){yield t;return}yield i(t,e?n:r)},Oo=(e,t)=>`${e}${t}`,lb={windowsNewline:`\r
`,unixNewline:`
`,LF:`
`,concatBytes:Oo},ub=(e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r},fb={windowsNewline:new Uint8Array([13,10]),unixNewline:new Uint8Array([10]),LF:10,concatBytes:ub}});var Au,Du,db,Tu,pb,mb,Iu,Ou=l(()=>{Au=require("node:buffer");k();Du=(e,t)=>e?void 0:db.bind(void 0,t),db=function*(e,t){if(typeof t!="string"&&!E(t)&&!Au.Buffer.isBuffer(t))throw new TypeError(`The \`${e}\` option's transform must use "objectMode: true" to receive as input: ${typeof t}.`);yield t},Tu=(e,t)=>e?pb.bind(void 0,t):mb.bind(void 0,t),pb=function*(e,t){Iu(e,t),yield t},mb=function*(e,t){if(Iu(e,t),typeof t!="string"&&!E(t))throw new TypeError(`The \`${e}\` option's function must yield a string or an Uint8Array, not ${typeof t}.`);yield t},Iu=(e,t)=>{if(t==null)throw new TypeError(`The \`${e}\` option's function must not call \`yield ${t}\`.
Instead, \`yield\` should either be called with a value, or not be called at all. For example:
  if (condition) { yield value; }`)}});var ku,Ru,Fr,hb,gb,bb,Ro=l(()=>{ku=require("node:buffer"),Ru=require("node:string_decoder");k();Fr=(e,t,r)=>{if(r)return;if(e)return{transform:hb.bind(void 0,new TextEncoder)};let n=new Ru.StringDecoder(t);return{transform:gb.bind(void 0,n),final:bb.bind(void 0,n)}},hb=function*(e,t){ku.Buffer.isBuffer(t)?yield K(t):typeof t=="string"?yield e.encode(t):yield t},gb=function*(e,t){yield E(t)?e.write(t):t},bb=function*(e){let t=e.end();t!==""&&(yield t)}});var Po,Co,Nr,Pu,yb,Cu,wb,Mu=l(()=>{Po=require("node:util"),Co=(0,Po.callbackify)(async(e,t,r,n)=>{t.currentIterable=e(...r);try{for await(let o of t.currentIterable)n.push(o)}finally{delete t.currentIterable}}),Nr=async function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=wb}=t[r];for await(let o of n(e))yield*Nr(o,t,r+1)},Pu=async function*(e){for(let[t,{final:r}]of Object.entries(e))yield*yb(r,Number(t),e)},yb=async function*(e,t,r){if(e!==void 0)for await(let n of e())yield*Nr(n,r,t+1)},Cu=(0,Po.callbackify)(async({currentIterable:e},t)=>{if(e!==void 0){await(t?e.throw(t):e.return());return}if(t)throw t}),wb=function*(e){yield e}});var Mo,Uu,Ee,ht,Sb,xb,Uo=l(()=>{Mo=(e,t,r,n)=>{try{for(let o of e(...t))r.push(o);n()}catch(o){n(o)}},Uu=(e,t)=>[...t.flatMap(r=>[...Ee(r,e,0)]),...ht(e)],Ee=function*(e,t,r){if(r===t.length){yield e;return}let{transform:n=xb}=t[r];for(let o of n(e))yield*Ee(o,t,r+1)},ht=function*(e){for(let[t,{final:r}]of Object.entries(e))yield*Sb(r,Number(t),e)},Sb=function*(e,t,r){if(e!==void 0)for(let n of e())yield*Ee(n,r,t+1)},xb=function*(e){yield e}});var gt,_o,Br,_u,jr=l(()=>{gt=require("node:stream");I();Lr();Ou();Ro();Mu();Uo();_o=({value:e,value:{transform:t,final:r,writableObjectMode:n,readableObjectMode:o},optionName:i},{encoding:a})=>{let s={},c=_u(e,a,i),f=$e(t),u=$e(r),d=f?Co.bind(void 0,Nr,s):Mo.bind(void 0,Ee),p=f||u?Co.bind(void 0,Pu,s):Mo.bind(void 0,ht),m=f||u?Cu.bind(void 0,s):void 0;return{stream:new gt.Transform({writableObjectMode:n,writableHighWaterMark:(0,gt.getDefaultHighWaterMark)(n),readableObjectMode:o,readableHighWaterMark:(0,gt.getDefaultHighWaterMark)(o),transform(b,x,y){d([b,c,0],this,y)},flush(b){p([c],this,b)},destroy:m})}},Br=(e,t,r,n)=>{let o=t.filter(({type:a})=>a==="generator"),i=n?o.reverse():o;for(let{value:a,optionName:s}of i){let c=_u(a,r,s);e=Uu(c,e)}return e},_u=({transform:e,final:t,binary:r,writableObjectMode:n,readableObjectMode:o,preserveNewlines:i},a,s)=>{let c={};return[{transform:Du(n,s)},Fr(r,a,n),_r(r,i,n,c),{transform:e,final:t},{transform:Tu(o,s)},vu({binary:r,preserveNewlines:i,readableObjectMode:o,state:c})].filter(Boolean)}});var Lu,$b,Eb,vb,Ab,Fu=l(()=>{jr();k();I();Lu=(e,t)=>{for(let r of $b(e))Eb(e,r,t)},$b=e=>new Set(Object.entries(e).filter(([,{direction:t}])=>t==="input").map(([t])=>Number(t))),Eb=(e,t,r)=>{let{stdioItems:n}=e[t],o=n.filter(({contents:s})=>s!==void 0);if(o.length===0)return;if(t!==0){let[{type:s,optionName:c}]=o;throw new TypeError(`Only the \`stdin\` option, not \`${c}\`, can be ${ce[s]} with synchronous methods.`)}let a=o.map(({contents:s})=>s).map(s=>vb(s,n));r.input=Qe(a)},vb=(e,t)=>{let r=Br(e,t,"utf8",!0);return Ab(r),Qe(r)},Ab=e=>{let t=e.find(r=>typeof r!="string"&&!E(r));if(t!==void 0)throw new TypeError(`The \`stdin\` option is invalid: when passing objects as input, a transform must be used to serialize them to strings or Uint8Arrays: ${t}.`)}});var Wr,Db,Tb,Nu,Bu,Ib,ju,Lo=l(()=>{ye();I();Pe();ne();Wr=({stdioItems:e,encoding:t,verboseInfo:r,fdNumber:n})=>n!=="all"&&Re(r,n)&&!R.has(t)&&Db(n)&&(e.some(({type:o,value:i})=>o==="native"&&Tb.has(i))||e.every(({type:o})=>U.has(o))),Db=e=>e===1||e===2,Tb=new Set(["pipe","overlapped"]),Nu=async(e,t,r,n)=>{for await(let o of e)Ib(t)||ju(o,r,n)},Bu=(e,t,r)=>{for(let n of e)ju(n,t,r)},Ib=e=>e._readableState.pipes.length>0,ju=(e,t,r)=>{let n=Bt(e);B({type:"output",verboseMessage:n,fdNumber:t,verboseInfo:r})}});var zr,Wu,Ob,kb,Rb,Pb,Cb,zu=l(()=>{zr=require("node:fs");Lo();jr();Lr();k();I();xe();Wu=({fileDescriptors:e,syncResult:{output:t},options:r,isMaxBuffer:n,verboseInfo:o})=>{if(t===null)return{output:Array.from({length:3})};let i={},a=new Set([]);return{output:t.map((c,f)=>Ob({result:c,fileDescriptors:e,fdNumber:f,state:i,outputFiles:a,isMaxBuffer:n,verboseInfo:o},r)),...i}},Ob=({result:e,fileDescriptors:t,fdNumber:r,state:n,outputFiles:o,isMaxBuffer:i,verboseInfo:a},{buffer:s,encoding:c,lines:f,stripFinalNewline:u,maxBuffer:d})=>{if(e===null)return;let p=vl(e,i,d),m=K(p),{stdioItems:h,objectMode:b}=t[r],x=kb([m],h,c,n),{serializedResult:y,finalResult:v=y}=Rb({chunks:x,objectMode:b,encoding:c,lines:f,stripFinalNewline:u,fdNumber:r});Pb({serializedResult:y,fdNumber:r,state:n,verboseInfo:a,encoding:c,stdioItems:h,objectMode:b});let T=s[r]?v:void 0;try{return n.error===void 0&&Cb(y,h,o),T}catch(C){return n.error=C,T}},kb=(e,t,r,n)=>{try{return Br(e,t,r,!1)}catch(o){return n.error=o,e}},Rb=({chunks:e,objectMode:t,encoding:r,lines:n,stripFinalNewline:o,fdNumber:i})=>{if(t)return{serializedResult:e};if(r==="buffer")return{serializedResult:Qe(e)};let a=Hi(e,r);return n[i]?{serializedResult:a,finalResult:ko(a,!o[i],t)}:{serializedResult:a}},Pb=({serializedResult:e,fdNumber:t,state:r,verboseInfo:n,encoding:o,stdioItems:i,objectMode:a})=>{if(!Wr({stdioItems:i,encoding:o,verboseInfo:n,fdNumber:t}))return;let s=ko(e,!1,a);try{Bu(s,t,n)}catch(c){r.error??=c}},Cb=(e,t,r)=>{for(let{path:n,append:o}of t.filter(({type:i})=>Pr.has(i))){let i=typeof n=="string"?n:n.toString();o||r.has(i)?(0,zr.appendFileSync)(n,e):(r.add(i),(0,zr.writeFileSync)(n,e))}}});var Gu,Vu=l(()=>{k();mt();Gu=([,e,t],r)=>{if(r.all)return e===void 0?t:t===void 0?e:Array.isArray(e)?Array.isArray(t)?[...e,...t]:[...e,ee(t,r,"all")]:Array.isArray(t)?[ee(e,r,"all"),...t]:E(e)&&E(t)?wn([e,t]):`${e}${t}`}});var Gr,Hu,Mb,Yu,qu,Ub,Fo,No=l(()=>{Gr=require("node:events");ge();Hu=async(e,t)=>{let[r,n]=await Mb(e);return t.isForcefullyTerminated??=!1,[r,n]},Mb=async e=>{let[t,r]=await Promise.allSettled([(0,Gr.once)(e,"spawn"),(0,Gr.once)(e,"exit")]);return t.status==="rejected"?[]:r.status==="rejected"?Yu(e):r.value},Yu=async e=>{try{return await(0,Gr.once)(e,"exit")}catch{return Yu(e)}},qu=async e=>{let[t,r]=await e;if(!Ub(t,r)&&Fo(t,r))throw new L;return[t,r]},Ub=(e,t)=>e===void 0&&t===void 0,Fo=(e,t)=>e!==0||t!==null});var Ku,_b,Ju=l(()=>{ge();xe();No();Ku=({error:e,status:t,signal:r,output:n},{maxBuffer:o})=>{let i=_b(e,t,r),a=i?.code==="ETIMEDOUT",s=El(i,n,o);return{resultError:i,exitCode:t,signal:r,timedOut:a,isMaxBuffer:s}},_b=(e,t,r)=>e!==void 0?e:Fo(t,r)?new L:void 0});var Zu,Xu,Lb,Fb,Nb,Vr,Bb,jb,Wb,zb,Qu=l(()=>{Zu=require("node:child_process");On();so();co();pt();Or();xu();mt();Fu();zu();xe();Vu();Ju();Xu=(e,t,r)=>{let{file:n,commandArguments:o,command:i,escapedCommand:a,startTime:s,verboseInfo:c,options:f,fileDescriptors:u}=Lb(e,t,r),d=Bb({file:n,commandArguments:o,options:f,command:i,escapedCommand:a,verboseInfo:c,fileDescriptors:u,startTime:s});return Ge(d,c,f)},Lb=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:a}=zt(e,t,r),s=Fb(r),{file:c,commandArguments:f,options:u}=gr(e,t,s);Nb(u);let d=wu(u,a);return{file:c,commandArguments:f,command:n,escapedCommand:o,startTime:i,verboseInfo:a,options:u,fileDescriptors:d}},Fb=e=>e.node&&!e.ipc?{...e,ipc:!1}:e,Nb=({ipc:e,ipcInput:t,detached:r,cancelSignal:n})=>{t&&Vr("ipcInput"),e&&Vr("ipc: true"),r&&Vr("detached: true"),n&&Vr("cancelSignal")},Vr=e=>{throw new TypeError(`The "${e}" option cannot be used with synchronous methods.`)},Bb=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,verboseInfo:i,fileDescriptors:a,startTime:s})=>{let c=jb({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:a,startTime:s});if(c.failed)return c;let{resultError:f,exitCode:u,signal:d,timedOut:p,isMaxBuffer:m}=Ku(c,r),{output:h,error:b=f}=Wu({fileDescriptors:a,syncResult:c,options:r,isMaxBuffer:m,verboseInfo:i}),x=h.map((v,T)=>ee(v,r,T)),y=ee(Gu(h,r),r,"all");return zb({error:b,exitCode:u,signal:d,timedOut:p,isMaxBuffer:m,stdio:x,all:y,options:r,command:n,escapedCommand:o,startTime:s})},jb=({file:e,commandArguments:t,options:r,command:n,escapedCommand:o,fileDescriptors:i,startTime:a})=>{try{Lu(i,r);let s=Wb(r);return(0,Zu.spawnSync)(...br(e,t,s))}catch(s){return ze({error:s,command:n,escapedCommand:o,fileDescriptors:i,options:r,startTime:a,isSync:!0})}},Wb=({encoding:e,maxBuffer:t,...r})=>({...r,encoding:"buffer",maxBuffer:Tr(t)}),zb=({error:e,exitCode:t,signal:r,timedOut:n,isMaxBuffer:o,stdio:i,all:a,options:s,command:c,escapedCommand:f,startTime:u})=>e===void 0?Ir({command:c,escapedCommand:f,stdio:i,all:a,ipcOutput:[],options:s,startTime:u}):dt({error:e,command:c,escapedCommand:f,timedOut:n,isCanceled:!1,isGracefullyCanceled:!1,isMaxBuffer:o,isForcefullyTerminated:!1,exitCode:t,signal:r,stdio:i,all:a,ipcOutput:[],options:s,startTime:u,isSync:!0})});var He,ef,Gb,Vb,Hb,Yb,tf=l(()=>{He=require("node:events");Fe();st();at();ef=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0,filter:i}={})=>(_e({methodName:"getOneMessage",isSubprocess:r,ipc:n,isConnected:cr(e)}),Gb({anyProcess:e,channel:t,isSubprocess:r,filter:i,reference:o})),Gb=async({anyProcess:e,channel:t,isSubprocess:r,filter:n,reference:o})=>{tr(t,o);let i=se(e,t,r),a=new AbortController;try{return await Promise.race([Vb(i,n,a),Hb(i,r,a),Yb(i,r,a)])}catch(s){throw Le(e),s}finally{a.abort(),rr(t,o)}},Vb=async(e,t,{signal:r})=>{if(t===void 0){let[n]=await(0,He.once)(e,"message",{signal:r});return n}for await(let[n]of(0,He.on)(e,"message",{signal:r}))if(t(n))return n},Hb=async(e,t,{signal:r})=>{await(0,He.once)(e,"disconnect",{signal:r}),Ks(t)},Yb=async(e,t,{signal:r})=>{let[n]=await(0,He.once)(e,"strict:error",{signal:r});throw Zt(n,t)}});var bt,nf,Bo,qb,Kb,Jb,rf,jo=l(()=>{bt=require("node:events");Fe();st();at();nf=({anyProcess:e,channel:t,isSubprocess:r,ipc:n},{reference:o=!0}={})=>Bo({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:!r,reference:o}),Bo=({anyProcess:e,channel:t,isSubprocess:r,ipc:n,shouldAwait:o,reference:i})=>{_e({methodName:"getEachMessage",isSubprocess:r,ipc:n,isConnected:cr(e)}),tr(t,i);let a=se(e,t,r),s=new AbortController,c={};return qb(e,a,s),Kb({ipcEmitter:a,isSubprocess:r,controller:s,state:c}),Jb({anyProcess:e,channel:t,ipcEmitter:a,isSubprocess:r,shouldAwait:o,controller:s,state:c,reference:i})},qb=async(e,t,r)=>{try{await(0,bt.once)(t,"disconnect",{signal:r.signal}),r.abort()}catch{}},Kb=async({ipcEmitter:e,isSubprocess:t,controller:r,state:n})=>{try{let[o]=await(0,bt.once)(e,"strict:error",{signal:r.signal});n.error=Zt(o,t),r.abort()}catch{}},Jb=async function*({anyProcess:e,channel:t,ipcEmitter:r,isSubprocess:n,shouldAwait:o,controller:i,state:a,reference:s}){try{for await(let[c]of(0,bt.on)(r,"message",{signal:i.signal}))rf(a),yield c}catch{rf(a)}finally{i.abort(),rr(t,s),n||Le(e),o&&await e}},rf=({error:e})=>{if(e)throw e}});var Wo,of,af,sf,zo=l(()=>{Wo=$(require("node:process"),1);pr();tf();jo();ar();of=(e,{ipc:t})=>{Object.assign(e,sf(e,!1,t))},af=()=>{let e=Wo.default,t=!0,r=Wo.default.channel!==void 0;return{...sf(e,t,r),getCancelSignal:kc.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})}},sf=(e,t,r)=>({sendMessage:dr.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getOneMessage:ef.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r}),getEachMessage:nf.bind(void 0,{anyProcess:e,channel:e.channel,isSubprocess:t,ipc:r})})});var cf,le,lf,Zb,yt,Xb,Qb,ey,ty,uf=l(()=>{cf=require("node:child_process"),le=require("node:stream");Ur();pt();Or();lf=({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,verboseInfo:a})=>{Do(n);let s=new cf.ChildProcess;Zb(s,n),Object.assign(s,{readable:Xb,writable:Qb,duplex:ey});let c=ze({error:e,command:t,escapedCommand:r,fileDescriptors:n,options:o,startTime:i,isSync:!1}),f=ty(c,a,o);return{subprocess:s,promise:f}},Zb=(e,t)=>{let r=yt(),n=yt(),o=yt(),i=Array.from({length:t.length-3},yt),a=yt(),s=[r,n,o,...i];Object.assign(e,{stdin:r,stdout:n,stderr:o,all:a,stdio:s})},yt=()=>{let e=new le.PassThrough;return e.end(),e},Xb=()=>new le.Readable({read(){}}),Qb=()=>new le.Writable({write(){}}),ey=()=>new le.Duplex({read(){},write(){}}),ty=async(e,t,r)=>Ge(e,t,r)});var Ye,df,V,pf,wt,ff,ry,mf=l(()=>{Ye=require("node:fs"),df=require("node:buffer"),V=require("node:stream");jr();Ur();I();pf=(e,t)=>Mr(ry,e,t,!1),wt=({type:e,optionName:t})=>{throw new TypeError(`The \`${t}\` option cannot be ${ce[e]}.`)},ff={fileNumber:wt,generator:_o,asyncGenerator:_o,nodeStream:({value:e})=>({stream:e}),webTransform({value:{transform:e,writableObjectMode:t,readableObjectMode:r}}){let n=t||r;return{stream:V.Duplex.fromWeb(e,{objectMode:n})}},duplex:({value:{transform:e}})=>({stream:e}),native(){}},ry={input:{...ff,fileUrl:({value:e})=>({stream:(0,Ye.createReadStream)(e)}),filePath:({value:{file:e}})=>({stream:(0,Ye.createReadStream)(e)}),webStream:({value:e})=>({stream:V.Readable.fromWeb(e)}),iterable:({value:e})=>({stream:V.Readable.from(e)}),asyncIterable:({value:e})=>({stream:V.Readable.from(e)}),string:({value:e})=>({stream:V.Readable.from(e)}),uint8Array:({value:e})=>({stream:V.Readable.from(df.Buffer.from(e))})},output:{...ff,fileUrl:({value:e})=>({stream:(0,Ye.createWriteStream)(e)}),filePath:({value:{file:e,append:t}})=>({stream:(0,Ye.createWriteStream)(e,t?{flags:"a"}:{})}),webStream:({value:e})=>({stream:V.Writable.fromWeb(e)}),iterable:wt,asyncIterable:wt,string:wt,uint8Array:wt}}});function ve(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got \`${typeof e}\`.`);for(let o of e)Vo(o);let t=e.some(({readableObjectMode:o})=>o),r=ny(e,t),n=new Go({objectMode:t,writableHighWaterMark:r,readableHighWaterMark:r});for(let o of e)n.add(o);return n}var St,Yr,Ho,ny,Go,oy,iy,ay,Vo,sy,cy,ly,uy,fy,bf,yf,Yo,wf,dy,Hr,hf,gf,qr=l(()=>{St=require("node:events"),Yr=require("node:stream"),Ho=require("node:stream/promises");ny=(e,t)=>{if(e.length===0)return(0,Yr.getDefaultHighWaterMark)(t);let r=e.filter(({readableObjectMode:n})=>n===t).map(({readableHighWaterMark:n})=>n);return Math.max(...r)},Go=class extends Yr.PassThrough{#t=new Set([]);#r=new Set([]);#e=new Set([]);#n;#i=Symbol("unpipe");#o=new WeakMap;add(t){if(Vo(t),this.#t.has(t))return;this.#t.add(t),this.#n??=oy(this,this.#t,this.#i);let r=sy({passThroughStream:this,stream:t,streams:this.#t,ended:this.#r,aborted:this.#e,onFinished:this.#n,unpipeEvent:this.#i});this.#o.set(t,r),t.pipe(this,{end:!1})}async remove(t){if(Vo(t),!this.#t.has(t))return!1;let r=this.#o.get(t);return r===void 0?!1:(this.#o.delete(t),t.unpipe(this),await r,!0)}},oy=async(e,t,r)=>{Hr(e,hf);let n=new AbortController;try{await Promise.race([iy(e,n),ay(e,t,r,n)])}finally{n.abort(),Hr(e,-hf)}},iy=async(e,{signal:t})=>{try{await(0,Ho.finished)(e,{signal:t,cleanup:!0})}catch(r){throw bf(e,r),r}},ay=async(e,t,r,{signal:n})=>{for await(let[o]of(0,St.on)(e,"unpipe",{signal:n}))t.has(o)&&o.emit(r)},Vo=e=>{if(typeof e?.pipe!="function")throw new TypeError(`Expected a readable stream, got: \`${typeof e}\`.`)},sy=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,onFinished:i,unpipeEvent:a})=>{Hr(e,gf);let s=new AbortController;try{await Promise.race([cy(i,t,s),ly({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:s}),uy({stream:t,streams:r,ended:n,aborted:o,unpipeEvent:a,controller:s})])}finally{s.abort(),Hr(e,-gf)}r.size>0&&r.size===n.size+o.size&&(n.size===0&&o.size>0?Yo(e):fy(e))},cy=async(e,t,{signal:r})=>{try{await e,r.aborted||Yo(t)}catch(n){r.aborted||bf(t,n)}},ly=async({passThroughStream:e,stream:t,streams:r,ended:n,aborted:o,controller:{signal:i}})=>{try{await(0,Ho.finished)(t,{signal:i,cleanup:!0,readable:!0,writable:!1}),r.has(t)&&n.add(t)}catch(a){if(i.aborted||!r.has(t))return;yf(a)?o.add(t):wf(e,a)}},uy=async({stream:e,streams:t,ended:r,aborted:n,unpipeEvent:o,controller:{signal:i}})=>{if(await(0,St.once)(e,o,{signal:i}),!e.readable)return(0,St.once)(i,"abort",{signal:i});t.delete(e),r.delete(e),n.delete(e)},fy=e=>{e.writable&&e.end()},bf=(e,t)=>{yf(t)?Yo(e):wf(e,t)},yf=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Yo=e=>{(e.readable||e.writable)&&e.destroy()},wf=(e,t)=>{e.destroyed||(e.once("error",dy),e.destroy(t))},dy=()=>{},Hr=(e,t)=>{let r=e.getMaxListeners();r!==0&&r!==Number.POSITIVE_INFINITY&&e.setMaxListeners(r+t)},hf=2,gf=1});var qo,qe,py,Ko,my,Jo,Kr=l(()=>{qo=require("node:stream/promises");J();qe=(e,t)=>{e.pipe(t),py(e,t),my(e,t)},py=async(e,t)=>{if(!(_(e)||_(t))){try{await(0,qo.finished)(e,{cleanup:!0,readable:!0,writable:!1})}catch{}Ko(t)}},Ko=e=>{e.writable&&e.end()},my=async(e,t)=>{if(!(_(e)||_(t))){try{await(0,qo.finished)(t,{cleanup:!0,readable:!1,writable:!0})}catch{}Jo(e)}},Jo=e=>{e.readable&&e.destroy()}});var Sf,hy,gy,by,yy,wy,xf=l(()=>{qr();J();er();I();Kr();Sf=(e,t,r)=>{let n=new Map;for(let[o,{stdioItems:i,direction:a}]of Object.entries(t)){for(let{stream:s}of i.filter(({type:c})=>U.has(c)))hy(e,s,a,o);for(let{stream:s}of i.filter(({type:c})=>!U.has(c)))by({subprocess:e,stream:s,direction:a,fdNumber:o,pipeGroups:n,controller:r})}for(let[o,i]of n.entries()){let a=i.length===1?i[0]:ve(i);qe(a,o)}},hy=(e,t,r,n)=>{r==="output"?qe(e.stdio[n],t):qe(t,e.stdio[n]);let o=gy[n];o!==void 0&&(e[o]=t),e.stdio[n]=t},gy=["stdin","stdout","stderr"],by=({subprocess:e,stream:t,direction:r,fdNumber:n,pipeGroups:o,controller:i})=>{if(t===void 0)return;yy(t,i);let[a,s]=r==="output"?[t,e.stdio[n]]:[e.stdio[n],t],c=o.get(a)??[];o.set(a,[...c,s])},yy=(e,{signal:t})=>{_(e)&&be(e,wy,t)},wy=2});var Ae,$f=l(()=>{Ae=[];Ae.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&Ae.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Ae.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var Jr,Zo,Xo,Sy,Qo,Zr,xy,ei,ti,ri,Ef,EE,vE,vf=l(()=>{$f();Jr=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Zo=Symbol.for("signal-exit emitter"),Xo=globalThis,Sy=Object.defineProperty.bind(Object),Qo=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Xo[Zo])return Xo[Zo];Sy(Xo,Zo,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],o=n.indexOf(r);o!==-1&&(o===0&&n.length===1?n.length=0:n.splice(o,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let o=!1;for(let i of this.listeners[t])o=i(r,n)===!0||o;return t==="exit"&&(o=this.emit("afterExit",r,n)||o),o}},Zr=class{},xy=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),ei=class extends Zr{onExit(){return()=>{}}load(){}unload(){}},ti=class extends Zr{#t=ri.platform==="win32"?"SIGINT":"SIGHUP";#r=new Qo;#e;#n;#i;#o={};#a=!1;constructor(t){super(),this.#e=t,this.#o={};for(let r of Ae)this.#o[r]=()=>{let n=this.#e.listeners(r),{count:o}=this.#r,i=t;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(o+=i.__signal_exit_emitter__.count),n.length===o){this.unload();let a=this.#r.emit("exit",null,r),s=r==="SIGHUP"?this.#t:r;a||t.kill(t.pid,s)}};this.#i=t.reallyExit,this.#n=t.emit}onExit(t,r){if(!Jr(this.#e))return()=>{};this.#a===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#r.on(n,t),()=>{this.#r.removeListener(n,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#a){this.#a=!0,this.#r.count+=1;for(let t of Ae)try{let r=this.#o[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#c(t,...r),this.#e.reallyExit=t=>this.#s(t)}}unload(){this.#a&&(this.#a=!1,Ae.forEach(t=>{let r=this.#o[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#n,this.#e.reallyExit=this.#i,this.#r.count-=1)}#s(t){return Jr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#c(t,...r){let n=this.#n;if(t==="exit"&&Jr(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let o=n.call(this.#e,t,...r);return this.#r.emit("exit",this.#e.exitCode,null),o}else return n.call(this.#e,t,...r)}},ri=globalThis.process,{onExit:Ef,load:EE,unload:vE}=xy(Jr(ri)?new ti(ri):new ei)});var Af,Df,Tf=l(()=>{Af=require("node:events");vf();Df=(e,{cleanup:t,detached:r},{signal:n})=>{if(!t||r)return;let o=Ef(()=>{e.kill()});(0,Af.addAbortListener)(n,()=>{o()})}});var Of,$y,Ey,If,vy,kf=l(()=>{yn();Wt();ae();Oe();Of=({source:e,sourcePromise:t,boundOptions:r,createNested:n},...o)=>{let i=jt(),{destination:a,destinationStream:s,destinationError:c,from:f,unpipeSignal:u}=$y(r,n,o),{sourceStream:d,sourceError:p}=vy(e,f),{options:m,fileDescriptors:h}=W.get(e);return{sourcePromise:t,sourceStream:d,sourceOptions:m,sourceError:p,destination:a,destinationStream:s,destinationError:c,unpipeSignal:u,fileDescriptors:h,startTime:i}},$y=(e,t,r)=>{try{let{destination:n,pipeOptions:{from:o,to:i,unpipeSignal:a}={}}=Ey(e,t,...r),s=Qt(n,i);return{destination:n,destinationStream:s,from:o,unpipeSignal:a}}catch(n){return{destinationError:n}}},Ey=(e,t,r,...n)=>{if(Array.isArray(r))return{destination:t(If,e)(r,...n),pipeOptions:e};if(typeof r=="string"||r instanceof URL||gn(r)){if(Object.keys(e).length>0)throw new TypeError('Please use .pipe("file", ..., options) or .pipe(execa("file", ..., options)) instead of .pipe(options)("file", ...).');let[o,i,a]=Ot(r,...n);return{destination:t(If)(o,i,a),pipeOptions:a}}if(W.has(r)){if(Object.keys(e).length>0)throw new TypeError("Please use .pipe(options)`command` or .pipe($(options)`command`) instead of .pipe(options)($`command`).");return{destination:r,pipeOptions:n[0]}}throw new TypeError(`The first argument must be a template string, an options object, or an Execa subprocess: ${r}`)},If=({options:e})=>({options:{...e,stdin:"pipe",piped:!0}}),vy=(e,t)=>{try{return{sourceStream:Be(e,t)}}catch(r){return{sourceError:r}}}});var Pf,Ay,ni,Rf,oi=l(()=>{pt();Kr();Pf=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n,fileDescriptors:o,sourceOptions:i,startTime:a})=>{let s=Ay({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n});if(s!==void 0)throw ni({error:s,fileDescriptors:o,sourceOptions:i,startTime:a})},Ay=({sourceStream:e,sourceError:t,destinationStream:r,destinationError:n})=>{if(t!==void 0&&n!==void 0)return n;if(n!==void 0)return Jo(e),n;if(t!==void 0)return Ko(r),t},ni=({error:e,fileDescriptors:t,sourceOptions:r,startTime:n})=>ze({error:e,command:Rf,escapedCommand:Rf,fileDescriptors:t,options:r,startTime:n,isSync:!1}),Rf="source.pipe(destination)"});var Cf,Mf=l(()=>{Cf=async e=>{let[{status:t,reason:r,value:n=r},{status:o,reason:i,value:a=i}]=await e;if(a.pipedFrom.includes(n)||a.pipedFrom.push(n),o==="rejected")throw a;if(t==="rejected")throw n;return a}});var Uf,_f,Dy,Ty,Iy,Xr,Oy,ky,Lf=l(()=>{Uf=require("node:stream/promises");qr();er();Kr();_f=(e,t,r)=>{let n=Xr.has(t)?Ty(e,t):Dy(e,t);return be(e,Oy,r.signal),be(t,ky,r.signal),Iy(t),n},Dy=(e,t)=>{let r=ve([e]);return qe(r,t),Xr.set(t,r),r},Ty=(e,t)=>{let r=Xr.get(t);return r.add(e),r},Iy=async e=>{try{await(0,Uf.finished)(e,{cleanup:!0,readable:!1,writable:!0})}catch{}Xr.delete(e)},Xr=new WeakMap,Oy=2,ky=1});var Ff,Nf,Ry,Bf=l(()=>{Ff=require("node:util");oi();Nf=(e,t)=>e===void 0?[]:[Ry(e,t)],Ry=async(e,{sourceStream:t,mergedStream:r,fileDescriptors:n,sourceOptions:o,startTime:i})=>{await(0,Ff.aborted)(e,t),await r.remove(t);let a=new Error("Pipe canceled by `unpipeSignal` option.");throw ni({error:a,fileDescriptors:n,sourceOptions:o,startTime:i})}});var Qr,Py,Cy,jf=l(()=>{q();kf();oi();Mf();Lf();Bf();Qr=(e,...t)=>{if(S(t[0]))return Qr.bind(void 0,{...e,boundOptions:{...e.boundOptions,...t[0]}});let{destination:r,...n}=Of(e,...t),o=Py({...n,destination:r});return o.pipe=Qr.bind(void 0,{...e,source:r,sourcePromise:o,boundOptions:{}}),o},Py=async({sourcePromise:e,sourceStream:t,sourceOptions:r,sourceError:n,destination:o,destinationStream:i,destinationError:a,unpipeSignal:s,fileDescriptors:c,startTime:f})=>{let u=Cy(e,o);Pf({sourceStream:t,sourceError:n,destinationStream:i,destinationError:a,fileDescriptors:c,sourceOptions:r,startTime:f});let d=new AbortController;try{let p=_f(t,i,d);return await Promise.race([Cf(u),...Nf(s,{sourceStream:t,mergedStream:p,sourceOptions:r,fileDescriptors:c,startTime:f})])}finally{d.abort()}},Cy=(e,t)=>Promise.allSettled([e,t])});var zf,Gf,en,My,ii,Uy,Vf,ai,Wf,_y,Ly,tn=l(()=>{zf=require("node:events"),Gf=require("node:stream");Ro();Lr();Uo();en=({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:n,encoding:o,preserveNewlines:i})=>{let a=new AbortController;return My(t,a),Vf({stream:e,controller:a,binary:r,shouldEncode:!e.readableObjectMode&&n,encoding:o,shouldSplit:!e.readableObjectMode,preserveNewlines:i})},My=async(e,t)=>{try{await e}catch{}finally{t.abort()}},ii=({stream:e,onStreamEnd:t,lines:r,encoding:n,stripFinalNewline:o,allMixed:i})=>{let a=new AbortController;Uy(t,a,e);let s=e.readableObjectMode&&!i;return Vf({stream:e,controller:a,binary:n==="buffer",shouldEncode:!s,encoding:n,shouldSplit:!s&&r,preserveNewlines:!o})},Uy=async(e,t,r)=>{try{await e}catch{r.destroy()}finally{t.abort()}},Vf=({stream:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:a})=>{let s=(0,zf.on)(e,"data",{signal:t.signal,highWaterMark:Wf,highWatermark:Wf});return _y({onStdoutChunk:s,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:a})},ai=(0,Gf.getDefaultHighWaterMark)(!0),Wf=ai,_y=async function*({onStdoutChunk:e,controller:t,binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:a}){let s=Ly({binary:r,shouldEncode:n,encoding:o,shouldSplit:i,preserveNewlines:a});try{for await(let[c]of e)yield*Ee(c,s,0)}catch(c){if(!t.signal.aborted)throw c}finally{yield*ht(s)}},Ly=({binary:e,shouldEncode:t,encoding:r,shouldSplit:n,preserveNewlines:o})=>[Fr(e,r,!t),_r(e,o,!n,{})].filter(Boolean)});var Hf,Yf,Fy,Ny,By,si,qf,ci=l(()=>{Hf=require("node:timers/promises");Dr();k();Lo();tn();xe();mt();Yf=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,buffer:o,maxBuffer:i,lines:a,allMixed:s,stripFinalNewline:c,verboseInfo:f,streamInfo:u})=>{let d=Fy({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:s,verboseInfo:f,streamInfo:u});if(!o){await Promise.all([Ny(e),d]);return}let p=Io(c,r),m=ii({stream:e,onStreamEnd:t,lines:a,encoding:n,stripFinalNewline:p,allMixed:s}),[h]=await Promise.all([By({stream:e,iterable:m,fdNumber:r,encoding:n,maxBuffer:i,lines:a}),d]);return h},Fy=async({stream:e,onStreamEnd:t,fdNumber:r,encoding:n,allMixed:o,verboseInfo:i,streamInfo:{fileDescriptors:a}})=>{if(!Wr({stdioItems:a[r]?.stdioItems,encoding:n,verboseInfo:i,fdNumber:r}))return;let s=ii({stream:e,onStreamEnd:t,lines:!0,encoding:n,stripFinalNewline:!0,allMixed:o});await Nu(s,e,r,i)},Ny=async e=>{await(0,Hf.setImmediate)(),e.readableFlowing===null&&e.resume()},By=async({stream:e,stream:{readableObjectMode:t},iterable:r,fdNumber:n,encoding:o,maxBuffer:i,lines:a})=>{try{return t||a?await $r(r,{maxBuffer:i}):o==="buffer"?new Uint8Array(await Er(r,{maxBuffer:i})):await Ar(r,{maxBuffer:i})}catch(s){return qf(Sl({error:s,stream:e,readableObjectMode:t,lines:a,encoding:o,fdNumber:n}))}},si=async e=>{try{return await e}catch(t){return qf(t)}},qf=({bufferedData:e})=>Gi(e)?new Uint8Array(e):e});var Jf,xt,jy,Wy,zy,Gy,Vy,li,rn,Kf,nn=l(()=>{Jf=require("node:stream/promises"),xt=async(e,t,r,{isSameDirection:n,stopOnExit:o=!1}={})=>{let i=jy(e,r),a=new AbortController;try{await Promise.race([...o?[r.exitPromise]:[],(0,Jf.finished)(e,{cleanup:!0,signal:a.signal})])}catch(s){i.stdinCleanedUp||Gy(s,t,r,n)}finally{a.abort()}},jy=(e,{originalStreams:[t],subprocess:r})=>{let n={stdinCleanedUp:!1};return e===t&&Wy(e,r,n),n},Wy=(e,t,r)=>{let{_destroy:n}=e;e._destroy=(...o)=>{zy(t,r),n.call(e,...o)}},zy=({exitCode:e,signalCode:t},r)=>{(e!==null||t!==null)&&(r.stdinCleanedUp=!0)},Gy=(e,t,r,n)=>{if(!Vy(e,t,r,n))throw e},Vy=(e,t,r,n=!0)=>r.propagating?Kf(e)||rn(e):(r.propagating=!0,li(r,t)===n?Kf(e):rn(e)),li=({fileDescriptors:e},t)=>t!=="all"&&e[t].direction==="input",rn=e=>e?.code==="ERR_STREAM_PREMATURE_CLOSE",Kf=e=>e?.code==="EPIPE"});var Zf,ui,fi=l(()=>{ci();nn();Zf=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:a,streamInfo:s})=>e.stdio.map((c,f)=>ui({stream:c,fdNumber:f,encoding:t,buffer:r[f],maxBuffer:n[f],lines:o[f],allMixed:!1,stripFinalNewline:i,verboseInfo:a,streamInfo:s})),ui=async({stream:e,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:a,stripFinalNewline:s,verboseInfo:c,streamInfo:f})=>{if(!e)return;let u=xt(e,t,f);if(li(f,t)){await u;return}let[d]=await Promise.all([Yf({stream:e,onStreamEnd:u,fdNumber:t,encoding:r,buffer:n,maxBuffer:o,lines:i,allMixed:a,stripFinalNewline:s,verboseInfo:c,streamInfo:f}),u]);return d}});var Xf,Qf,Hy,Yy,di=l(()=>{qr();fi();Xf=({stdout:e,stderr:t},{all:r})=>r&&(e||t)?ve([e,t].filter(Boolean)):void 0,Qf=({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:i,verboseInfo:a,streamInfo:s})=>ui({...Hy(e,r),fdNumber:"all",encoding:t,maxBuffer:n[1]+n[2],lines:o[1]||o[2],allMixed:Yy(e),stripFinalNewline:i,verboseInfo:a,streamInfo:s}),Hy=({stdout:e,stderr:t,all:r},[,n,o])=>{let i=n||o;return i?n?o?{stream:r,buffer:i}:{stream:e,buffer:i}:{stream:t,buffer:i}:{stream:r,buffer:i}},Yy=({all:e,stdout:t,stderr:r})=>e&&t&&r&&t.readableObjectMode!==r.readableObjectMode});var ed,td,rd=l(()=>{Pe();ne();ed=e=>Re(e,"ipc"),td=(e,t)=>{let r=Bt(e);B({type:"ipc",verboseMessage:r,fdNumber:"ipc",verboseInfo:t})}});var nd,od,id=l(()=>{xe();rd();X();jo();nd=async({subprocess:e,buffer:t,maxBuffer:r,ipc:n,ipcOutput:o,verboseInfo:i})=>{if(!n)return o;let a=ed(i),s=Z(t,"ipc"),c=Z(r,"ipc");for await(let f of Bo({anyProcess:e,channel:e.channel,isSubprocess:!1,ipc:n,shouldAwait:!1,reference:!0}))s&&(xl(e,o,c),o.push(f)),a&&td(f,i);return o},od=async(e,t)=>(await Promise.allSettled([e]),t)});var ad,sd,qy,Ky,Jy,cd=l(()=>{ad=require("node:events");Se();eo();Vn();Qn();J();I();ci();id();no();di();fi();No();nn();sd=async({subprocess:e,options:{encoding:t,buffer:r,maxBuffer:n,lines:o,timeoutDuration:i,cancelSignal:a,gracefulCancel:s,forceKillAfterDelay:c,stripFinalNewline:f,ipc:u,ipcInput:d},context:p,verboseInfo:m,fileDescriptors:h,originalStreams:b,onInternalError:x,controller:y})=>{let v=Hu(e,p),T={originalStreams:b,fileDescriptors:h,subprocess:e,exitPromise:v,propagating:!1},C=Zf({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:m,streamInfo:T}),Y=Qf({subprocess:e,encoding:t,buffer:r,maxBuffer:n,lines:o,stripFinalNewline:f,verboseInfo:m,streamInfo:T}),te=[],pe=nd({subprocess:e,buffer:r,maxBuffer:n,ipc:u,ipcOutput:te,verboseInfo:m}),Te=qy(b,e,T),re=Ky(h,T);try{return await Promise.race([Promise.all([{},qu(v),Promise.all(C),Y,pe,jc(e,d),...Te,...re]),x,Jy(e,y),..._c(e,i,p,y),...qs({subprocess:e,cancelSignal:a,gracefulCancel:s,context:p,controller:y}),...Cc({subprocess:e,cancelSignal:a,gracefulCancel:s,forceKillAfterDelay:c,context:p,controller:y})])}catch(mn){return p.terminationReason??="other",Promise.all([{error:mn},v,Promise.all(C.map(Xe=>si(Xe))),si(Y),od(pe,te),Promise.allSettled(Te),Promise.allSettled(re)])}},qy=(e,t,r)=>e.map((n,o)=>n===t.stdio[o]?void 0:xt(n,o,r)),Ky=(e,t)=>e.flatMap(({stdioItems:r},n)=>r.filter(({value:o,stream:i=o})=>N(i,{checkOpen:!1})&&!_(i)).map(({type:o,value:i,stream:a=i})=>xt(a,n,t,{isSameDirection:U.has(o),stopOnExit:o==="native"}))),Jy=async(e,{signal:t})=>{let[r]=await(0,ad.once)(e,"error",{signal:t});throw r}});var ld,$t,Ke,on=l(()=>{Ne();ld=()=>({readableDestroy:new WeakMap,writableFinal:new WeakMap,writableDestroy:new WeakMap}),$t=(e,t,r)=>{let n=e[r];n.has(t)||n.set(t,[]);let o=n.get(t),i=j();return o.push(i),{resolve:i.resolve.bind(i),promises:o}},Ke=async({resolve:e,promises:t},r)=>{e();let[n]=await Promise.race([Promise.allSettled([!0,r]),Promise.all([!1,...t])]);return!n}});var pi,mi,ud,hi,gi,an,sn,bi=l(()=>{pi=require("node:stream/promises");nn();mi=async e=>{if(e!==void 0)try{await hi(e)}catch{}},ud=async e=>{if(e!==void 0)try{await gi(e)}catch{}},hi=async e=>{await(0,pi.finished)(e,{cleanup:!0,readable:!1,writable:!0})},gi=async e=>{await(0,pi.finished)(e,{cleanup:!0,readable:!0,writable:!1})},an=async(e,t)=>{if(await e,t)throw t},sn=(e,t,r)=>{r&&!rn(r)?e.destroy(r):t&&e.destroy()}});var fd,dd,pd,yi,wi,Si,Zy,xi,$i,md,Ei=l(()=>{fd=require("node:stream"),dd=require("node:util");ye();ae();tn();Ne();on();bi();pd=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,binary:o=!0,preserveNewlines:i=!0}={})=>{let a=o||R.has(r),{subprocessStdout:s,waitReadableDestroy:c}=yi(e,n,t),{readableEncoding:f,readableObjectMode:u,readableHighWaterMark:d}=wi(s,a),{read:p,onStdoutDataDone:m}=Si({subprocessStdout:s,subprocess:e,binary:a,encoding:r,preserveNewlines:i}),h=new fd.Readable({read:p,destroy:(0,dd.callbackify)($i.bind(void 0,{subprocessStdout:s,subprocess:e,waitReadableDestroy:c})),highWaterMark:d,objectMode:u,encoding:f});return xi({subprocessStdout:s,onStdoutDataDone:m,readable:h,subprocess:e}),h},yi=(e,t,r)=>{let n=Be(e,t),o=$t(r,n,"readableDestroy");return{subprocessStdout:n,waitReadableDestroy:o}},wi=({readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r},n)=>n?{readableEncoding:e,readableObjectMode:t,readableHighWaterMark:r}:{readableEncoding:e,readableObjectMode:!0,readableHighWaterMark:ai},Si=({subprocessStdout:e,subprocess:t,binary:r,encoding:n,preserveNewlines:o})=>{let i=j(),a=en({subprocessStdout:e,subprocess:t,binary:r,shouldEncode:!r,encoding:n,preserveNewlines:o});return{read(){Zy(this,a,i)},onStdoutDataDone:i}},Zy=async(e,t,r)=>{try{let{value:n,done:o}=await t.next();o?r.resolve():e.push(n)}catch{}},xi=async({subprocessStdout:e,onStdoutDataDone:t,readable:r,subprocess:n,subprocessStdin:o})=>{try{await gi(e),await n,await mi(o),await t,r.readable&&r.push(null)}catch(i){await mi(o),md(r,i)}},$i=async({subprocessStdout:e,subprocess:t,waitReadableDestroy:r},n)=>{await Ke(r,t)&&(md(e,n),await an(t,n))},md=(e,t)=>{sn(e,e.readable,t)}});var hd,vi,gd,Ai,Di,Xy,Qy,Ti,Ii,bd,Oi=l(()=>{hd=require("node:stream"),vi=require("node:util");ae();on();bi();gd=({subprocess:e,concurrentStreams:t},{to:r}={})=>{let{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}=Ai(e,r,t),a=new hd.Writable({...Di(n,e,o),destroy:(0,vi.callbackify)(Ii.bind(void 0,{subprocessStdin:n,subprocess:e,waitWritableFinal:o,waitWritableDestroy:i})),highWaterMark:n.writableHighWaterMark,objectMode:n.writableObjectMode});return Ti(n,a),a},Ai=(e,t,r)=>{let n=Qt(e,t),o=$t(r,n,"writableFinal"),i=$t(r,n,"writableDestroy");return{subprocessStdin:n,waitWritableFinal:o,waitWritableDestroy:i}},Di=(e,t,r)=>({write:Xy.bind(void 0,e),final:(0,vi.callbackify)(Qy.bind(void 0,e,t,r))}),Xy=(e,t,r,n)=>{e.write(t,r)?n():e.once("drain",n)},Qy=async(e,t,r)=>{await Ke(r,t)&&(e.writable&&e.end(),await t)},Ti=async(e,t,r)=>{try{await hi(e),t.writable&&t.end()}catch(n){await ud(r),bd(t,n)}},Ii=async({subprocessStdin:e,subprocess:t,waitWritableFinal:r,waitWritableDestroy:n},o)=>{await Ke(r,t),await Ke(n,t)&&(bd(e,o),await an(t,o))},bd=(e,t)=>{sn(e,e.writable,t)}});var yd,wd,Sd,e0,xd=l(()=>{yd=require("node:stream"),wd=require("node:util");ye();Ei();Oi();Sd=({subprocess:e,concurrentStreams:t,encoding:r},{from:n,to:o,binary:i=!0,preserveNewlines:a=!0}={})=>{let s=i||R.has(r),{subprocessStdout:c,waitReadableDestroy:f}=yi(e,n,t),{subprocessStdin:u,waitWritableFinal:d,waitWritableDestroy:p}=Ai(e,o,t),{readableEncoding:m,readableObjectMode:h,readableHighWaterMark:b}=wi(c,s),{read:x,onStdoutDataDone:y}=Si({subprocessStdout:c,subprocess:e,binary:s,encoding:r,preserveNewlines:a}),v=new yd.Duplex({read:x,...Di(u,e,d),destroy:(0,wd.callbackify)(e0.bind(void 0,{subprocessStdout:c,subprocessStdin:u,subprocess:e,waitReadableDestroy:f,waitWritableFinal:d,waitWritableDestroy:p})),readableHighWaterMark:b,writableHighWaterMark:u.writableHighWaterMark,readableObjectMode:h,writableObjectMode:u.writableObjectMode,encoding:m});return xi({subprocessStdout:c,onStdoutDataDone:y,readable:v,subprocess:e,subprocessStdin:u}),Ti(u,v,c),v},e0=async({subprocessStdout:e,subprocessStdin:t,subprocess:r,waitReadableDestroy:n,waitWritableFinal:o,waitWritableDestroy:i},a)=>{await Promise.all([$i({subprocessStdout:e,subprocess:r,waitReadableDestroy:n},a),Ii({subprocessStdin:t,subprocess:r,waitWritableFinal:o,waitWritableDestroy:i},a)])}});var ki,t0,$d=l(()=>{ye();ae();tn();ki=(e,t,{from:r,binary:n=!1,preserveNewlines:o=!1}={})=>{let i=n||R.has(t),a=Be(e,r),s=en({subprocessStdout:a,subprocess:e,binary:i,shouldEncode:!0,encoding:t,preserveNewlines:o});return t0(s,a,e)},t0=async function*(e,t,r){try{yield*e}finally{t.readable&&t.destroy(),await r}}});var Ed,vd=l(()=>{on();Ei();Oi();xd();$d();Ed=(e,{encoding:t})=>{let r=ld();e.readable=pd.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.writable=gd.bind(void 0,{subprocess:e,concurrentStreams:r}),e.duplex=Sd.bind(void 0,{subprocess:e,concurrentStreams:r,encoding:t}),e.iterable=ki.bind(void 0,e,t),e[Symbol.asyncIterator]=ki.bind(void 0,e,t,{})}});var Ad,r0,n0,Dd=l(()=>{Ad=(e,t)=>{for(let[r,n]of n0){let o=n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}},r0=(async()=>{})().constructor.prototype,n0=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(r0,e)])});var Td,Id,Od,o0,i0,a0,s0,c0,kd=l(()=>{Td=require("node:events"),Id=require("node:child_process");Dr();On();so();ae();co();zo();pt();Or();uf();mf();mt();xf();Kt();Tf();jf();di();cd();vd();Ne();Dd();Od=(e,t,r,n)=>{let{file:o,commandArguments:i,command:a,escapedCommand:s,startTime:c,verboseInfo:f,options:u,fileDescriptors:d}=o0(e,t,r),{subprocess:p,promise:m}=a0({file:o,commandArguments:i,options:u,startTime:c,verboseInfo:f,command:a,escapedCommand:s,fileDescriptors:d});return p.pipe=Qr.bind(void 0,{source:p,sourcePromise:m,boundOptions:{},createNested:n}),Ad(p,m),W.set(p,{options:u,fileDescriptors:d}),p},o0=(e,t,r)=>{let{command:n,escapedCommand:o,startTime:i,verboseInfo:a}=zt(e,t,r),{file:s,commandArguments:c,options:f}=gr(e,t,r),u=i0(f),d=pf(u,a);return{file:s,commandArguments:c,command:n,escapedCommand:o,startTime:i,verboseInfo:a,options:u,fileDescriptors:d}},i0=({timeout:e,signal:t,...r})=>{if(t!==void 0)throw new TypeError('The "signal" option has been renamed to "cancelSignal" instead.');return{...r,timeoutDuration:e}},a0=({file:e,commandArguments:t,options:r,startTime:n,verboseInfo:o,command:i,escapedCommand:a,fileDescriptors:s})=>{let c;try{c=(0,Id.spawn)(...br(e,t,r))}catch(h){return lf({error:h,command:i,escapedCommand:a,fileDescriptors:s,options:r,startTime:n,verboseInfo:o})}let f=new AbortController;(0,Td.setMaxListeners)(Number.POSITIVE_INFINITY,f.signal);let u=[...c.stdio];Sf(c,s,f),Df(c,r,f);let d={},p=j();c.kill=Vs.bind(void 0,{kill:c.kill.bind(c),options:r,onInternalError:p,context:d,controller:f}),c.all=Xf(c,r),Ed(c,r),of(c,r);let m=s0({subprocess:c,options:r,startTime:n,verboseInfo:o,fileDescriptors:s,originalStreams:u,command:i,escapedCommand:a,context:d,onInternalError:p,controller:f});return{subprocess:c,promise:m}},s0=async({subprocess:e,options:t,startTime:r,verboseInfo:n,fileDescriptors:o,originalStreams:i,command:a,escapedCommand:s,context:c,onInternalError:f,controller:u})=>{let[d,[p,m],h,b,x]=await sd({subprocess:e,options:t,context:c,verboseInfo:n,fileDescriptors:o,originalStreams:i,onInternalError:f,controller:u});u.abort(),f.resolve();let y=h.map((C,Y)=>ee(C,t,Y)),v=ee(b,t,"all"),T=c0({errorInfo:d,exitCode:p,signal:m,stdio:y,all:v,ipcOutput:x,context:c,options:t,command:a,escapedCommand:s,startTime:r});return Ge(T,n,t)},c0=({errorInfo:e,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,context:a,options:s,command:c,escapedCommand:f,startTime:u})=>"error"in e?dt({error:e.error,command:c,escapedCommand:f,timedOut:a.terminationReason==="timeout",isCanceled:a.terminationReason==="cancel"||a.terminationReason==="gracefulCancel",isGracefullyCanceled:a.terminationReason==="gracefulCancel",isMaxBuffer:e.error instanceof z,isForcefullyTerminated:a.isForcefullyTerminated,exitCode:t,signal:r,stdio:n,all:o,ipcOutput:i,options:s,startTime:u,isSync:!1}):Ir({command:c,escapedCommand:f,stdio:n,all:o,ipcOutput:i,options:s,startTime:u})});var cn,l0,u0,Rd=l(()=>{q();X();cn=(e,t)=>{let r=Object.fromEntries(Object.entries(t).map(([n,o])=>[n,l0(n,e[n],o)]));return{...e,...r}},l0=(e,t,r)=>u0.has(e)&&S(t)&&S(r)?{...t,...r}:r,u0=new Set(["env",...$n])});var ue,f0,d0,Pd=l(()=>{q();yn();Qi();Qu();kd();Rd();ue=(e,t,r,n)=>{let o=(a,s,c)=>ue(a,s,r,c),i=(...a)=>f0({mapArguments:e,deepOptions:r,boundOptions:t,setBoundExeca:n,createNested:o},...a);return n!==void 0&&n(i,o,t),i},f0=({mapArguments:e,deepOptions:t={},boundOptions:r={},setBoundExeca:n,createNested:o},i,...a)=>{if(S(i))return o(e,cn(r,i),n);let{file:s,commandArguments:c,options:f,isSync:u}=d0({mapArguments:e,firstArgument:i,nextArguments:a,deepOptions:t,boundOptions:r});return u?Xu(s,c,f):Od(s,c,f,o)},d0=({mapArguments:e,firstArgument:t,nextArguments:r,deepOptions:n,boundOptions:o})=>{let i=Zi(t)?Xi(t,r):[t,...r],[a,s,c]=Ot(...i),f=cn(cn(n,o),c),{file:u=a,commandArguments:d=s,options:p=f,isSync:m=!1}=e({file:a,commandArguments:s,options:f});return{file:u,commandArguments:d,options:p,isSync:m}}});var Cd,Md,Ud,p0,m0,_d=l(()=>{Cd=({file:e,commandArguments:t})=>Ud(e,t),Md=({file:e,commandArguments:t})=>({...Ud(e,t),isSync:!0}),Ud=(e,t)=>{if(t.length>0)throw new TypeError(`The command and its arguments must be passed as a single string: ${e} ${t}.`);let[r,...n]=p0(e);return{file:r,commandArguments:n}},p0=e=>{if(typeof e!="string")throw new TypeError(`The command must be a string: ${String(e)}.`);let t=e.trim();if(t==="")return[];let r=[];for(let n of t.split(m0)){let o=r.at(-1);o&&o.endsWith("\\")?r[r.length-1]=`${o.slice(0,-1)} ${n}`:r.push(n)}return r},m0=/ +/g});var Ld,Fd,h0,Nd,g0,Bd,jd=l(()=>{Ld=(e,t,r)=>{e.sync=t(h0,r),e.s=e.sync},Fd=({options:e})=>Nd(e),h0=({options:e})=>({...Nd(e),isSync:!0}),Nd=e=>({options:{...g0(e),...e}}),g0=({input:e,inputFile:t,stdio:r})=>e===void 0&&t===void 0&&r===void 0?{stdin:"inherit"}:{},Bd={preferLocal:!0}});var A,JA,ZA,XA,QA,eD,tD,rD,nD,oD,Ri=l(()=>{Pd();_d();ro();jd();zo();A=ue(()=>({})),JA=ue(()=>({isSync:!0})),ZA=ue(Cd),XA=ue(Md),QA=ue(Lc),eD=ue(Fd,{},Bd,Ld),{sendMessage:tD,getOneMessage:rD,getEachMessage:nD,getCancelSignal:oD}=af()});var Wd={};hn(Wd,{macosAudioAPI:()=>y0});async function P(){Pi.default.existsSync(D)||(Pi.default.copyFileSync(b0,D),await A("chmod",["+x",D]))}function Je({stderr:e}){if(e)throw new Error(e)}function De({stdout:e,stderr:t}){return Je({stderr:t}),JSON.parse(e)}var Ci,Mi,Pi,b0,D,y0,zd=l(()=>{"use strict";Ci=$(require("path"));Ri();Mi=require("@raycast/api"),Pi=$(require("fs")),b0=Ci.default.join(Mi.environment.assetsPath,"audio-devices"),D=Ci.default.join(Mi.environment.supportPath,"audio-devices");y0={async getAllDevices(){return await P(),De(await A(D,["list","--json"]))},async getInputDevices(){return await P(),De(await A(D,["list","--input","--json"]))},async getOutputDevices(){return await P(),De(await A(D,["list","--output","--json"]))},async getDefaultOutputDevice(){return await P(),De(await A(D,["output","get","--json"]))},async getDefaultInputDevice(){return await P(),De(await A(D,["input","get","--json"]))},async getDefaultSystemDevice(){return await P(),De(await A(D,["system","get","--json"]))},async setDefaultOutputDevice(e){return await P(),Je(await A(D,["output","set",e]))},async setDefaultInputDevice(e){return await P(),Je(await A(D,["input","set",e]))},async setDefaultSystemDevice(e){return await P(),Je(await A(D,["system","set",e]))},async getOutputDeviceVolume(e){await P();let{stdout:t,stderr:r}=await A(D,["volume","get",e]);return r?void 0:parseFloat(t)},async setOutputDeviceVolume(e,t){return await P(),Je(await A(D,["volume","set",e,`${t}`]))},async createAggregateDevice(e,t,r,n){return await P(),De(await A(D,["aggregate","create","--json",n?.multiOutput?"--multi-output":"",e,t,...r||[]].filter(Boolean)))},async destroyAggregateDevice(e){return await P(),Je(await A(D,["aggregate","destroy",e]))}}});var Vd={};hn(Vd,{windowsAudioAPI:()=>$0});async function Gd(){if(Et)return Et;try{await A("pwsh",["-NoProfile","-Command","exit 0"]),Et="pwsh"}catch{Et="powershell"}return Et}function w0(e){return e.replace(/\x1B\[[0-9;]*m/g,"")}async function fe(e){let t=await Gd();try{let{stdout:r}=await A(t,["-NoProfile","-Command",e]);return w0(r)}catch(r){let n=r.stderr||r.message||"PowerShell command failed";throw console.error("PowerShell command failed",{command:e,errorMessage:n}),new Error(n)}}function dn(){return ln||(ln=S0().catch(e=>{throw ln=null,e})),ln}async function S0(){let e=!1;try{let t=await fe("Get-Module -ListAvailable -Name AudioDeviceCmdlets | Select-Object -First 1 | ConvertTo-Json");e=!!(t&&t.trim()!==""&&t.trim()!=="null")}catch{e=!1}if(!e){(0,H.showToast)({style:H.Toast.Style.Animated,title:"Installing AudioDeviceCmdlets",message:"This may take a moment..."});try{let r=await Gd()==="pwsh"?"Install-PSResource -Name AudioDeviceCmdlets -Scope CurrentUser -TrustRepository -Quiet *>&1 | Out-String":"Set-PSRepository -Name PSGallery -InstallationPolicy Trusted; Install-Module -Name AudioDeviceCmdlets -Scope CurrentUser -Force -SkipPublisherCheck *>&1 | Out-String",n=await fe(r);n&&n.trim()&&console.log("Install-Module output:",n);let o=await fe("Get-Module -ListAvailable -Name AudioDeviceCmdlets | Select-Object -First 1 | ConvertTo-Json");if(!o||o.trim()===""||o.trim()==="null"){let i=await fe("$env:PSModulePath"),a=`Module not found after install. PSModulePath: ${i}`;throw console.error("AudioDeviceCmdlets missing after install",{modulePath:i,installOutput:n}),(0,H.showToast)({style:H.Toast.Style.Failure,title:"AudioDeviceCmdlets Install Failed",message:a}),new Error(a)}(0,H.showToast)({style:H.Toast.Style.Success,title:"AudioDeviceCmdlets Installed"})}catch(t){let r=t.message||"Unknown error";throw console.error("AudioDeviceCmdlets install failed",r),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Installation Failed",message:r}),t}}}function pn(e){return`$WarningPreference = 'SilentlyContinue'; Import-Module AudioDeviceCmdlets -ErrorAction Stop -WarningAction SilentlyContinue; ${e}`}async function un(e){await dn();let t="Get-AudioDevice -List";e&&(t=`Get-AudioDevice -List | Where-Object { $_.Type -eq '${e}' }`);let r=await fe(pn(`(${t} | ConvertTo-Json -Depth 3)`)),n=JSON.parse(r);return Array.isArray(n)?n:[n]}function Ze(e,t){return{id:e.ID,uid:e.ID,name:e.Name,isInput:t==="input",isOutput:t==="output",transportType:x0(e.Name),index:e.Index,isDefault:e.Default,isCommunication:e.DefaultComm}}function x0(e){let t={"realtek digital":"spdif","digital output":"spdif","steam streaming":"virtual",nvidia:"hdmi",headphones:"headphones",headset:"headphones",earbuds:"headphones",airpods:"headphones",microphone:"microphone",speakers:"speakers",hdmi:"hdmi",displayport:"displayport",usb:"usb",bluetooth:"bluetooth",mic:"microphone",speaker:"speakers",spdif:"spdif",optical:"spdif",dp:"displayport",virtual:"virtual"},r=e.toLowerCase();for(let[n,o]of Object.entries(t))if(r.includes(n))return o;return"speakers"}async function fn(e,t,r=!1){await dn();let o=`Set-AudioDevice -ID '${e.replace(/'/g,"''")}' ${r?"-CommunicationOnly":"-DefaultOnly"}`;await fe(pn(o))}var H,Et,ln,$0,Hd=l(()=>{"use strict";Ri();H=require("@raycast/api"),Et=null;ln=null;$0={async getAllDevices(){let e=await un("Playback"),t=await un("Recording"),r=e.map(o=>Ze(o,"output")),n=t.map(o=>Ze(o,"input"));return[...r,...n]},async getInputDevices(){return(await un("Recording")).map(t=>Ze(t,"input"))},async getOutputDevices(){return(await un("Playback")).map(t=>Ze(t,"output"))},async getDefaultOutputDevice(){await dn();let t=await fe(pn("(Get-AudioDevice -List | Where-Object { $_.Type -eq 'Playback' -and $_.Default -eq $true } | ConvertTo-Json)"));if(!t||t.trim()===""||t==="null")throw new Error("No default output device found");let r=JSON.parse(t);if(!r||!r.ID)throw new Error("No valid default output device found");return Ze(r,"output")},async getDefaultInputDevice(){await dn();let t=await fe(pn("(Get-AudioDevice -List | Where-Object { $_.Type -eq 'Recording' -and $_.Default -eq $true } | ConvertTo-Json)"));if(!t||t.trim()===""||t==="null")throw new Error("No default input device found");let r=JSON.parse(t);if(!r||!r.ID)throw new Error("No valid default input device found");return Ze(r,"input")},async setDefaultOutputDevice(e){await fn(e,"output",!1)},async setDefaultInputDevice(e){await fn(e,"input",!1)},async setDefaultCommunicationOutputDevice(e){await fn(e,"output",!0)},async setDefaultCommunicationInputDevice(e){await fn(e,"input",!0)},async getOutputDeviceVolume(){},async setOutputDeviceVolume(){return Promise.resolve()}}});var v0={};hn(v0,{default:()=>E0});module.exports=ap(v0);var de=require("@raycast/api");var me=$(require("react")),w=require("@raycast/api");var he=$(require("node:fs")),Tt=$(require("node:path"));var Bi=require("react/jsx-runtime");function It(e,t){let r=e instanceof Error?e.message:String(e);return(0,w.showToast)({style:w.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??Ni(e),secondaryAction:t?.primaryAction?Ni(e):void 0})}var Ni=e=>{let t=!0,r="[Extension Name]...",n="";try{let a=JSON.parse((0,he.readFileSync)((0,Tt.join)(w.environment.assetsPath,"..","package.json"),"utf8"));r=`[${a.title}]...`,n=`https://raycast.com/${a.owner||a.author}/${a.name}`,(!a.owner||a.access==="public")&&(t=!1)}catch{}let o=w.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:o?"Copy Logs":"Report Error",onAction(a){a.hide(),o?w.Clipboard.copy(i):(0,w.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};var Ui=process.platform==="win32"?"Windows":"macOS",Yd=Ui==="macOS",qd=Ui==="Windows",vt=null;async function Kd(){if(vt)return vt;if(Yd){let{macosAudioAPI:e}=await Promise.resolve().then(()=>(zd(),Wd));vt=e}else if(qd){let{windowsAudioAPI:e}=await Promise.resolve().then(()=>(Hd(),Vd));vt=e}else throw new Error(`Unsupported platform: ${Ui}`);return vt}var _i=null;async function At(){return _i||(_i=await Kd()),_i}async function Jd(){return(await At()).getInputDevices()}async function Zd(){return(await At()).getOutputDevices()}async function Xd(e){return(await At()).setDefaultOutputDevice(e)}async function Qd(e){return(await At()).setDefaultInputDevice(e)}async function ep(e){let t=await At();return t.setDefaultSystemDevice?t.setDefaultSystemDevice(e):Promise.resolve()}async function Li(){let e=(0,de.getPreferenceValues)(),t=e.input,r=e.output,n=e.comboName;try{let o=await Jd(),i=await Zd(),a=o.find(c=>c.name===t),s=i.find(c=>c.name===r);if(!a){It(new Error(`Input device "${t}" not found`));return}if(!s){It(new Error(`Output device "${r}" not found`));return}await Qd(a.id),await Xd(s.id),e.systemOutput&&await ep(s.id),(0,de.closeMainWindow)({clearRootSearch:!0}),(0,de.popToRoot)({clearSearchBar:!0}),(0,de.showHUD)(`${n} in use`)}catch(o){console.error(o),It(o,{title:"Failed to switch devices"})}}var E0=Li;
